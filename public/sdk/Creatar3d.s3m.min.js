/*!
 * Creatar3d平台 
 * 版本信息：v1.0.0
 * 编译日期："2022-12-23 17:35:42"
 * 版权所有：Copyright by Creatar
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Creatar3d.s3m",[],t):"object"==typeof exports?exports["Creatar3d.s3m"]=t():e["Creatar3d.s3m"]=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=15)}([function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(17);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(11).default,i=r(7);e.exports=function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(71);function i(){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,t,r){var i=n(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(18)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},function(e,t){function r(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,l,"next",e)}function l(e){r(a,i,o,s,l,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(19),i=r(20),o=r(21),a=r(22);e.exports=function(e){return n(e)||i(e)||o(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function r(t){return e.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAACYCAYAAACS0lH9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAJ0GlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgMTE2LjE2NDY1NSwgMjAyMS8wMS8yNi0xNTo0MToyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDplODY0YmNmNy1lZGIyLWIyNDQtYWI0NC04OWZkNmMwOTQ4MDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjIyOGMxMDUtODFmZS00MjAxLWIwOTEtZDkwMGI0NTI0NWMwIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9IjcxNzA5OEJGODAwODNEREJGRDQyQzAzMzQ5NDlDRDFDIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9IiIgdGlmZjpJbWFnZVdpZHRoPSI1MTIiIHRpZmY6SW1hZ2VMZW5ndGg9IjE1MiIgdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPSIyIiB0aWZmOlNhbXBsZXNQZXJQaXhlbD0iMyIgdGlmZjpYUmVzb2x1dGlvbj0iMS8xIiB0aWZmOllSZXNvbHV0aW9uPSIxLzEiIHRpZmY6UmVzb2x1dGlvblVuaXQ9IjEiIGV4aWY6RXhpZlZlcnNpb249IjAyMzEiIGV4aWY6Q29sb3JTcGFjZT0iNjU1MzUiIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSI1MTIiIGV4aWY6UGl4ZWxZRGltZW5zaW9uPSIxNTIiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTAyLTIzVDEwOjAyOjQxKzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0wMi0yM1QxMDowODo0NCswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0wMi0yM1QxMDowODo0NCswODowMCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmZmYTk5ZjhhLTdiZmQtNDcxNi04MTgwLWJmZTUyMmFmNGUzNSIgc3RFdnQ6d2hlbj0iMjAyMS0wMi0yM1QxMDowODo0NCswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjIgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBpbWFnZS9qcGVnIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gaW1hZ2UvanBlZyB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjYyMjhjMTA1LTgxZmUtNDIwMS1iMDkxLWQ5MDBiNDUyNDVjMCIgc3RFdnQ6d2hlbj0iMjAyMS0wMi0yM1QxMDowODo0NCswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjIgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOmZmYTk5ZjhhLTdiZmQtNDcxNi04MTgwLWJmZTUyMmFmNGUzNSIgc3RSZWY6ZG9jdW1lbnRJRD0iNzE3MDk4QkY4MDA4M0REQkZENDJDMDMzNDk0OUNEMUMiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0iNzE3MDk4QkY4MDA4M0REQkZENDJDMDMzNDk0OUNEMUMiLz4gPHBob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHJkZjpCYWc+IDxyZGY6bGk+NzE3MDk4QkY4MDA4M0REQkZENDJDMDMzNDk0OUNEMUM8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHRpZmY6Qml0c1BlclNhbXBsZT4gPHJkZjpTZXE+IDxyZGY6bGk+ODwvcmRmOmxpPiA8cmRmOmxpPjg8L3JkZjpsaT4gPHJkZjpsaT44PC9yZGY6bGk+IDwvcmRmOlNlcT4gPC90aWZmOkJpdHNQZXJTYW1wbGU+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+h9EbuwAAA01JREFUeJzt3TuOFVkQBNDoJhmEkDBgZv8L5GMgIcRvHg5ryDTiHKn98Co67q16T4/HYwIAVHm+DgAA7FMAAKCQAgAAhSbJ03UIAGCXBQAACikAAFDIEQAAFLIAAEAhBQAACikAAFBoogQAQB0PfwAopAAAQCGvAQJAIQsAABSyAABAIQsAABSyAABAIQUAAAo5AgCAQr4ECACFPPwBoJACAACFHAEAQCEPfwAoZAEAgEIe/gBQyAIAAIU8/AGgkAUAAAr5LQAAKOS/fwAoZAEAgELuAABAIQsAABRSAACgkAIAAIXcAQCAQhYAAChkAQCAQgoAABRSAACgkIc/ABSaJC+uQwAAu7wFAACFFAAAKDR//wCAIhYAACjkEiAAFLIAAEChSfLyOgQAsMuXAAGgkLcAAKCQAgAAhbwFAACFFAAAKOQIAAAKTZJ/rkMAALsUAAAo5AgAAAr5EiAAFFIAAKCQOwAAUEgBAIBCk+TVdQgAYNckeXMdAgDYNUneXocAAHZNkvfXIQCAXZPkv+sQAMCuSfLvdQgAYNckeXcdAgDY5RIgABSaJK+vQwAAu/wWAAAUmiRP1yEAgF2T5HEdAgDYNUl+XocAAHZNkm/XIQCAXZPky3UIAGDXJPl8HQIA2DVJPl6HAAB2TZIP1yEAgF2T5NN1CABgl0uAAFBokny9DgEA7Jok369DAAC7JsmP6xAAwC4FAAAK+S0AACikAABAoUny6zoEALDLHQAAKKQAAEAhRwAAUGiS/L4OAQDsUgAAoJAjAAAopAAAQKFJ8v91CABgly8BAkChSfK4DgEA7PIWAAAUsgAAQCFvAQBAIQsAABRSAACgkEuAAFDo+ToAALDPlwABoJACAACFFAAAKOQtAAAoZAEAgEIWAAAopAAAQCEFAAAKuQMAAIUsAABQyKeAAaCQBQAACrkDAACFHAEAQCELAAAUsgAAQCELAAAUsgAAQCELAAAUsgAAQCEFAAAKOQIAgEIWAAAo5LcAAKCQAgAAhRwBAEAhCwAAFLIAAEAhCwAAFLIAAEAhBQAACvkSIAAUsgAAQCEFAAAKKQAAUMhrgABQyAIAAIUUAAAo5AgAAApZAACgkAIAAIUUAAAo5A4AABT6A6gaPQ6/wRIfAAAAAElFTkSuQmCC"},function(e,t,r){var n,i,o;i=[],void 0===(o="function"==typeof(n=function(){var e=function(e){return e.reduce((function(e,t){return 2*e+t}),0)},t=function(e){for(var t=[],r=7;r>=0;r--)t.push(!!(e&1<<r));return t},r=function(e){this.data=e,this.len=this.data.length,this.pos=0,this.readByte=function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return e instanceof Uint8Array?e[this.pos++]:255&e.charCodeAt(this.pos++)},this.readBytes=function(e){for(var t=[],r=0;r<e;r++)t.push(this.readByte());return t},this.read=function(e){for(var t="",r=0;r<e;r++)t+=String.fromCharCode(this.readByte());return t},this.readUnsigned=function(){var e=this.readBytes(2);return(e[1]<<8)+e[0]}},n=function(r,n){n||(n={});var i=function(e){for(var t=[],n=0;n<e;n++)t.push(r.readBytes(3));return t},o=function(){var e,t;t="";do{e=r.readByte(),t+=r.read(e)}while(0!==e);return t},a=function(a){a.leftPos=r.readUnsigned(),a.topPos=r.readUnsigned(),a.width=r.readUnsigned(),a.height=r.readUnsigned();var s=t(r.readByte());a.lctFlag=s.shift(),a.interlaced=s.shift(),a.sorted=s.shift(),a.reserved=s.splice(0,2),a.lctSize=e(s.splice(0,3)),a.lctFlag&&(a.lct=i(1<<a.lctSize+1)),a.lzwMinCodeSize=r.readByte();var l=o();a.pixels=function(e,t){for(var r,n,i=0,o=function(e){for(var r=0,n=0;n<e;n++)t.charCodeAt(i>>3)&1<<(7&i)&&(r|=1<<n),i++;return r},a=[],s=1<<e,l=s+1,c=e+1,u=[],f=function(){u=[],c=e+1;for(var t=0;t<s;t++)u[t]=[t];u[s]=[],u[l]=null};;)if(n=r,(r=o(c))!==s){if(r===l)break;if(r<u.length)n!==s&&u.push(u[n].concat(u[r][0]));else{if(r!==u.length)throw new Error("Invalid LZW code.");u.push(u[n].concat(u[n][0]))}a.push.apply(a,u[r]),u.length===1<<c&&c<12&&c++}else f();return a}(a.lzwMinCodeSize,l),a.interlaced&&(a.pixels=function(e,t){for(var r=new Array(e.length),n=e.length/t,i=function(n,i){var o=e.slice(i*t,(i+1)*t);r.splice.apply(r,[n*t,t].concat(o))},o=[0,4,2,1],a=[8,8,4,2],s=0,l=0;l<4;l++)for(var c=o[l];c<n;c+=a[l])i(c,s),s++;return r}(a.pixels,a.width)),n.img&&n.img(a)},s=function(){var i={};switch(i.sentinel=r.readByte(),String.fromCharCode(i.sentinel)){case"!":i.type="ext",function(i){switch(i.label=r.readByte(),i.label){case 249:i.extType="gce",function(i){r.readByte();var o=t(r.readByte());i.reserved=o.splice(0,3),i.disposalMethod=e(o.splice(0,3)),i.userInput=o.shift(),i.transparencyGiven=o.shift(),i.delayTime=r.readUnsigned(),i.transparencyIndex=r.readByte(),i.terminator=r.readByte(),n.gce&&n.gce(i)}(i);break;case 254:i.extType="com",function(e){e.comment=o(),n.com&&n.com(e)}(i);break;case 1:i.extType="pte",function(e){r.readByte(),e.ptHeader=r.readBytes(12),e.ptData=o(),n.pte&&n.pte(e)}(i);break;case 255:i.extType="app",function(e){switch(r.readByte(),e.identifier=r.read(8),e.authCode=r.read(3),e.identifier){case"NETSCAPE":!function(e){r.readByte(),e.unknown=r.readByte(),e.iterations=r.readUnsigned(),e.terminator=r.readByte(),n.app&&n.app.NETSCAPE&&n.app.NETSCAPE(e)}(e);break;default:!function(e){e.appData=o(),n.app&&n.app[e.identifier]&&n.app[e.identifier](e)}(e)}}(i);break;default:i.extType="unknown",function(e){e.data=o(),n.unknown&&n.unknown(e)}(i)}}(i);break;case",":i.type="img",a(i);break;case";":i.type="eof",n.eof&&n.eof(i);break;default:throw new Error("Unknown block: 0x"+i.sentinel.toString(16))}"eof"!==i.type&&setTimeout(s,0)};!function(){var o={};if(o.sig=r.read(3),o.ver=r.read(3),"GIF"!==o.sig)throw new Error("Not a GIF file.");o.width=r.readUnsigned(),o.height=r.readUnsigned();var a=t(r.readByte());o.gctFlag=a.shift(),o.colorRes=e(a.splice(0,3)),o.sorted=a.shift(),o.gctSize=e(a.splice(0,3)),o.bgColor=r.readByte(),o.pixelAspectRatio=r.readByte(),o.gctFlag&&(o.gct=i(1<<o.gctSize+1)),n.hdr&&n.hdr(o)}(),setTimeout(s,0)};return function(e){var t,i,o={vp_l:0,vp_t:0,vp_w:null,vp_h:null,c_w:null,c_h:null};for(var a in e)o[a]=e[a];o.vp_w&&o.vp_h&&(o.is_vp=!0);var s=null,l=!1,c=null,u=null,f=null,h=null,d=null,p=null,y=null,m=!0,v=!1,g=[],A=[],_=o.gif;void 0===o.auto_play&&(o.auto_play=!_.getAttribute("rel:auto_play")||"1"==_.getAttribute("rel:auto_play"));var C,E,x,B,T=o.hasOwnProperty("on_end")?o.on_end:null,b=o.hasOwnProperty("loop_delay")?o.loop_delay:0,P=o.hasOwnProperty("loop_mode")?o.loop_mode:"auto",M=!o.hasOwnProperty("draw_while_loading")||o.draw_while_loading,w=!!M&&(!o.hasOwnProperty("show_progress_bar")||o.show_progress_bar),I=o.hasOwnProperty("progressbar_height")?o.progressbar_height:25,D=o.hasOwnProperty("progressbar_background_color")?o.progressbar_background_color:"rgba(255,255,255,0.4)",S=o.hasOwnProperty("progressbar_foreground_color")?o.progressbar_foreground_color:"rgba(255,0,22,.8)",O=function(){c=null,u=null,d=f,f=null,p=null},R=function(){try{n(t,W)}catch(e){F("parse")}},L=function(e,t){C.width=e*H(),C.height=t*H(),x.style.minWidth=e*H()+"px",B.width=e,B.height=t,B.style.width=e+"px",B.style.height=t+"px",B.getContext("2d").setTransform(1,0,0,1,0,0)},k=function(e,t,r){if(r&&w){var n,i,a,s=I;o.is_vp?v?(i=(o.vp_t+o.vp_h-s)/H(),s/=H(),n=o.vp_l/H()+e/t*(o.vp_w/H()),a=C.width/H()):(i=o.vp_t+o.vp_h-s,s=s,n=o.vp_l+e/t*o.vp_w,a=C.width):(i=(C.height-s)/(v?H():1),n=e/t*C.width/(v?H():1),a=C.width/(v?H():1),s/=v?H():1),E.fillStyle=D,E.fillRect(n,i,a-n,s),E.fillStyle=S,E.fillRect(0,i,n,s)}},F=function(e){s=e,i={width:_.width,height:_.height},g=[],E.fillStyle="black",E.fillRect(0,0,o.c_w?o.c_w:i.width,o.c_h?o.c_h:i.height),E.strokeStyle="red",E.lineWidth=3,E.moveTo(0,0),E.lineTo(o.c_w?o.c_w:i.width,o.c_h?o.c_h:i.height),E.moveTo(0,o.c_h?o.c_h:i.height),E.lineTo(o.c_w?o.c_w:i.width,0),E.stroke()},G=function(){p&&(g.push({data:p.getImageData(0,0,i.width,i.height),delay:u}),A.push({x:0,y:0}))},N=function(){var e,t,r,n=-1,i=0,a=function(e){n+=e,c()},l=(e=!1,t=function(){null!==T&&T(_),i++,!1!==P||i<0?r():(e=!1,m=!1)},r=function(){if(e=m){a(1);var i=10*g[n].delay;i||(i=100),0==(n+1+g.length)%g.length?(i+=b,setTimeout(t,i)):setTimeout(r,i)}},function(){e||setTimeout(r,0)}),c=function(){var e;(n=parseInt(n,10))>g.length-1&&(n=0),n<0&&(n=0),e=A[n],B.getContext("2d").putImageData(g[n].data,e.x,e.y),E.globalCompositeOperation="copy",E.drawImage(B,0,0)};return{init:function(){s||(o.c_w&&o.c_h||E.scale(H(),H()),o.auto_play?l():(n=0,c()))},step:l,play:function(){m=!0,l()},pause:function(){m=!1},playing:m,move_relative:a,current_frame:function(){return n},length:function(){return g.length},move_to:function(e){n=e,c()}}}(),z=function(e){k(t.pos,t.data.length,e)},U=function(){},V=function(e,t){return function(r){e(r),z(t)}},W={hdr:V((function(e){L((i=e).width,i.height)})),gce:V((function(e){G(),O(),c=e.transparencyGiven?e.transparencyIndex:null,u=e.delayTime,f=e.disposalMethod})),com:V(U),app:{NETSCAPE:V(U)},img:V((function(e){p||(p=B.getContext("2d"));var t=g.length,r=e.lctFlag?e.lct:i.gct;t>0&&(3===d?null!==h?p.putImageData(g[h].data,0,0):p.clearRect(y.leftPos,y.topPos,y.width,y.height):h=t-1,2===d&&p.clearRect(y.leftPos,y.topPos,y.width,y.height));var n=p.getImageData(e.leftPos,e.topPos,e.width,e.height);e.pixels.forEach((function(e,t){e!==c&&(n.data[4*t+0]=r[e][0],n.data[4*t+1]=r[e][1],n.data[4*t+2]=r[e][2],n.data[4*t+3]=255)})),p.putImageData(n,e.leftPos,e.topPos),v||(E.scale(H(),H()),v=!0),M&&(E.drawImage(B,0,0),M=o.auto_play),y=e}),!0),eof:function(e){G(),z(!1),o.c_w&&o.c_h||(C.width=i.width*H(),C.height=i.height*H()),N.init(),l=!1,Y&&Y(_)}},j=function(){var e=_.parentNode,t=document.createElement("div");C=document.createElement("canvas"),E=C.getContext("2d"),x=document.createElement("div"),B=document.createElement("canvas"),t.width=C.width=_.width,t.height=C.height=_.height,x.style.minWidth=_.width+"px",t.className="jsgif",x.className="jsgif_toolbar",t.appendChild(C),t.appendChild(x),e.insertBefore(t,_),e.removeChild(_),o.c_w&&o.c_h&&L(o.c_w,o.c_h),Z=!0},H=function(){return o.max_width&&i&&i.width>o.max_width?o.max_width/i.width:1},Z=!1,Y=!1,J=function(e){return!l&&(Y=e||!1,l=!0,g=[],O(),h=null,d=null,p=null,y=null,!0)},K=function(){return g.reduce((function(e,t){return e+t.delay}),0)};return{play:N.play,pause:N.pause,move_relative:N.move_relative,move_to:N.move_to,get_playing:function(){return m},get_canvas:function(){return C},get_canvas_scale:function(){return H()},get_loading:function(){return l},get_auto_play:function(){return o.auto_play},get_length:function(){return N.length()},get_frames:function(){return g},get_duration:function(){return K()},get_duration_ms:function(){return 10*K()},get_current_frame:function(){return N.current_frame()},load_url:function(e,n){if(J(n)){var i=new XMLHttpRequest;i.open("GET",e,!0),"overrideMimeType"in i?i.overrideMimeType("text/plain; charset=x-user-defined"):"responseType"in i?i.responseType="arraybuffer":i.setRequestHeader("Accept-Charset","x-user-defined"),i.onloadstart=function(){Z||j()},i.onload=function(e){200!=this.status&&F("xhr - response"),"response"in this||(this.response=new VBArray(this.responseText).toArray().map(String.fromCharCode).join(""));var n=this.response;n.toString().indexOf("ArrayBuffer")>0&&(n=new Uint8Array(n)),t=new r(n),setTimeout(R,0)},i.onprogress=function(e){e.lengthComputable&&k(e.loaded,e.total,!0)},i.onerror=function(){F("xhr")},i.send()}},load:function(e){this.load_url(_.getAttribute("rel:animated_src")||_.src,e)},load_raw:function(e,n){J(n)&&(Z||j(),t=new r(e),setTimeout(R,0))},set_frame_offset:function(e,t){A[e]?(void 0!==t.x&&(A[e].x=t.x),void 0!==t.y&&(A[e].y=t.y)):A[e]=t}}}})?n.apply(t,i):n)||(e.exports=o)},function(e,t,r){e.exports=r(16)},function(e,t,r){"use strict";r.r(t);var n=function(e){if(!e)throw new Error("缺少 ".concat(e," 基础包"));try{e.mixin(r(77).default)}catch(e){console.error(e)}};"undefined"!=typeof window&&window.Creatar3d&&n(window.Creatar3d),t.default={name:"creatar-s3m",version:"1.0.0",compile_time:"2022-12-23 17:35:42",install:n}},function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,r(t,n)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(11).default;function i(){"use strict";
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var i=t&&t.prototype instanceof p?t:p,o=Object.create(i.prototype),a=new b(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=x(a,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=h(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,a),o}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var d={};function p(){}function y(){}function m(){}var v={};u(v,s,(function(){return this}));var g=Object.getPrototypeOf,A=g&&g(g(P([])));A&&A!==r&&o.call(A,s)&&(v=A);var _=m.prototype=p.prototype=Object.create(v);function C(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var r;this._invoke=function(i,a){function s(){return new t((function(r,s){!function r(i,a,s,l){var c=h(e[i],e,a);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,l)}),(function(e){r("throw",e,s,l)})):t.resolve(f).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,l)}))}l(c.arg)}(i,a,r,s)}))}return r=r?r.then(s,s):s()}}function x(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=h(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function B(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function b(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(B,this),this.reset(!0)}function P(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(o.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:M}}function M(){return{value:void 0,done:!0}}return y.prototype=m,u(_,"constructor",m),u(m,"constructor",y),y.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},C(E.prototype),u(E.prototype,l,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new E(f(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(_),u(_,c,"Generator"),u(_,s,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=P,b.prototype={constructor:b,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),l=o.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;T(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(12);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(12);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports='/**\r\n * @license\r\n * Cellular noise ("Worley noise") in 2D in GLSL.\r\n * Copyright (c) Stefan Gustavson 2011-04-19. All rights reserved.\r\n * This code is released under the conditions of the MIT license.\r\n * See LICENSE file for details.\r\n */\r\n\r\n//#ifdef GL_OES_standard_derivatives\r\n//    #extension GL_OES_standard_derivatives : enable\r\n//#endif\r\n//\r\n//float aastep (float threshold , float value)\r\n//{\r\n//    float afwidth = 0.7 * length ( vec2 ( dFdx ( value ), dFdy ( value )));\r\n//    return smoothstep ( threshold - afwidth , threshold + afwidth , value );\r\n//}\r\n\r\n// Permutation polynomial: (34x^2 + x) mod 289\r\nvec3 _czm_permute289(vec3 x)\r\n{\r\n    return mod((34.0 * x + 1.0) * x, 289.0);\r\n}\r\n\r\n/**\r\n * DOC_TBA\r\n *\r\n * Implemented by Stefan Gustavson, and distributed under the MIT License.  {@link http://openglinsights.git.sourceforge.net/git/gitweb.cgi?p=openglinsights/openglinsights;a=tree;f=proceduraltextures}\r\n *\r\n * @name czm_cellular\r\n * @glslFunction\r\n *\r\n * @see Stefan Gustavson\'s chapter, <i>Procedural Textures in GLSL</i>, in <a href="http://www.openglinsights.com/">OpenGL Insights</a>.\r\n */\r\nvec2 czm_cellular(vec2 P)\r\n// Cellular noise, returning F1 and F2 in a vec2.\r\n// Standard 3x3 search window for good F1 and F2 values\r\n{\r\n#define K 0.142857142857 // 1/7\r\n#define Ko 0.428571428571 // 3/7\r\n#define jitter 1.0 // Less gives more regular pattern\r\n    vec2 Pi = mod(floor(P), 289.0);\r\n    vec2 Pf = fract(P);\r\n    vec3 oi = vec3(-1.0, 0.0, 1.0);\r\n    vec3 of = vec3(-0.5, 0.5, 1.5);\r\n    vec3 px = _czm_permute289(Pi.x + oi);\r\n    vec3 p = _czm_permute289(px.x + Pi.y + oi); // p11, p12, p13\r\n    vec3 ox = fract(p*K) - Ko;\r\n    vec3 oy = mod(floor(p*K),7.0)*K - Ko;\r\n    vec3 dx = Pf.x + 0.5 + jitter*ox;\r\n    vec3 dy = Pf.y - of + jitter*oy;\r\n    vec3 d1 = dx * dx + dy * dy; // d11, d12 and d13, squared\r\n    p = _czm_permute289(px.y + Pi.y + oi); // p21, p22, p23\r\n    ox = fract(p*K) - Ko;\r\n    oy = mod(floor(p*K),7.0)*K - Ko;\r\n    dx = Pf.x - 0.5 + jitter*ox;\r\n    dy = Pf.y - of + jitter*oy;\r\n    vec3 d2 = dx * dx + dy * dy; // d21, d22 and d23, squared\r\n    p = _czm_permute289(px.z + Pi.y + oi); // p31, p32, p33\r\n    ox = fract(p*K) - Ko;\r\n    oy = mod(floor(p*K),7.0)*K - Ko;\r\n    dx = Pf.x - 1.5 + jitter*ox;\r\n    dy = Pf.y - of + jitter*oy;\r\n    vec3 d3 = dx * dx + dy * dy; // d31, d32 and d33, squared\r\n    // Sort out the two smallest distances (F1, F2)\r\n    vec3 d1a = min(d1, d2);\r\n    d2 = max(d1, d2); // Swap to keep candidates for F2\r\n    d2 = min(d2, d3); // neither F1 nor F2 are now in d3\r\n    d1 = min(d1a, d2); // F1 is now in d1\r\n    d2 = max(d1a, d2); // Swap to keep candidates for F2\r\n    d1.xy = (d1.x < d1.y) ? d1.xy : d1.yx; // Swap if smaller\r\n    d1.xz = (d1.x < d1.z) ? d1.xz : d1.zx; // F1 is in d1.x\r\n    d1.yz = min(d1.yz, d2.yz); // F2 is now not in d2.yz\r\n    d1.y = min(d1.y, d1.z); // nor in  d1.z\r\n    d1.y = min(d1.y, d2.x); // F2 is in d1.y, we\'re done.\r\n    return sqrt(d1.xy);\r\n}\r\n'},function(e,t){e.exports='/**\r\n * @license\r\n * Description : Array and textureless GLSL 2D/3D/4D simplex\r\n *               noise functions.\r\n *      Author : Ian McEwan, Ashima Arts.\r\n *  Maintainer : ijm\r\n *     Lastmod : 20110822 (ijm)\r\n *     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\r\n *               Distributed under the MIT License. See LICENSE file.\r\n *               https://github.com/ashima/webgl-noise\r\n */\r\n\r\nvec4 _czm_mod289(vec4 x)\r\n{\r\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\r\n}\r\n\r\nvec3 _czm_mod289(vec3 x)\r\n{\r\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\r\n}\r\n\r\nvec2 _czm_mod289(vec2 x)\r\n{\r\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\r\n}\r\n\r\nfloat _czm_mod289(float x)\r\n{\r\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\r\n}\r\n\r\nvec4 _czm_permute(vec4 x)\r\n{\r\n    return _czm_mod289(((x*34.0)+1.0)*x);\r\n}\r\n\r\nvec3 _czm_permute(vec3 x)\r\n{\r\n    return _czm_mod289(((x*34.0)+1.0)*x);\r\n}\r\n\r\nfloat _czm_permute(float x)\r\n{\r\n    return _czm_mod289(((x*34.0)+1.0)*x);\r\n}\r\n\r\nvec4 _czm_taylorInvSqrt(vec4 r)\r\n{\r\n    return 1.79284291400159 - 0.85373472095314 * r;\r\n}\r\n\r\nfloat _czm_taylorInvSqrt(float r)\r\n{\r\n    return 1.79284291400159 - 0.85373472095314 * r;\r\n}\r\n\r\nvec4 _czm_grad4(float j, vec4 ip)\r\n{\r\n    const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\r\n    vec4 p,s;\r\n\r\n    p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\r\n    p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\r\n    s = vec4(lessThan(p, vec4(0.0)));\r\n    p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;\r\n\r\n    return p;\r\n}\r\n\r\n/**\r\n * DOC_TBA\r\n *\r\n * Implemented by Ian McEwan, Ashima Arts, and distributed under the MIT License.  {@link https://github.com/ashima/webgl-noise}\r\n *\r\n * @name czm_snoise\r\n * @glslFunction\r\n *\r\n * @see <a href="https://github.com/ashima/webgl-noise">https://github.com/ashima/webgl-noise</a>\r\n * @see Stefan Gustavson\'s paper <a href="http://www.itn.liu.se/~stegu/simplexnoise/simplexnoise.pdf">Simplex noise demystified</a>\r\n */\r\nfloat czm_snoise(vec2 v)\r\n{\r\n    const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\r\n                        0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\r\n                       -0.577350269189626,  // -1.0 + 2.0 * C.x\r\n                        0.024390243902439); // 1.0 / 41.0\r\n    // First corner\r\n    vec2 i  = floor(v + dot(v, C.yy) );\r\n    vec2 x0 = v -   i + dot(i, C.xx);\r\n\r\n    // Other corners\r\n    vec2 i1;\r\n    //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\r\n    //i1.y = 1.0 - i1.x;\r\n    i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\r\n    // x0 = x0 - 0.0 + 0.0 * C.xx ;\r\n    // x1 = x0 - i1 + 1.0 * C.xx ;\r\n    // x2 = x0 - 1.0 + 2.0 * C.xx ;\r\n    vec4 x12 = x0.xyxy + C.xxzz;\r\n    x12.xy -= i1;\r\n\r\n    // Permutations\r\n    i = _czm_mod289(i); // Avoid truncation effect in permutation\r\n    vec3 p = _czm_permute( _czm_permute( i.y + vec3(0.0, i1.y, 1.0 )) + i.x + vec3(0.0, i1.x, 1.0 ));\r\n\r\n    vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\r\n    m = m*m ;\r\n    m = m*m ;\r\n\r\n    // Gradients: 41 points uniformly over a line, mapped onto a diamond.\r\n    // The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\r\n    vec3 x = 2.0 * fract(p * C.www) - 1.0;\r\n    vec3 h = abs(x) - 0.5;\r\n    vec3 ox = floor(x + 0.5);\r\n    vec3 a0 = x - ox;\r\n\r\n    // Normalise gradients implicitly by scaling m\r\n    // Approximation of: m *= inversesqrt( a0*a0 + h*h );\r\n    m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\r\n\r\n    // Compute final noise value at P\r\n    vec3 g;\r\n    g.x  = a0.x  * x0.x  + h.x  * x0.y;\r\n    g.yz = a0.yz * x12.xz + h.yz * x12.yw;\r\n    return 130.0 * dot(m, g);\r\n}\r\n\r\nfloat czm_snoise(vec3 v)\r\n{\r\n    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\r\n    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\r\n\r\n    // First corner\r\n    vec3 i  = floor(v + dot(v, C.yyy) );\r\n    vec3 x0 =   v - i + dot(i, C.xxx) ;\r\n\r\n    // Other corners\r\n    vec3 g = step(x0.yzx, x0.xyz);\r\n    vec3 l = 1.0 - g;\r\n    vec3 i1 = min( g.xyz, l.zxy );\r\n    vec3 i2 = max( g.xyz, l.zxy );\r\n\r\n    //   x0 = x0 - 0.0 + 0.0 * C.xxx;\r\n    //   x1 = x0 - i1  + 1.0 * C.xxx;\r\n    //   x2 = x0 - i2  + 2.0 * C.xxx;\r\n    //   x3 = x0 - 1.0 + 3.0 * C.xxx;\r\n    vec3 x1 = x0 - i1 + C.xxx;\r\n    vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\r\n    vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\r\n\r\n    // Permutations\r\n    i = _czm_mod289(i);\r\n    vec4 p = _czm_permute( _czm_permute( _czm_permute(\r\n                i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\r\n              + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\r\n              + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\r\n\r\n    // Gradients: 7x7 points over a square, mapped onto an octahedron.\r\n    // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\r\n    float n_ = 0.142857142857; // 1.0/7.0\r\n    vec3  ns = n_ * D.wyz - D.xzx;\r\n\r\n    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\r\n\r\n    vec4 x_ = floor(j * ns.z);\r\n    vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\r\n\r\n    vec4 x = x_ *ns.x + ns.yyyy;\r\n    vec4 y = y_ *ns.x + ns.yyyy;\r\n    vec4 h = 1.0 - abs(x) - abs(y);\r\n\r\n    vec4 b0 = vec4( x.xy, y.xy );\r\n    vec4 b1 = vec4( x.zw, y.zw );\r\n\r\n    //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\r\n    //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\r\n    vec4 s0 = floor(b0)*2.0 + 1.0;\r\n    vec4 s1 = floor(b1)*2.0 + 1.0;\r\n    vec4 sh = -step(h, vec4(0.0));\r\n\r\n    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\r\n    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\r\n\r\n    vec3 p0 = vec3(a0.xy,h.x);\r\n    vec3 p1 = vec3(a0.zw,h.y);\r\n    vec3 p2 = vec3(a1.xy,h.z);\r\n    vec3 p3 = vec3(a1.zw,h.w);\r\n\r\n    //Normalise gradients\r\n    vec4 norm = _czm_taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\r\n    p0 *= norm.x;\r\n    p1 *= norm.y;\r\n    p2 *= norm.z;\r\n    p3 *= norm.w;\r\n\r\n    // Mix final noise value\r\n    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\r\n    m = m * m;\r\n    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\r\n                                dot(p2,x2), dot(p3,x3) ) );\r\n}\r\n\r\nfloat czm_snoise(vec4 v)\r\n{\r\n    const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\r\n                          0.276393202250021,  // 2 * G4\r\n                          0.414589803375032,  // 3 * G4\r\n                         -0.447213595499958); // -1 + 4 * G4\r\n\r\n    // (sqrt(5) - 1)/4 = F4, used once below\r\n    #define F4 0.309016994374947451\r\n\r\n    // First corner\r\n    vec4 i  = floor(v + dot(v, vec4(F4)) );\r\n    vec4 x0 = v -   i + dot(i, C.xxxx);\r\n\r\n    // Other corners\r\n\r\n    // Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\r\n    vec4 i0;\r\n    vec3 isX = step( x0.yzw, x0.xxx );\r\n    vec3 isYZ = step( x0.zww, x0.yyz );\r\n    //  i0.x = dot( isX, vec3( 1.0 ) );\r\n    i0.x = isX.x + isX.y + isX.z;\r\n    i0.yzw = 1.0 - isX;\r\n    //  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\r\n    i0.y += isYZ.x + isYZ.y;\r\n    i0.zw += 1.0 - isYZ.xy;\r\n    i0.z += isYZ.z;\r\n    i0.w += 1.0 - isYZ.z;\r\n\r\n    // i0 now contains the unique values 0,1,2,3 in each channel\r\n    vec4 i3 = clamp( i0, 0.0, 1.0 );\r\n    vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\r\n    vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\r\n\r\n    //  x0 = x0 - 0.0 + 0.0 * C.xxxx\r\n    //  x1 = x0 - i1  + 1.0 * C.xxxx\r\n    //  x2 = x0 - i2  + 2.0 * C.xxxx\r\n    //  x3 = x0 - i3  + 3.0 * C.xxxx\r\n    //  x4 = x0 - 1.0 + 4.0 * C.xxxx\r\n    vec4 x1 = x0 - i1 + C.xxxx;\r\n    vec4 x2 = x0 - i2 + C.yyyy;\r\n    vec4 x3 = x0 - i3 + C.zzzz;\r\n    vec4 x4 = x0 + C.wwww;\r\n\r\n    // Permutations\r\n    i = _czm_mod289(i);\r\n    float j0 = _czm_permute( _czm_permute( _czm_permute( _czm_permute(i.w) + i.z) + i.y) + i.x);\r\n    vec4 j1 = _czm_permute( _czm_permute( _czm_permute( _czm_permute (\r\n               i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\r\n             + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\r\n             + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\r\n             + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\r\n\r\n    // Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\r\n    // 7*7*6 = 294, which is close to the ring size 17*17 = 289.\r\n    vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\r\n\r\n    vec4 p0 = _czm_grad4(j0,   ip);\r\n    vec4 p1 = _czm_grad4(j1.x, ip);\r\n    vec4 p2 = _czm_grad4(j1.y, ip);\r\n    vec4 p3 = _czm_grad4(j1.z, ip);\r\n    vec4 p4 = _czm_grad4(j1.w, ip);\r\n\r\n    // Normalise gradients\r\n    vec4 norm = _czm_taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\r\n    p0 *= norm.x;\r\n    p1 *= norm.y;\r\n    p2 *= norm.z;\r\n    p3 *= norm.w;\r\n    p4 *= _czm_taylorInvSqrt(dot(p4,p4));\r\n\r\n    // Mix contributions from the five corners\r\n    vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\r\n    vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\r\n    m0 = m0 * m0;\r\n    m1 = m1 * m1;\r\n    return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\r\n                  + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\r\n}\r\n'},function(e,t){e.exports="uniform vec4 asphaltColor;\r\nuniform float bumpSize;\r\nuniform float roughness;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n\r\n  // From Stefan Gustavson's Procedural Textures in GLSL in OpenGL Insights\r\n  //Main cellular pattern\r\n  vec4 color = asphaltColor;\r\n  vec2 st = materialInput.st;\r\n  vec2 F = czm_cellular(st / bumpSize);\r\n  color.rgb -= (F.x / F.y) * 0.1;\r\n\r\n  //Extra bumps for roughness\r\n  float noise = czm_snoise(st / bumpSize);\r\n  noise = pow(noise, 5.0) * roughness;\r\n  color.rgb += noise;\r\n\r\n  material.diffuse = color.rgb;\r\n  material.alpha = color.a;\r\n\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 lightColor;\r\nuniform vec4 darkColor;\r\nuniform float frequency;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n\r\n  // From Stefan Gustavson's Procedural Textures in GLSL in OpenGL Insights\r\n  vec2 F = czm_cellular(materialInput.st * frequency);\r\n  float t = 1.0 - F.x * F.x;\r\n\r\n  vec4 color = mix(lightColor, darkColor, t);\r\n  material.diffuse = color.rgb;\r\n  material.alpha = color.a;\r\n\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 brickColor;\r\nuniform vec4 mortarColor;\r\nuniform vec2 brickSize;\r\nuniform vec2 brickPct;\r\nuniform float brickRoughness;\r\nuniform float mortarRoughness;\r\n\r\n#define Integral(x, p) ((floor(x) * p) + max(fract(x) - (1.0 - p), 0.0))\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n\r\n  // From OpenGL Shading Language (3rd edition) pg. 194, 501\r\n  vec2 st = materialInput.st;\r\n  vec2 position = st / brickSize;\r\n  if(fract(position.y * 0.5) > 0.5) {\r\n      position.x += 0.5;\r\n  }\r\n\r\n  //calculate whether to use brick or mortar (does AA)\r\n  vec2 filterWidth = vec2(0.02);\r\n  vec2 useBrick = (Integral(position + filterWidth, brickPct) -\r\n                      Integral(position, brickPct)) / filterWidth;\r\n  float useBrickFinal = useBrick.x * useBrick.y;\r\n  vec4 color = mix(mortarColor, brickColor, useBrickFinal);\r\n\r\n  //Apply noise to brick\r\n  vec2 brickScaled = vec2(st.x / 0.1, st.y / 0.006);\r\n  float brickNoise = abs(czm_snoise(brickScaled) * brickRoughness / 5.0);\r\n  color.rg += brickNoise * useBrickFinal;\r\n\r\n  //Apply noise to mortar\r\n  vec2 mortarScaled = st / 0.005;\r\n  float mortarNoise = max(czm_snoise(mortarScaled) * mortarRoughness, 0.0);\r\n  color.rgb += mortarNoise * (1.0 - useBrickFinal);\r\n\r\n  material.diffuse = color.rgb;\r\n  material.alpha = color.a;\r\n\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 cementColor;\r\nuniform float grainScale;\r\nuniform float roughness;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n\r\n  float noise = czm_snoise(materialInput.st / grainScale);\r\n  noise = pow(noise, 5.0) * roughness;\r\n\r\n  vec4 color = cementColor;\r\n  color.rgb += noise;\r\n\r\n  material.diffuse = color.rgb;\r\n  material.alpha = color.a;\r\n\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 color;\r\nuniform float time;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  float alpha = 1.0;\r\n  if (time != 1.0)\r\n  {\r\n      float t = 0.5 + (0.5 * czm_snoise(materialInput.str / (1.0 / 10.0)));   // Scale [-1, 1] to [0, 1]\r\n\r\n      if (t > time)\r\n      {\r\n          alpha = 0.0;\r\n      }\r\n  }\r\n\r\n  material.diffuse = color.rgb;\r\n  material.alpha = color.a * alpha;\r\n\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 lightColor;\r\nuniform vec4 darkColor;\r\nuniform float frequency;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n\r\n  // From Stefan Gustavson's Procedural Textures in GLSL in OpenGL Insights\r\n  vec2 F = czm_cellular(materialInput.st * frequency);\r\n  float t = 0.1 + (F.y - F.x);\r\n\r\n  vec4 color = mix(lightColor, darkColor, t);\r\n  material.diffuse = color.rgb;\r\n  material.alpha = color.a;\r\n\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="czm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n\r\n  vec3 normalWC = normalize(czm_inverseViewRotation * material.normal);\r\n  vec3 positionWC = normalize(czm_inverseViewRotation * materialInput.positionToEyeEC);\r\n  float cosAngIncidence = max(dot(normalWC, positionWC), 0.0);\r\n\r\n  material.diffuse = mix(reflection.diffuse, refraction.diffuse, cosAngIncidence);\r\n\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 grassColor;\r\nuniform vec4 dirtColor;\r\nuniform float patchiness;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n\r\n  vec2 st = materialInput.st;\r\n  float noise1 = (czm_snoise(st * patchiness * 1.0)) * 1.0;\r\n  float noise2 = (czm_snoise(st * patchiness * 2.0)) * 0.5;\r\n  float noise3 = (czm_snoise(st * patchiness * 4.0)) * 0.25;\r\n  float noise = sin(noise1 + noise2 + noise3) * 0.1;\r\n\r\n  vec4 color = mix(grassColor, dirtColor, noise);\r\n\r\n  //Make thatch patterns\r\n  float verticalNoise = czm_snoise(vec2(st.x * 100.0, st.y * 20.0)) * 0.02;\r\n  float horizontalNoise = czm_snoise(vec2(st.x * 20.0, st.y * 100.0)) * 0.02;\r\n  float stripeNoise = min(verticalNoise, horizontalNoise);\r\n\r\n  color.rgb += stripeNoise;\r\n\r\n  material.diffuse = color.rgb;\r\n  material.alpha = color.a;\r\n\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform samplerCube cubeMap;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n\r\n  vec3 normalWC = normalize(czm_inverseViewRotation * material.normal);\r\n  vec3 positionWC = normalize(czm_inverseViewRotation * materialInput.positionToEyeEC);\r\n  vec3 reflectedWC = reflect(positionWC, normalWC);\r\n  material.diffuse = textureCube(cubeMap, reflectedWC).channels;\r\n\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform samplerCube cubeMap;\r\nuniform float indexOfRefractionRatio;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n\r\n  vec3 normalWC = normalize(czm_inverseViewRotation * material.normal);\r\n  vec3 positionWC = normalize(czm_inverseViewRotation * materialInput.positionToEyeEC);\r\n  vec3 refractedWC = refract(positionWC, -normalWC, indexOfRefractionRatio);\r\n  material.diffuse = textureCube(cubeMap, refractedWC).channels;\r\n\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 lightColor;\r\nuniform vec4 darkColor;\r\nuniform float frequency;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n\r\n  vec3 scaled = materialInput.str * frequency;\r\n  float t = abs(czm_snoise(scaled));\r\n\r\n  vec4 color = mix(lightColor, darkColor, t);\r\n  material.diffuse = color.rgb;\r\n  material.alpha = color.a;\r\n\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 lightWoodColor;\r\nuniform vec4 darkWoodColor;\r\nuniform float ringFrequency;\r\nuniform vec2 noiseScale;\r\nuniform float grainFrequency;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n\r\n  //Based on wood shader from OpenGL Shading Language (3rd edition) pg. 455\r\n  vec2 st = materialInput.st;\r\n\r\n  vec2 noisevec;\r\n  noisevec.x = czm_snoise(st * noiseScale.x);\r\n  noisevec.y = czm_snoise(st * noiseScale.y);\r\n\r\n  vec2 location = st + noisevec;\r\n  float dist = sqrt(location.x * location.x + location.y * location.y);\r\n  dist *= ringFrequency;\r\n\r\n  float r = fract(dist + noisevec[0] + noisevec[1]) * 2.0;\r\n  if(r > 1.0)\r\n      r = 2.0 - r;\r\n\r\n  vec4 color = mix(lightWoodColor, darkWoodColor, r);\r\n\r\n  //streaks\r\n  r = abs(czm_snoise(vec2(st.x * grainFrequency, st.y * grainFrequency * 0.02))) * 0.2;\r\n  color.rgb += lightWoodColor.rgb * r;\r\n\r\n  material.diffuse = color.rgb;\r\n  material.alpha = color.a;\r\n\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform bool axis;\r\nuniform vec2 repeat;\r\nuniform float time;\r\nuniform sampler2D image;\r\nuniform vec4 color;\r\nczm_material czm_getMaterial(czm_materialInput materialInput) {\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = repeat * materialInput.st;\r\n  float dis =\r\n      sin(radians(mod(czm_frameNumber, 30.0 * time / 1.0) * (1.0 / time))) *\r\n      2.0;\r\n  vec4 colorImage = texture2D(image, vec2(fract((axis ? st.t : st.s) - dis),\r\n                                          fract(axis ? st.s : st.t)));\r\n  if (color.a == 0.0) {\r\n    material.alpha = colorImage.a;\r\n    material.diffuse = colorImage.rgb;\r\n  } else {\r\n    material.alpha = colorImage.a * color.a;\r\n    material.diffuse = max(color.rgb * material.alpha * 3.0, color.rgb);\r\n  }\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 color;\r\nuniform float speed;\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st ;\r\n  vec2 center = vec2(0.5);\r\n  float time = fract(czm_frameNumber * speed / 1000.0);\r\n  float r = 0.5 + sin(time) / 3.0;\r\n  float dis = distance(st, center);\r\n  float a = 0.0;\r\n  if(dis < r) {\r\n    a = 1.0 - smoothstep(0.0, r, dis);\r\n  }\r\n  material.alpha = pow(a,10.0) ;\r\n  material.diffuse = color.rgb * a * 3.0;\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 color;\r\nuniform float speed;\r\n\r\nvec3 circlePing(float r, float innerTail,  float frontierBorder, float timeResetSeconds,  float radarPingSpeed,  float fadeDistance){\r\n  float t = fract(czm_frameNumber * speed / 1000.0);\r\n  float time = mod(t, timeResetSeconds) * radarPingSpeed;\r\n  float circle;\r\n  circle += smoothstep(time - innerTail, time, r) * smoothstep(time + frontierBorder,time, r);\r\n  circle *= smoothstep(fadeDistance, 0.0, r);\r\n  return vec3(circle);\r\n}\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st * 2.0  - 1.0 ;\r\n  vec2 center = vec2(0.);\r\n  float time = fract(czm_frameNumber * speed / 1000.0);\r\n  vec3 flagColor;\r\n  float r = length(st - center) / 4.;\r\n  flagColor += circlePing(r, 0.25, 0.025, 4.0, 0.3, 1.0) * color.rgb;\r\n  material.alpha = length(flagColor);\r\n  material.diffuse = flagColor.rgb;\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 color;\r\nuniform float speed;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  material.diffuse = 1.5 * color.rgb;\r\n  vec2 st = materialInput.st;\r\n  float dis = distance(st, vec2(0.5, 0.5));\r\n  float per = fract(czm_frameNumber * speed / 1000.0);\r\n  if(dis > per * 0.5){\r\n    material.alpha = color.a;\r\n  }else {\r\n    discard;\r\n  }\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 color;\r\nuniform float speed;\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st * 2.0 - 1.0;\r\n  float time = fract(czm_frameNumber * speed / 1000.0);\r\n  float r = length(st) * 1.2;\r\n  float a = pow(r, 2.0);\r\n  float b = sin(r * 0.8 - 1.6);\r\n  float c = sin(r - 0.010);\r\n  float s = sin(a - time * 2.0 + b) * c;\r\n  float d = abs(1.0 / (s * 10.8)) - 0.01;\r\n  material.alpha = pow(d,10.0) ;\r\n  material.diffuse = color.rgb * d;\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 color;\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  vec2 center = st - vec2(0.5,0.5);\r\n  float length = length(center) / 0.5;\r\n  float time = 1. - abs(czm_frameNumber / 360. - 0.5);\r\n  float param = 1. - step(length, 0.6); //大于0.6模糊，rate = 0.6\r\n  float scale = param * length; // 0.6< length 返回0，反之返回1.\r\n  float alpha = param * (1.0 - abs(scale - 0.8) / 0.2); // 0.8 < length 返回0，反之返回1.\r\n  float param1 = step(length, 0.7); //小于0.5模糊\r\n  float scale1 = param1 * length; // 0.6< length 返回0，反之返回1.\r\n  alpha += param1 * (1.0 - abs(scale1 - 0.35) / 0.35); // 0.8 < length 返回0，反之返回1.\r\n  material.diffuse = color.rgb * vec3(color.a);\r\n  material.alpha = pow(alpha, 4.0);\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 color;\r\nuniform sampler2D image;\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  vec2 center = st - vec2(0.5,0.5);\r\n  float time = -czm_frameNumber * 3.1415926 / 180.;\r\n  float sin_t = sin(time);\r\n  float cos_t = cos(time);\r\n  vec2 center_rotate = vec2(center.s * cos_t - center.t * sin_t + 0.5,center.s * sin_t + center.t * cos_t + 0.5);\r\n  vec4 colorImage = texture2D(image,center_rotate);\r\n  vec3 temp = colorImage.rgb * color.rgb;\r\n  temp *= color.a;\r\n  material.diffuse = temp;\r\n  float length = 2. - length(center) / 0.5;\r\n  material.alpha = colorImage.a * pow(length, 0.5);\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 color;\r\nuniform float speed;\r\n\r\nfloat circle(vec2 uv, float r, float blur) {\r\n  float d = length(uv) * 2.0;\r\n  float c = smoothstep(r+blur, r, d);\r\n  return c;\r\n}\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput)\r\n{\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st - .5;\r\n  material.diffuse = color.rgb;\r\n  material.emission = vec3(0);\r\n  float t =fract(czm_frameNumber * speed / 1000.0);\r\n  float s = 0.3;\r\n  float radius1 = smoothstep(.0, s, t) * 0.5;\r\n  float alpha1 = circle(st, radius1, 0.01) * circle(st, radius1, -0.01);\r\n  float alpha2 = circle(st, radius1, 0.01 - radius1) * circle(st, radius1, 0.01);\r\n  float radius2 = 0.5 + smoothstep(s, 1.0, t) * 0.5;\r\n  float alpha3 = circle(st, radius1, radius2 + 0.01 - radius1) * circle(st, radius1, -0.01);\r\n  material.alpha = smoothstep(1.0, s, t) * (alpha1 + alpha2*0.1 + alpha3*0.1);\r\n  material.alpha *= color.a;\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 color;\r\nuniform float speed;\r\n\r\n#define PI 3.14159265359\r\n\r\nvec2 rotate2D (vec2 _st, float _angle) {\r\n  _st =  mat2(cos(_angle),-sin(_angle),  sin(_angle),cos(_angle)) * _st;\r\n  return _st;\r\n}\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st * 2.0 - 1.0;\r\n  st *= 1.6;\r\n  float time = czm_frameNumber * speed / 1000.0;\r\n  float r = length(st);\r\n  float w = .3;\r\n  st = rotate2D(st,(r*PI*6.-time*2.));\r\n  float a = smoothstep(-w,.2,st.x) * smoothstep(w,.2,st.x);\r\n  float b = abs(1./(sin(pow(r,2.)*2.-time*1.3)*6.))*.4;\r\n  material.alpha = a * b ;\r\n  material.diffuse = color.rgb * a * b  * 3.0;\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 color;\r\nuniform float speed;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st  * 2.0 - 1.0;\r\n  float time =czm_frameNumber * speed / 1000.0;\r\n  float radius = length(st);\r\n  float angle = atan(st.y/st.x);\r\n  float radius1 = sin(time * 2.0) + sin(40.0*angle+time)*0.01;\r\n  float radius2 = cos(time * 3.0);\r\n  vec3 fragColor = 0.2 + 0.5 * cos( time + color.rgb + vec3(0,2,4));\r\n  float inten1 = 1.0 - sqrt(abs(radius1 - radius));\r\n  float inten2 = 1.0 - sqrt(abs(radius2 - radius));\r\n  material.alpha = pow(inten1 + inten2 , 5.0) ;\r\n  material.diffuse = fragColor * (inten1 + inten2);\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 color;\r\nuniform float speed;\r\nuniform float count;\r\nuniform float gradient;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput)\r\n{\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  material.diffuse = 1.5 * color.rgb;\r\n  vec2 st = materialInput.st;\r\n  float dis = distance(st, vec2(0.5, 0.5));\r\n  float per = fract(czm_frameNumber * speed / 1000.0);\r\n  if(count == 1.0){\r\n    if(dis > per * 0.5){\r\n      discard;\r\n    }else {\r\n      material.alpha = color.a  * dis / per / 2.0;\r\n    }\r\n  } else {\r\n    vec3 str = materialInput.str;\r\n    if(abs(str.z)  > 0.001){\r\n      discard;\r\n    }\r\n    if(dis > 0.5){\r\n      discard;\r\n    } else {\r\n      float perDis = 0.5 / count;\r\n      float disNum;\r\n      float bl = 0.0;\r\n      for(int i = 0; i <= 999; i++){\r\n        if(float(i) <= count){\r\n          disNum = perDis * float(i) - dis + per / count;\r\n          if(disNum > 0.0){\r\n            if(disNum < perDis){\r\n              bl = 1.0 - disNum / perDis;\r\n            }\r\n            else if(disNum - perDis < perDis){\r\n              bl = 1.0 - abs(1.0 - disNum / perDis);\r\n            }\r\n            material.alpha = pow(bl,(1.0 + 10.0 * (1.0 - gradient)));\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return material;\r\n}\r\n\r\n"},function(e,t){e.exports="uniform vec4 color;\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  float powerRatio = 1. / (fract(czm_frameNumber / 30.0) +  1.) ;\r\n  float alpha = pow(1. - st.t,powerRatio);\r\n  vec4 temp = vec4(color.rgb, alpha * color.a);\r\n  material.diffuse = temp.rgb;\r\n  material.alpha = temp.a;\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 color;\r\nuniform sampler2D image;\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  float time = fract(czm_frameNumber / 90.) ;\r\n  vec2 new_st = fract(st- vec2(time,time));\r\n  vec4 colorImage = texture2D(image, new_st);\r\n  vec3 diffuse = colorImage.rgb;\r\n  float alpha = colorImage.a;\r\n  diffuse *= color.rgb;\r\n  alpha *= color.a;\r\n  material.diffuse = diffuse;\r\n  material.alpha = alpha * pow(1. - st.t,color.a);\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 color;\r\nuniform float speed;\r\n\r\n#define pi 3.1415926535\r\n#define PI2RAD 0.01745329252\r\n#define TWO_PI (2. * PI)\r\n\r\nfloat rands(float p){\r\n  return fract(sin(p) * 10000.0);\r\n}\r\n\r\nfloat noise(vec2 p){\r\n  float time = fract( czm_frameNumber * speed / 1000.0);\r\n  float t = time / 20000.0;\r\n  if(t > 1.0) t -= floor(t);\r\n  return rands(p.x * 14. + p.y * sin(t) * 0.5);\r\n}\r\n\r\nvec2 sw(vec2 p){\r\n  return vec2(floor(p.x), floor(p.y));\r\n}\r\n\r\nvec2 se(vec2 p){\r\n  return vec2(ceil(p.x), floor(p.y));\r\n}\r\n\r\nvec2 nw(vec2 p){\r\n  return vec2(floor(p.x), ceil(p.y));\r\n}\r\n\r\nvec2 ne(vec2 p){\r\n  return vec2(ceil(p.x), ceil(p.y));\r\n}\r\n\r\nfloat smoothNoise(vec2 p){\r\n  vec2 inter = smoothstep(0.0, 1.0, fract(p));\r\n  float s = mix(noise(sw(p)), noise(se(p)), inter.x);\r\n  float n = mix(noise(nw(p)), noise(ne(p)), inter.x);\r\n  return mix(s, n, inter.y);\r\n}\r\n\r\nfloat fbm(vec2 p){\r\n  float z = 2.0;\r\n  float rz = 0.0;\r\n  vec2 bp = p;\r\n  for(float i = 1.0; i < 6.0; i++){\r\n    rz += abs((smoothNoise(p) - 0.5)* 2.0) / z;\r\n    z *= 2.0;\r\n    p *= 2.0;\r\n  }\r\n  return rz;\r\n}\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput)\r\n{\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  vec2 st2 = materialInput.st;\r\n  float time = fract( czm_frameNumber * speed / 1000.0);\r\n  if (st.t < 0.5) {\r\n    discard;\r\n  }\r\n  st *= 4.;\r\n  float rz = fbm(st);\r\n  st /= exp(mod( time * 2.0, pi));\r\n  rz *= pow(15., 0.9);\r\n  vec4 temp = vec4(0);\r\n  temp = mix( color / rz, vec4(color.rgb, 0.1), 0.2);\r\n  if (st2.s < 0.05) {\r\n    temp = mix(vec4(color.rgb, 0.1), temp, st2.s / 0.05);\r\n  }\r\n  if (st2.s > 0.95){\r\n    temp = mix(temp, vec4(color.rgb, 0.1), (st2.s - 0.95) / 0.05);\r\n  }\r\n  material.diffuse = temp.rgb;\r\n  material.alpha = temp.a * 2.0;\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 color;\r\nuniform float speed;\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  float time = fract(czm_frameNumber * speed / 1000.0);\r\n  float alpha = abs(smoothstep(0.5,1.,fract( -st.t - time)));\r\n  alpha += .1;\r\n  material.alpha = alpha;\r\n  material.diffuse = color.rgb;\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 color;\r\nuniform float speed;\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  float time = fract( czm_frameNumber  *  speed / 1000.0);\r\n  vec2 st = materialInput.st;\r\n  float scalar = smoothstep(0.0,1.0,time);\r\n  material.diffuse = color.rgb * scalar;\r\n  material.alpha = color.a * scalar ;\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 color;\r\nuniform float speed;\r\nuniform float percent;\r\nuniform float gradient;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput) {\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  float t = fract(czm_frameNumber * speed / 1000.0);\r\n  t *= (1.0 + percent);\r\n  float alpha = smoothstep(t - percent, t, st.s) * step(-t, -st.s);\r\n  alpha += gradient;\r\n  material.diffuse = color.rgb;\r\n  material.alpha = alpha;\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform sampler2D image;\r\nuniform sampler2D image2;\r\nuniform float speed;\r\nuniform vec4 color;\r\nuniform vec4 color2;\r\nuniform float time;\r\nuniform bool hasImage2;\r\nuniform bool axisY;\r\nuniform vec2 repeat;\r\nczm_material czm_getMaterial(czm_materialInput materialInput) {\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = repeat * materialInput.st;\r\n\r\n  float currTime;\r\n  if (time < 0.0) {\r\n    currTime = speed * czm_frameNumber / 1000.0;\r\n  } else {\r\n    currTime = time;\r\n  }\r\n\r\n  vec4 colorImage =\r\n      texture2D(image, vec2(fract((axisY ? st.t : st.s) - currTime), st.t));\r\n  if (color.a == 0.0) {\r\n    if (colorImage.rgb == vec3(1.0)) {\r\n      discard;\r\n    }\r\n    material.alpha = colorImage.a;\r\n    material.diffuse = colorImage.rgb;\r\n  } else {\r\n    material.alpha = colorImage.a * color.a;\r\n    material.diffuse = max(color.rgb * material.alpha * 3.0, color.rgb);\r\n  }\r\n\r\n  if (hasImage2) {\r\n    vec4 colorBG = texture2D(image2, materialInput.st);\r\n    if (colorBG.a > 0.5) {\r\n      material.diffuse = color2.rgb;\r\n    }\r\n  }\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform sampler2D image;\r\nuniform float speed;\r\nuniform vec4 color;\r\nuniform vec2 repeat;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n   czm_material material = czm_getDefaultMaterial(materialInput);\r\n   vec2 st = repeat * materialInput.st;\r\n   float time = fract(czm_frameNumber * speed / 1000.0);\r\n   vec4 colorImage = texture2D(image, vec2(fract(st.s - time), st.t));\r\n   if(color.a == 0.0){\r\n    material.alpha = colorImage.a;\r\n    material.diffuse = colorImage.rgb;\r\n   }else{\r\n    material.alpha = colorImage.a * color.a;\r\n    material.diffuse = max(color.rgb * material.alpha * 3.0, color.rgb);\r\n   }\r\n   return material;\r\n}\r\n"},function(e,t){e.exports="uniform sampler2D image;\r\nuniform vec4 color;\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  vec4 colorImage = texture2D(image,st);\r\n  vec3 fragColor = color.rgb;\r\n  material.alpha = colorImage.a * color.a * 3.;\r\n  material.diffuse = max(fragColor.rgb  +  colorImage.rgb , fragColor.rgb);\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform sampler2D image;\r\nuniform vec4 color;\r\nuniform float speed;\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  float time = fract(czm_frameNumber * speed / 1000.0);\r\n  vec4 colorImage = texture2D(image,st);\r\n  vec3 fragColor = color.rgb;\r\n  if(st.t > 0.45 && st.t < 0.55 ) {\r\n    fragColor = vec3(1.0);\r\n  }\r\n  if(color.a == 0.0){\r\n    material.alpha = colorImage.a * 1.5 * fract(st.s - time);\r\n    material.diffuse = colorImage.rgb;\r\n  }else{\r\n    material.alpha = colorImage.a * color.a * 1.5 * smoothstep(.0,1., fract(st.s - time));\r\n    material.diffuse = max(fragColor.rgb * material.alpha , fragColor.rgb);\r\n  }\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 color;\r\nuniform float speed;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput) {\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  float time = fract(czm_frameNumber * speed / 1000.0);\r\n  material.diffuse = color.rgb;\r\n  material.alpha = color.a * fract(st.s - time);\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="// uniform float time;\r\n// uniform vec4 color;\r\n// czm_material czm_getMaterial(czm_materialInput materialInput) {\r\n//   czm_material material = czm_getDefaultMaterial(materialInput);\r\n//   material.diffuse = color.rgb;\r\n//   vec2 st = materialInput.st;\r\n//   float dis =\r\n//       sin(radians(mod(czm_frameNumber, 30.0 * time / 1.0) * (1.0 / time))) *\r\n//       2.0;\r\n//   material.alpha = smoothstep(dis - 0.03, dis, st.s) * step(st.s, dis);\r\n//   material.alpha += 0.1;\r\n//   return material;\r\n// }\r\n\r\nuniform vec4 color;\r\nuniform vec4 bgColor;\r\nuniform float speed;\r\nuniform float startTime;\r\nuniform float bidirectional;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput)\r\n{\r\n    czm_material material = czm_getDefaultMaterial(materialInput);\r\n    vec2 st = materialInput.st;\r\n    float t = fract(startTime + czm_frameNumber * speed / 1000.0);\r\n\r\n    t *= 1.03;\r\n    float alpha0 = smoothstep(t - 0.03, t, st.s) * step(st.s, t);\r\n    float mt = 1. - t;\r\n    float alpha1 = smoothstep(mt + 0.03, mt, st.s) * step(mt, st.s);\r\n\r\n    float a0 = step(abs(bidirectional - 0.0) - 0.001, 0.);\r\n    float a1 = step(abs(bidirectional - 1.0) - 0.001, 0.);\r\n    float db = step(abs(bidirectional - 2.0) - 0.001, 0.);\r\n    float alpha = alpha0 * (a0 + db) + alpha1 * (a1 + db);\r\n    alpha = clamp(alpha, 0., 1.);\r\n\r\n    material.diffuse = color.rgb * alpha + bgColor.rgb * (1. - alpha);\r\n    material.alpha = color.a * alpha + bgColor.a * (1. - alpha);\r\n\r\n    // if (useImageAndRepeat.x != 0.) {\r\n    //     float repeat = useImageAndRepeat.y;\r\n    //     vec4 marsImageColor = texture2D(image, fract(vec2(fract((st.s-t)*repeat), st.t)));\r\n    //     material.diffuse = marsImageColor.rgb;\r\n    //     material.alpha = marsImageColor.a;\r\n    // }\r\n\r\n    return material;\r\n}"},function(e,t){e.exports="uniform vec4 color;\r\nuniform float speed;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st * 2.0 - 1.0;\r\n  float t = czm_frameNumber * speed / 1000.0 ;\r\n  vec3 col = vec3(0.0);\r\n  vec2 p = vec2(sin(t), cos(t));\r\n  float d = length(st - dot(p, st) * p);\r\n  if (dot(st, p) < 0.) {\r\n    d = length(st);\r\n  }\r\n\r\n  col = .006 / d * color.rgb;\r\n\r\n  if(distance(st,vec2(0)) >  0.99 ){\r\n    col =color.rgb;\r\n  }\r\n\r\n  material.alpha  = pow(length(col),2.0);\r\n  material.diffuse = col * 3.0 ;\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 color;\r\nuniform float speed;\r\n\r\n#define PI 3.14159265359\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  vec2 scrPt = st * 2.0 - 1.0;\r\n  float time = czm_frameNumber * speed / 1000.0 ;\r\n  vec3 col = vec3(0.0);\r\n  mat2 rot;\r\n  float theta = -time * 1.0 * PI - 2.2;\r\n  float cosTheta, sinTheta;\r\n  cosTheta = cos(theta);\r\n  sinTheta = sin(theta);\r\n  rot[0][0] = cosTheta;\r\n  rot[0][1] = -sinTheta;\r\n  rot[1][0] = sinTheta;\r\n  rot[1][1] = cosTheta;\r\n  vec2 scrPtRot = rot * scrPt;\r\n  float angle = 1.0 - (atan(scrPtRot.y, scrPtRot.x) / 6.2831 + 0.5);\r\n  float falloff = 1.0 - length(scrPtRot);\r\n  float ringSpacing = 0.23;\r\n  if(mod(length(scrPtRot), ringSpacing) < 0.015 && length(scrPtRot) / ringSpacing < 5.0) {\r\n    col += vec3(0, 0.5, 0);\r\n  }\r\n  col += vec3(0, 0.8, 0) * step(mod(length(scrPtRot), ringSpacing), 0.01) * step(length(scrPtRot), 1.0);\r\n  material.alpha =pow(length(col + vec3(.5)),5.0);\r\n  material.diffuse =  (0.5 +  pow(angle, 2.0) * falloff ) *   color.rgb    ;\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 color;\r\nuniform float speed;\r\n\r\n#define PI 3.14159265359\r\n\r\nfloat rand(vec2 co){\r\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\r\n}\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  vec2 pos = st - vec2(0.5);\r\n  float time = czm_frameNumber * speed / 1000.0 ;\r\n  float r = length(pos);\r\n  float t = atan(pos.y, pos.x) - time * 2.5;\r\n  float a = (atan(sin(t), cos(t)) + PI)/(2.0*PI);\r\n  float ta = 0.5;\r\n  float v = smoothstep(ta-0.05,ta+0.05,a) * smoothstep(ta+0.05,ta-0.05,a);\r\n  vec3 flagColor = color.rgb * v;\r\n  float blink = pow(sin(time*1.5)*0.5+0.5, 0.8);\r\n  flagColor = color.rgb *  pow(a, 8.0*(.2+blink))*(sin(r*500.0)*.5+.5) ;\r\n  flagColor = flagColor * pow(r, 0.4);\r\n  material.alpha = length(flagColor) * 1.3;\r\n  material.diffuse = flagColor * 3.0;\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform vec4 color;\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  material.diffuse = color.rgb * 2.0;\r\n  material.alpha = color.a * (1.0-fract(st.t)) * 0.8;\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform sampler2D image;\r\nuniform vec4 color;\r\nuniform float speed;\r\nuniform vec2 repeat;\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st * repeat;\r\n  float time = fract(czm_frameNumber * speed / 1000.0);\r\n  vec4 colorImage = texture2D(image, vec2(fract(st.s - time), st.t));\r\n  material.alpha =  colorImage.a * color.a ;\r\n  material.diffuse = colorImage.rgb * color.rgb * 3.0 ;\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform sampler2D image;\r\nuniform float speed;\r\nuniform vec4 color;\r\nuniform vec2 repeat;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  float perDis = 1.0 / repeat.y / 3.0  ;\r\n  vec2 st = materialInput.st * repeat;\r\n  float time = fract(czm_frameNumber * speed / 1000.0);\r\n  vec4 colorImage = texture2D(image, vec2(st.s, fract(st.t - time)));\r\n  material.alpha =  colorImage.a * smoothstep(.2 ,1. ,distance(st.t * perDis ,1. + perDis ));\r\n  material.diffuse = max(color.rgb * material.alpha * 1.5, color.rgb);\r\n  material.emission = max(color.rgb * material.alpha * 1.5, color.rgb);\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform sampler2D image;\r\nuniform float speed;\r\nuniform vec4 color;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput) {\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  float time = fract(czm_frameNumber * speed / 1000.0);\r\n  vec4 colorImage = texture2D(image, vec2(fract(st.t - time), st.t));\r\n  if (color.a == 0.0) {\r\n    material.alpha = colorImage.a;\r\n    material.diffuse = colorImage.rgb;\r\n  } else {\r\n    material.alpha = colorImage.a * color.a;\r\n    material.diffuse = max(color.rgb * material.alpha * 3.0, color.rgb);\r\n  }\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform sampler2D image;\r\nuniform float speed;\r\nuniform vec4 color;\r\nuniform float count;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput) {\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  float perDis = 1.0 / count / 3.0;\r\n  vec2 st = materialInput.st * vec2(1.0, count);\r\n  float time = fract(czm_frameNumber * speed / 1000.0);\r\n  vec4 colorImage = texture2D(image, vec2(fract(st.t - time), st.t));\r\n  material.alpha =\r\n      colorImage.a * smoothstep(.2, 1., distance(st.t * perDis, 1. + perDis));\r\n  material.diffuse = max(color.rgb * material.alpha * 1.5, color.rgb);\r\n  material.emission = max(color.rgb * material.alpha * 1.5, color.rgb);\r\n  return material;\r\n}\r\n"},function(e,t){e.exports="uniform sampler2D image;\r\nuniform float opacity;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  vec4 colorImage = texture2D(image,st);\r\n  if(colorImage.rgb == vec3(1.0)){\r\n    discard;\r\n  }\r\n  material.diffuse = colorImage.rgb;\r\n  material.alpha = colorImage.a * opacity;\r\n  return material;\r\n}"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVwAAABACAYAAABWdc94AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGx2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgMTE2LjE2NDY1NSwgMjAyMS8wMS8yNi0xNTo0MToyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjIgKE1hY2ludG9zaCkiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTAyLTIzVDE3OjE0OjMyKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIxLTAyLTI0VDE0OjIwOjE2KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0wMi0yNFQxNDoyMDoxNiswODowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1NzQzY2I0NC0zMzk3LTQ5OTAtYjg4OC0yNDFlNmExYmQyYWYiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo5YWYxZDY1MC1jNWRlLTVmNDgtYWYzNi1hZDE4ZWRkN2QzYTAiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpiMmZjZmU2Zi1hZWQwLTRjMWQtYjZmOS1lNjAwMjJiNmEwOGUiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmIyZmNmZTZmLWFlZDAtNGMxZC1iNmY5LWU2MDAyMmI2YTA4ZSIgc3RFdnQ6d2hlbj0iMjAyMS0wMi0yM1QxNzoxNDozMiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjIgKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjNjM2JjM2I5LTkwNDEtNDk1ZS04MTc5LTdkZjc3NDIwZDczOSIgc3RFdnQ6d2hlbj0iMjAyMS0wMi0yM1QxNzoxNDozMiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjIgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjU3NDNjYjQ0LTMzOTctNDk5MC1iODg4LTI0MWU2YTFiZDJhZiIgc3RFdnQ6d2hlbj0iMjAyMS0wMi0yNFQxNDoyMDoxNiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjIgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+eAiLkwAAAQZJREFUeJzt3LERwDAMxDAl5/1XdqYIXRiYQBULFf/svQeA/72nDwC4heACRAQXICK4ABHBBYgILkBEcAEiggsQEVyAiOACRAQXICK4ABHBBYgILkBkzYx9RoDAmpnn9BEAN/BSAIgILkBEcAEiggsQEVyAiOACRAQXICK4ABHBBYgILkBEcAEiggsQEVyAiOACRAQXIGKAHCBigBwg4qUAEBFcgIjgAkQEFyAiuAARwQWICC5ARHABIoILEBFcgIjgAkQEFyAiuAARwQWI2MMFiNjDBYh4KQBEBBcgIrgAEcEFiAguQERwASKCCxARXICI4AJEBBcgIrgAEcEFiAguQERwASIfRmAGiWTgoMYAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAOhlWElmTU0AKgAAAAgABgESAAMAAAABAAEAAAEaAAUAAAABAAAAVgEbAAUAAAABAAAAXgExAAIAAAAkAAAAZgEyAAIAAAAUAAAAiodpAAQAAAABAAAAngAAAAAAAABIAAAAAQAAAEgAAAABQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkAMjAxODoxMDoyNiAxNTozMDozNAAABJAEAAIAAAAUAAAA1KABAAMAAAABAAEAAKACAAQAAAABAAAAQKADAAQAAAABAAAAQAAAAAAyMDE4OjEwOjI2IDE1OjI0OjI1ALUCxicAAAAJcEhZcwAACxMAAAsTAQCanBgAAAdgaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgICAgICAgICB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx4bXBNTTpJbnN0YW5jZUlEPnhtcC5paWQ6MjgyZGYxNWEtYzg5MC00ODUzLWJlZDQtOWEyZjQxMmY0NjljPC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8eG1wTU06RG9jdW1lbnRJRD54bXAuZGlkOjI4MmRmMTVhLWM4OTAtNDg1My1iZWQ0LTlhMmY0MTJmNDY5YzwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjI4MmRmMTVhLWM4OTAtNDg1My1iZWQ0LTlhMmY0MTJmNDY5YzwveG1wTU06T3JpZ2luYWxEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06SGlzdG9yeT4KICAgICAgICAgICAgPHJkZjpTZXE+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxOC0xMC0yNlQxNToyNDoyNSswODowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDoyODJkZjE1YS1jODkwLTQ4NTMtYmVkNC05YTJmNDEyZjQ2OWM8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+Y3JlYXRlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgPC9yZGY6U2VxPgogICAgICAgICA8L3htcE1NOkhpc3Rvcnk+CiAgICAgICAgIDx4bXA6TW9kaWZ5RGF0ZT4yMDE4LTEwLTI2VDE1OjMwOjM0KzA4OjAwPC94bXA6TW9kaWZ5RGF0ZT4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKTwveG1wOkNyZWF0b3JUb29sPgog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"},function(e,t,r){var n=r(0);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports="data:image/png;base64,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"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAACXBIWXMAAAsSAAALEgHS3X78AAACCklEQVQ4jWP8//8/Ax5gwMDAIACVfgDF2AHIIDSs8Of+8x3/vv/88ffFu++/jl75/evEte//vnz//e/Dl3d/nrye8P//fwF0fSicv28/Vv7/////t8W7/79Wi///gt0DBb9zLfv/89Cl/3/fff7w//9/A2S9cK/9//i1g4GZqeSdcwnzn4v38HmXgSs3gIGnKfEXIyebOQMDwwWQGMwgh/9fvu8hxhAY4Ix1ZeCdnPOTkYNNgoGB4QMT2DWfv6/50riIaENA4Pvi3Qy/T99k//v0TQOIDzLI4P/nb/zfJm8g2hAY+Nq8hIFJmC8DbNDfp28Sfqw7zEKyKQwMDL8OXQKFLShsDJgYmRhN/j58SY45YPDn1hMOUFpjYmBj5aHEIBhg+vvw5QVWPWWyDWBkY/kBoplYjVQPsOgrkWeIADcDq7kmyGsXQLG2gd3XkoFZXpxkg7hzAhn+3nl6HpaOPvx79X4+35xikgwBWcxVEPSXWUW6iAGajhiYxASLWLTkHxNrGMhLAmsb/v57+2klAwPDAbAYUjEi8O/tp0t/rj2U/ZTSy4ArJtns9Bj4F5T9YWBk2M4kKewHNxytPBL49+p9H5OYYOLPzcfBCQ6WbUAGsAdY/2VWkfrz/+PXIiZxwWkorsRRsCn8e/cp8v+nb/aMvFygTMnw/8v3q8zy4rsZGBgWYKhmYGAAAN6EGE9igaT+AAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAACXBIWXMAAAsSAAALEgHS3X78AAACDElEQVQ4jWP8//8/Ax5gwMDAIACVfgDF2AHIIDSscO/l7x3ff/378fz9n++Hr//4fezmz+9ffvz7/eHr33eP3/6Z8P//fwF0fSguevv5X6UwL1PbwoNfGRrWfGJ48PoPiuUOWuwMDSH8DHryrB8FuZkcGBgYLsDk4AZ9/Pavg5mJscS24SXzhQe/8XmXocCLl6Etgv8XJxujOcwwmEEOX37830OMITCQYM/NMD1F8CcHK6MEAwPDByaQ+Ofv/9fUrvpItCEgsODgV4aTt3+xP3n3twHEBxlk8On7P/4J2z4TbQgMNKz5yCDCy5QBNujJu78Ja05+YyHZFAYGhgPXfjJ8+PoPFDYGTEyMDCYPXv8lxxwwuPnsDwcorTGxsTDyoEczOYDp4es/Fwzk2cg2gI2F8QeIZjJWYjtgoMBKliEC3EwMlmpsIK9dAMXaBn8TTgYFUdLDu8CTl+H2iz/nYenow8uPf+cvyBQiyRCQxcU+vH9VJViKGKDpiEGcn7lIW5b1MbGGgby0qVTk75vPf1eCUgFIDDnTCrz5/O/S1ce/ZROmv8PIsDAAyrhLcoT/MDIybJcSZPaDiaOXRwIvP/7tE+dnTtx45js4wV148Ass4aDFwRBkxvlXVZLlz4ev/4okBJinIWvEVbApvP38L/LT93/2vJxMoEzJ8OXHv6sKoiy7QdkMQzUDAwMAuq71NKWtMMgAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAACXBIWXMAAAsSAAALEgHS3X78AAAB+klEQVQ4jZ2UT2gTQRTGv5nd7G7TsNnW1QimWC+CghBEqJ7sSTx50oM3iwhejSJ486J4qdWLt6JXsQdPVdRDj0WQBqEehKJotLbEbrLNJvtnZlYmZEub1rLJB8Mw8+b9Zt7Me0PiOMY+KgGwuubv3ba3JKinjUfBj7dC+D6L1tt+82Pke5/agnsRZ+4GC38/iePY6vXbcSLBnXtUGXnYdObQWJ8BC6s7NjeGzyJfuAXNONGgSn4SQCWxbYEE33xECL3zZ+WyEvpf9gsXpn0dVuFuSKgxkcAS0GQsvA9pIIlyI1cweuRBQIh+GECddk4jvLn62nRqiFTTeYWgtaTzaPW+HEtQKeabebc2mxqSqLE2A6qO3uyAeLR6rdWYV/umAPC9RQjuyrspUYCeYVE1hdveioIVQ+YaJSST633mQURZ9KuiDZ0cGECI5sueakOnFjLGYCCqmNCzp2VoFflqr7PmBahasW+QTEwWfFtK8qjOWe35geJ0XxC5sWnf4Kp+rIxuHkFR7bKmH/+ZFiZDOnR0lnPmvASwIOe2F60l2MbnMPg69rd6e1fBJpKFa489ZQB5o2QKl5L53v/I4qz2WFHtqZb7DoG3iLC93DEYuXPImhdlKExwt6yoB59td/zfxzYuuHNV8OZ5SodlUUKI1rKqFd8DeLFrNYB/A6b1Qz9EzRMAAAAASUVORK5CYII="},function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=76},function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"CircleBlurMaterialProperty",(function(){return St})),r.d(n,"CircleDiffuseMaterialProperty",(function(){return Lt})),r.d(n,"CircleFadeMaterialProperty",(function(){return Gt})),r.d(n,"CirclePulseMaterialProperty",(function(){return Ut})),r.d(n,"CircleScanMaterialProperty",(function(){return jt})),r.d(n,"CircleSpiralMaterialProperty",(function(){return Yt})),r.d(n,"CircleVaryMaterialProperty",(function(){return Xt})),r.d(n,"CircleWaveMaterialProperty",(function(){return $t})),r.d(n,"EllipsoidElectricMaterialProperty",(function(){return rr})),r.d(n,"EllipsoidTrailMaterialProperty",(function(){return or})),r.d(n,"PolylineFlickerMaterialProperty",(function(){return lr})),r.d(n,"PolylineFlowColorMaterialProperty",(function(){return fr})),r.d(n,"PolylineImageTrailMaterialProperty",(function(){return pr})),r.d(n,"PolylineLightingMaterialProperty",(function(){return gr})),r.d(n,"PolylineLightingTrailMaterialProperty",(function(){return Er})),r.d(n,"PolylineTrailMaterialProperty",(function(){return Tr})),r.d(n,"PolylineOdMaterialProperty",(function(){return Mr})),r.d(n,"RadarLineMaterialProperty",(function(){return Dr})),r.d(n,"RadarSweepMaterialProperty",(function(){return Rr})),r.d(n,"RadarWaveMaterialProperty",(function(){return Fr})),r.d(n,"WallImageTrailMaterialProperty",(function(){return zr})),r.d(n,"WallLineTrailMaterialProperty",(function(){return jr})),r.d(n,"WallTrailMaterialProperty",(function(){return Jr})),r.d(n,"WaterMaterialProperty",(function(){return Xr})),r.d(n,"TextMaterialProperty",(function(){return $r}));var i={};r.r(i),r.d(i,"Graphic",(function(){return Bn})),r.d(i,"GraphicType",(function(){return nn})),r.d(i,"Drill",(function(){return Rn})),r.d(i,"Section",(function(){return Gn})),r.d(i,"Tin",(function(){return Un})),r.d(i,"Geology",(function(){return In})),r.d(i,"BasePoint",(function(){return jn})),r.d(i,"BasePoly",(function(){return Zn})),r.d(i,"Billboard",(function(){return qn})),r.d(i,"Box",(function(){return ti})),r.d(i,"Circle",(function(){return ii})),r.d(i,"Corridor",(function(){return li})),r.d(i,"Curve",(function(){return yi})),r.d(i,"Cylinder",(function(){return gi})),r.d(i,"Ellipse",(function(){return Ci})),r.d(i,"Ellipsoid",(function(){return Bi})),r.d(i,"Label",(function(){return Mi})),r.d(i,"Path",(function(){return Oi})),r.d(i,"Plane",(function(){return ki})),r.d(i,"Point",(function(){return zi})),r.d(i,"Polygon",(function(){return ji})),r.d(i,"Polyline",(function(){return hi})),r.d(i,"PolylineVolume",(function(){return Ji})),r.d(i,"Rectangle",(function(){return Qi})),r.d(i,"Wall",(function(){return to})),r.d(i,"Sector",(function(){return io})),r.d(i,"RoamLine",(function(){return co})),r.d(i,"DivIcon",(function(){return yo})),r.d(i,"Model",(function(){return Ao})),r.d(i,"Tileset",(function(){return Bo})),r.d(i,"BasePrimitive",(function(){return Mn})),r.d(i,"BasePointPrimitive",(function(){return Po})),r.d(i,"BasePolyPrimitive",(function(){return wo})),r.d(i,"BillboardPrimitive",(function(){return Oo})),r.d(i,"BoxPrimitive",(function(){return ko})),r.d(i,"CorridorPrimitive",(function(){return No})),r.d(i,"CylinderPrimitive",(function(){return Vo})),r.d(i,"LabelPrimitive",(function(){return Zo})),r.d(i,"PointPrimitive",(function(){return Xo})),r.d(i,"PolylinePrimitive",(function(){return ea})),r.d(i,"PolygonPrimitive",(function(){return na})),r.d(i,"ModelPrimitive",(function(){return la})),r.d(i,"WallPrimitive",(function(){return fa})),r.d(i,"LightCylinderPrimitive",(function(){return pa})),r.d(i,"Road",(function(){return va})),r.d(i,"AttackArrow",(function(){return Ca})),r.d(i,"DoubleArrow",(function(){return ba})),r.d(i,"FineArrow",(function(){return Ia})),r.d(i,"GatheringPlace",(function(){return La})),r.d(i,"TailedAttackArrow",(function(){return Ga})),r.d(i,"ParticleSystem",(function(){return Va})),r.d(i,"BaseCombine",(function(){return ja})),r.d(i,"PolylineCombine",(function(){return Ya})),r.d(i,"PolygonCombine",(function(){return Xa})),r.d(i,"Tetrahedron",(function(){return $a})),r.d(i,"RectangularSensorPrimitive",(function(){return Rs}));var o,a,s,l=r(1),c=r.n(l),u=r(2),f=r.n(u),h=r(3),d=r.n(h),p=r(4),y=r.n(p),m=r(0),v=r.n(m),g=function(){var e;return window.Cesium||(null===(e=window.Creatar3d.Userspace)||void 0===e?void 0:e.Cesium)},A=g(),_=window.turf||(null===(o=window.Creatar3d.Userspace)||void 0===o?void 0:o.turf),C=(null===(a=window.Creatar3d)||void 0===a||null===(s=a.Userspace)||void 0===s?void 0:s.ellipsoid)||g().Ellipsoid.WGS84,E={INITIALIZED:"initialized",ADDED:"added",REMOVED:"removed",CLEARED:"cleared",INSTALLED:"installed",ENABLED:"enabled",DISABLED:"disabled",PLAY:"play",PAUSE:"pause",RESTORE:"restore"},x=r(5),B=r.n(x);function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P={ADD:"add",REMOVE:"remove"},M={CLICK:A.ScreenSpaceEventType.LEFT_CLICK,RIGHT_CLICK:A.ScreenSpaceEventType.RIGHT_CLICK,DB_CLICK:A.ScreenSpaceEventType.LEFT_DOUBLE_CLICK,MOUSE_MOVE:A.ScreenSpaceEventType.MOUSE_MOVE,WHEEL:A.ScreenSpaceEventType.WHEEL,LEFT_DOWN:A.ScreenSpaceEventType.LEFT_DOWN,LEFT_UP:A.ScreenSpaceEventType.LEFT_UP,MOUSE_OVER:"mouseover",MOUSE_OUT:"mouseout"},w={ADD_LAYER:"addLayer",REMOVE_LAYER:"removeLayer",ADD_EFFECT:"addEffect",REMOVE_EFFECT:"removeEffect",CLICK:A.ScreenSpaceEventType.LEFT_CLICK,RIGHT_CLICK:A.ScreenSpaceEventType.RIGHT_CLICK,DB_CLICK:A.ScreenSpaceEventType.LEFT_DOUBLE_CLICK,MOUSE_MOVE:A.ScreenSpaceEventType.MOUSE_MOVE,WHEEL:A.ScreenSpaceEventType.WHEEL,LEFT_DOWN:A.ScreenSpaceEventType.LEFT_DOWN,LEFT_UP:A.ScreenSpaceEventType.LEFT_UP},I="cameraChanged",D="preUpdate",S="preRender",O=b(b({},P),{},{CLICK:A.ScreenSpaceEventType.LEFT_CLICK,RIGHT_CLICK:A.ScreenSpaceEventType.RIGHT_CLICK,DB_CLICK:A.ScreenSpaceEventType.LEFT_DOUBLE_CLICK,MOUSE_MOVE:A.ScreenSpaceEventType.MOUSE_MOVE,WHEEL:A.ScreenSpaceEventType.WHEEL,MOUSE_OVER:"mouseover",MOUSE_OUT:"mouseout",POSITION_UPDATE:"positionUpdate"}),R=b(b({},P),{},{CLICK:A.ScreenSpaceEventType.LEFT_CLICK,ADD_GRAPHIC:"addGraphic",REMOVE_GRAPHIC:"removeGraphic"}),L=b(b({},P),{},{POST_UPDATE:"postUpdate",CHANGE:"change",OVERPOINT:"overPoint",START:"start",END:"end"}),k=(b({},P),b({},P),function(){function e(){c()(this,e),this._cache={},this._registerEvent()}return f()(e,[{key:"_registerEvent",value:function(){}},{key:"_on",value:function(e,t,r){var n=this.getEvent(e),i=void 0;return n&&t&&(i=n.addEventListener(t,r||this)),i}},{key:"_off",value:function(e,t,r){var n=this.getEvent(e),i=!1;return n&&t&&(i=n.removeEventListener(t,r||this)),i}},{key:"_fire",value:function(e,t){var r=this.getEvent(e);r&&r.raiseEvent(t)}},{key:"on",value:function(e,t,r){return this._on(e,t,r)}},{key:"once",value:function(e,t,r){var n=this;this._on(e,(function i(o){t.call(r,o),n._off(e,i,r)}),r)}},{key:"off",value:function(e,t,r){return this._off(e,t,r)}},{key:"fire",value:function(e,t){this._fire(e,t)}},{key:"getEvent",value:function(e){return this._cache[e]||void 0}}]),e}()),F=r(9),G=r.n(F),N=r(7),z=r.n(N),U=r(8),V=r.n(U);function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var j=function(e){d()(r,e);var t=W(r);function r(){return c()(this,r),t.call(this)}return f()(r,[{key:"_registerEvent",value:function(){var e=this;Object.keys(R).forEach((function(t){var r=R[t];e._cache[r]=new A.Event}))}}]),r}(k);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Z=function(e){d()(r,e);var t=H(r);function r(){return c()(this,r),t.call(this)}return f()(r,[{key:"_registerEvent",value:function(){var e=this;Object.keys(O).forEach((function(t){var r=O[t];e._cache[r]=new A.Event}))}}]),r}(k);function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var J=function(e){d()(r,e);var t=Y(r);function r(){return c()(this,r),t.call(this)}return f()(r,[{key:"_registerEvent",value:function(){var e=this;Object.keys(L).forEach((function(t){var r=L[t];e._cache[r]=new A.Event}))}}]),r}(k);var K="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),X=function(){function e(){c()(this,e),B()(this,"对象深度合并",void 0)}var t;return f()(e,null,[{key:"uuid",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"D",r=[];r[8]=r[13]=r[18]=r[23]="-",r[14]="4";for(var n=0;n<36;n++)r[n]||(e=0|16*Math.random(),r[n]=K[19===n?3&e|8:e]);return t+"-"+r.join("")}},{key:"merge",value:function(e){for(var t,r,n,i,o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];for(r=0,n=a.length;r<n;r++)for(t in i=a[r])e[t]=i[t];return e}},{key:"deepMerge",value:function(t,r){for(var n in r)t[n]=t[n]&&"[object Object]"===t[n].toString()?e.deepMerge(t[n],r[n]):t[n]=r[n];return t}},{key:"splitWords",value:function(e){return this.trim(e).split(/\s+/)}},{key:"setOptions",value:function(e,t){for(var r in e.hasOwnProperty("options")||(e.options=e.options?Object.create(e.options):{}),t)e.options[r]=t[r];return e.options}},{key:"formatNum",value:function(e,t){var r=Math.pow(10,void 0===t?6:t);return Math.round(e*r)/r}},{key:"trim",value:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}},{key:"emptyImageUrl",value:function(){return"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="}},{key:"checkPosition",value:function(e){return e&&e.hasOwnProperty("_lng")&&e.hasOwnProperty("_lat")&&e.hasOwnProperty("_alt")}},{key:"debounce",value:function(e,t){var r=null;return function(){r&&clearTimeout(r),r=setTimeout(e,t)}}},{key:"throttle",value:function(e,t){var r=!0;return function(){if(!r)return!1;r=!1,setTimeout((function(){e(),r=!0}),t)}}},{key:"dataURLtoBlob",value:function(e){for(var t=e.split(","),r=t[0].match(/:(.*?);/)[1],n=atob(t[1]),i=n.length,o=new Uint8Array(i);i--;)o[i]=n.charCodeAt(i);return new Blob([o],{type:r})}},{key:"isObject",value:function(e){return"[object Object]"===Object.prototype.toString.call(e)}},{key:"clipRegion2Canvas",value:(t=G()(V.a.mark((function e(t,r){var n,i,o,a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={x:99999999,y:99999999},i={x:-99999999,y:-99999999},t.forEach((function(e){var t=r.cartesianToCanvasCoordinates(e);n.y=Math.min(n.y,t.y),n.x=Math.min(n.x,t.x),i.y=Math.max(i.y,t.y),i.x=Math.max(i.x,t.x)})),o={x:n.x,y:n.y,w:i.x-n.x,h:i.y-n.y},(a=document.createElement("canvas")).width=o.w,a.height=o.h,e.abrupt("return",new Promise((function(e){var t=document.createElement("canvas");t.width=r.canvas.width,t.height=r.canvas.height;var n=t.getContext("2d"),i=new Image;i.crossOrigin="",i.src=r.canvas.toDataURL("image/png"),i.onload=function(){n.drawImage(i,0,0);var t=n.getImageData(o.x,o.y,o.w,o.h),r=document.createElement("canvas");r.width=o.w,r.height=o.h,r.getContext("2d").putImageData(t,0,0),e(r)}})));case 8:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)})}]),e}(),Q=function(){function e(){c()(this,e)}return f()(e,null,[{key:"get",value:function(e){return"string"==typeof e?document.getElementById(e):e}},{key:"getStyle",value:function(e,t){var r=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!r||"auto"===r)&&document.defaultView){var n=document.defaultView.getComputedStyle(e,null);r=n?n[t]:null}return"auto"===r?null:r}},{key:"create",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=document.createElement(e);return n.className=t||"",r&&r.appendChild(n),n}},{key:"remove",value:function(e){var t=e.parentNode;t&&t.removeChild(e)}},{key:"empty",value:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}},{key:"hasClass",value:function(e,t){if(void 0!==e.classList)return e.classList.contains(t);var r=this.getClass(e);return r.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(r)}},{key:"addClass",value:function(e,t){if(void 0!==e.classList)for(var r=X.splitWords(t),n=0,i=r.length;n<i;n++)e.classList.add(r[n]);else if(!this.hasClass(e,t)){var o=this.getClass(e);this.setClass(e,(o?o+" ":"")+t)}}},{key:"removeClass",value:function(e,t){void 0!==e.classList?e.classList.remove(t):this.setClass(e,X.trim((" "+this.getClass(e)+" ").replace(" "+t+" "," ")))}},{key:"setClass",value:function(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}},{key:"getClass",value:function(e){return e.correspondingElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}},{key:"createSvg",value:function(e,t,r,n){var i=document.createElementNS("http://www.w3.org/2000/svg","svg:svg");i.setAttribute("class","svg-path"),i.setAttribute("width",e),i.setAttribute("height",t),i.setAttribute("viewBox","0 0 ".concat(e," ").concat(t));var o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d",r),i.appendChild(o),n&&n.appendChild(i),i}},{key:"parseDom",value:function(e,t,r){var n;t=null!==(n=t)&&void 0!==n&&n;var i=document.createElement("div");return i.className=r||"",i.innerHTML=e,t?i:i.childNodes}},{key:"enterFullscreen",value:function(e){e&&(e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen())}},{key:"exitFullscreen",value:function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}},{key:"createVideo",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.create("video",t,r),i=this.create("source","",n);i.setAttribute("src",e),i.setAttribute("type","video/map4");var o=this.create("source","",n);return o.setAttribute("src",e),o.setAttribute("type","video/quicktime"),n}}]),e}(),q=2*Math.PI,$=function(){function e(){c()(this,e)}return f()(e,null,[{key:"distance",value:function(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}},{key:"wholeDistance",value:function(e){for(var t=0,r=0;r<e.length-1;r++)t+=this.distance(e[r],e[r+1]);return t}},{key:"getBaseLength",value:function(e){return Math.pow(this.wholeDistance(e),.99)}},{key:"mid",value:function(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}},{key:"getCircleCenterOfThreePoints",value:function(e,t,r){var n=[(e[0]+t[0])/2,(e[1]+t[1])/2],i=[n[0]-e[1]+t[1],n[1]+e[0]-t[0]],o=[(e[0]+r[0])/2,(e[1]+r[1])/2],a=[o[0]-e[1]+r[1],o[1]+e[0]-r[0]];return this.getIntersectPoint(n,i,o,a)}},{key:"getIntersectPoint",value:function(e,t,r,n){var i,o,a;return e[1]===t[1]?[(o=(n[0]-r[0])/(n[1]-r[1]))*(e[1]-r[1])+r[0],i=e[1]]:r[1]===n[1]?[(a=(t[0]-e[0])/(t[1]-e[1]))*(r[1]-e[1])+e[0],i=r[1]]:(a=(t[0]-e[0])/(t[1]-e[1]),o=(n[0]-r[0])/(n[1]-r[1]),[a*(i=(a*e[1]-e[0]-o*r[1]+r[0])/(a-o))-a*e[1]+e[0],i])}},{key:"getAzimuth",value:function(e,t){var r,n=Math.asin(Math.abs(t[1]-e[1])/this.distance(e,t));return t[1]>=e[1]&&t[0]>=e[0]?r=n+Math.PI:t[1]>=e[1]&&t[0]<e[0]?r=q-n:t[1]<e[1]&&t[0]<e[0]?r=n:t[1]<e[1]&&t[0]>=e[0]&&(r=Math.PI-n),r}},{key:"getAzimuthDegree",value:function(e,t){var r=Math.sin(t[0]-e[0])*Math.cos(t[1]),n=Math.cos(e[1])*Math.sin(t[1])-Math.sin(e[1])*Math.cos(t[1])*Math.cos(t[0]-e[0]);return(180*Math.atan2(r,n)/Math.PI+360)%360}},{key:"getAngleOfThreePoints",value:function(e,t,r){var n=this.getAzimuth(t,e)-this.getAzimuth(t,r);return n<0?n+q:n}},{key:"isClockWise",value:function(e,t,r){return(r[1]-e[1])*(t[0]-e[0])>(t[1]-e[1])*(r[0]-e[0])}},{key:"getPointOnLine",value:function(e,t,r){return[t[0]+e*(r[0]-t[0]),t[1]+e*(r[1]-t[1])]}},{key:"getCubicValue",value:function(e,t,r,n,i){var o=1-(e=Math.max(Math.min(e,1),0)),a=e*e,s=a*e,l=o*o,c=l*o;return[c*t[0]+3*l*e*r[0]+3*o*a*n[0]+s*i[0],c*t[1]+3*l*e*r[1]+3*o*a*n[1]+s*i[1]]}},{key:"getThirdPoint",value:function(e,t,r,n,i){var o=this.getAzimuth(e,t),a=i?o+r:o-r,s=n*Math.cos(a),l=n*Math.sin(a);return[t[0]+s,t[1]+l]}},{key:"getArcPoints",value:function(e,t,r,n){var i,o,a=[],s=n-r;s=s<0?s+q:s;for(var l=0;l<=100;l++){var c=r+s*l/100;i=e[0]+t*Math.cos(c),o=e[1]+t*Math.sin(c),a.push([i,o])}return a}},{key:"getBisectorNormals",value:function(e,t,r,n){var i,o,a,s=this.getNormal(t,r,n),l=Math.sqrt(s[0]*s[0]+s[1]*s[1]),c=s[0]/l,u=s[1]/l,f=this.distance(t,r),h=this.distance(r,n);return l>1e-4?this.isClockWise(t,r,n)?(i=e*f,a=[r[0]-i*u,r[1]+i*c],i=e*h,o=[r[0]+i*u,r[1]-i*c]):(i=e*f,a=[r[0]+i*u,r[1]-i*c],i=e*h,o=[r[0]-i*u,r[1]+i*c]):(a=[r[0]+e*(t[0]-r[0]),r[1]+e*(t[1]-r[1])],o=[r[0]+e*(n[0]-r[0]),r[1]+e*(n[1]-r[1])]),[a,o]}},{key:"getNormal",value:function(e,t,r){var n=e[0]-t[0],i=e[1]-t[1],o=Math.sqrt(n*n+i*i);n/=o,i/=o;var a=r[0]-t[0],s=r[1]-t[1],l=Math.sqrt(a*a+s*s);return[n+(a/=l),i+(s/=l)]}},{key:"getCurvePoints",value:function(e,t){for(var r,n,i,o,a=[this.getLeftMostControlPoint(e,t)],s=0;s<t.length-2;s++)r=t[s],n=t[s+1],i=t[s+2],o=this.getBisectorNormals(e,r,n,i),a=a.concat(o);var l=this.getRightMostControlPoint(e,t);a.push(l);for(var c=[],u=0;u<t.length-1;u++){r=t[u],n=t[u+1],c.push(r);for(var f=0;f<100;f++){var h=this.getCubicValue(f/100,r,a[2*u],a[2*u+1],n);c.push(h)}c.push(n)}return c}},{key:"getLeftMostControlPoint",value:function(e,t){var r,n,i=t[0],o=t[1],a=t[2],s=this.getBisectorNormals(0,i,o,a)[0],l=this.getNormal(i,o,a);if(Math.sqrt(l[0]*l[0]+l[1]*l[1])>1e-4){var c=this.mid(i,o),u=i[0]-c[0],f=i[1]-c[1],h=2/this.distance(i,o),d=-h*f,p=h*u,y=d*d-p*p,m=2*d*p,v=p*p-d*d,g=s[0]-c[0],A=s[1]-c[1];r=c[0]+y*g+m*A,n=c[1]+m*g+v*A}else r=i[0]+e*(o[0]-i[0]),n=i[1]+e*(o[1]-i[1]);return[r,n]}},{key:"getRightMostControlPoint",value:function(e,t){var r,n,i=t.length,o=t[i-3],a=t[i-2],s=t[i-1],l=this.getBisectorNormals(0,o,a,s)[1],c=this.getNormal(o,a,s);if(Math.sqrt(c[0]*c[0]+c[1]*c[1])>1e-4){var u=this.mid(a,s),f=s[0]-u[0],h=s[1]-u[1],d=2/this.distance(a,s),p=-d*h,y=d*f,m=p*p-y*y,v=2*p*y,g=y*y-p*p,A=l[0]-u[0],_=l[1]-u[1];r=u[0]+m*A+v*_,n=u[1]+v*A+g*_}else r=s[0]+e*(a[0]-s[0]),n=s[1]+e*(a[1]-s[1]);return[r,n]}},{key:"getBezierPoints",value:function(e){if(e.length<=2)return e;for(var t=[],r=e.length-1,n=0;n<=1;n+=.01){for(var i=0,o=0,a=0;a<=r;a++){var s=this.getBinomialFactor(r,a),l=Math.pow(n,a),c=Math.pow(1-n,r-a);i+=s*l*c*e[a][0],o+=s*l*c*e[a][1]}t.push([i,o])}return t.push(e[r]),t}},{key:"getBinomialFactor",value:function(e,t){return this.getFactorial(e)/(this.getFactorial(t)*this.getFactorial(e-t))}},{key:"getFactorial",value:function(e){if(e<=1)return 1;if(2===e)return 2;if(3===e)return 6;if(4===e)return 24;if(5===e)return 120;for(var t=1,r=1;r<=e;r++)t*=r;return t}},{key:"getQBSplinePoints",value:function(e){if(e.length<=2)return e;var t=[],r=e.length-2-1;t.push(e[0]);for(var n=0;n<=r;n++)for(var i=0;i<=1;i+=.05){for(var o=0,a=0,s=0;s<=2;s++){var l=this.getQuadricBSplineFactor(s,i);o+=l*e[n+s][0],a+=l*e[n+s][1]}t.push([o,a])}return t.push(e[e.length-1]),t}},{key:"getQuadricBSplineFactor",value:function(e,t){return 0===e?Math.pow(t-1,2)/2:1===e?(-2*Math.pow(t,2)+2*t+1)/2:2===e?Math.pow(t,2)/2:0}}]),e}(),ee=new A.WebMercatorProjection,te=function(){function e(){c()(this,e)}return f()(e,null,[{key:"transformCartesianToWGS84",value:function(e){if(e){var t=C.cartesianToCartographic(e);return new ae(A.Math.toDegrees((null==t?void 0:t.longitude)||0),A.Math.toDegrees((null==t?void 0:t.latitude)||0),(null==t?void 0:t.height)||0)}return new ae(0,0)}},{key:"transformCartographicToWGS84",value:function(e){return e?new ae(A.Math.toDegrees(e.longitude),A.Math.toDegrees(e.latitude),e.height):new ae(0,0)}},{key:"transformWGS84ToCartesian",value:function(e){return e?A.Cartesian3.fromDegrees(e.lng,e.lat,e.alt,C):A.Cartographic.ZERO}},{key:"transformCartesianToCartesian",value:function(e){return e?A.Cartographic.fromCartesian(e,C):A.Cartographic.ZERO}},{key:"transformWGS84ToCartographic",value:function(e){return e?A.Cartographic.fromDegrees(e.lng,e.lat,e.alt):A.Cartographic.ZERO}},{key:"transformCartographicArrayToWGS84Array",value:function(e){var t=this;return e?e.map((function(e){return t.transformCartographicToWGS84(e)})):[]}},{key:"transformCartesianArrayToWGS84Array",value:function(e){var t=this;return e?e.map((function(e){return t.transformCartesianToWGS84(e)})):[]}},{key:"transformWGS84ArrayToCartesianArray",value:function(e){var t=this;return e?e.map((function(e){return t.transformWGS84ToCartesian(e)})):[]}},{key:"transformWGS84ArrayToCartographicArray",value:function(e){var t=this;return e?e.map((function(e){return t.transformWGS84ToCartographic(e)})):[]}},{key:"transformWGS84ToMercator",value:function(e){var t=ee.project(A.Cartographic.fromDegrees(e.lng,e.lat,e.alt));return new ae(t.x,t.y,t.z)}},{key:"transformMercatorToWGS84",value:function(e){var t=ee.unproject(new A.Cartesian3(e.lng,e.lat,e.alt));return new ae(A.Math.toDegrees(t.longitude),A.Math.toDegrees(t.latitude),t.height)}},{key:"transformWindowToWGS84",value:function(e,t){var r,n=t.scene;if(n.mode===A.SceneMode.SCENE3D){var i=n.camera.getPickRay(e);r=n.globe.pick(i,n)}else r=n.camera.pickEllipsoid(e,n.globe.ellipsoid);return this.transformCartesianToWGS84(r)}},{key:"transformWGS84ToWindow",value:function(e,t){var r=t.scene;return A.SceneTransforms.wgs84ToWindowCoordinates(r,this.transformWGS84ToCartesian(e))}}]),e}(),re=52.35987755982988,ne=3.141592653589793,ie=.006693421622965943,oe=function(){function e(){c()(this,e)}return f()(e,null,[{key:"BD09ToGCJ02",value:function(e,t){var r=+e-.0065,n=+t-.006,i=Math.sqrt(r*r+n*n)-2e-5*Math.sin(n*re),o=Math.atan2(n,r)-3e-6*Math.cos(r*re);return[i*Math.cos(o),i*Math.sin(o)]}},{key:"GCJ02ToBD09",value:function(e,t){t=+t,e=+e;var r=Math.sqrt(e*e+t*t)+2e-5*Math.sin(t*re),n=Math.atan2(t,e)+3e-6*Math.cos(e*re);return[r*Math.cos(n)+.0065,r*Math.sin(n)+.006]}},{key:"WGS84ToGCJ02",value:function(e,t){if(t=+t,e=+e,this.out_of_china(e,t))return[e,t];var r=this.delta(e,t);return[e+r[0],t+r[1]]}},{key:"GCJ02ToWGS84",value:function(e,t){if(t=+t,e=+e,this.out_of_china(e,t))return[e,t];var r=this.delta(e,t);return[2*e-(e+r[0]),2*t-(t+r[1])]}},{key:"delta",value:function(e,t){var r=this.transformLng(e-105,t-35),n=this.transformLat(e-105,t-35),i=t/180*ne,o=Math.sin(i);o=1-ie*o*o;var a=Math.sqrt(o);return[r=180*r/(6378245/a*Math.cos(i)*ne),n=180*n/(6378245*(1-ie)/(o*a)*ne)]}},{key:"transformLng",value:function(e,t){var r=300+(e=+e)+2*(t=+t)+.1*e*e+.1*e*t+.1*Math.sqrt(Math.abs(e));return r+=2*(20*Math.sin(6*e*ne)+20*Math.sin(2*e*ne))/3,r+=2*(20*Math.sin(e*ne)+40*Math.sin(e/3*ne))/3,r+=2*(150*Math.sin(e/12*ne)+300*Math.sin(e/30*ne))/3}},{key:"transformLat",value:function(e,t){var r=2*(e=+e)-100+3*(t=+t)+.2*t*t+.1*e*t+.2*Math.sqrt(Math.abs(e));return r+=2*(20*Math.sin(6*e*ne)+20*Math.sin(2*e*ne))/3,r+=2*(20*Math.sin(t*ne)+40*Math.sin(t/3*ne))/3,r+=2*(160*Math.sin(t/12*ne)+320*Math.sin(t*ne/30))/3}},{key:"out_of_china",value:function(e,t){return t=+t,!((e=+e)>73.66&&e<135.05&&t>3.86&&t<53.55)}},{key:"lnglatToMercator",value:function(e){var t=20037508.34*e[0]/180,r=Math.log(Math.tan((90+e[1])*Math.PI/360))/(Math.PI/180);return[t,r=20037508.34*r/180]}},{key:"mercatorTolnglat",value:function(e){var t=e[0]/20037508.34*180,r=e[1]/20037508.34*180;return[t,r=180/Math.PI*(2*Math.atan(Math.exp(r*Math.PI/180))-Math.PI/2)]}}]),e}(),ae=function(){function e(t,r,n,i,o,a){c()(this,e),this._lng=+t||0,this._lat=+r||0,this._alt=+n||0,this._heading=+i||0,this._pitch=+o||0,this._roll=+a||0}return f()(e,[{key:"lng",get:function(){return this._lng},set:function(e){this._lng=+e}},{key:"lat",get:function(){return this._lat},set:function(e){this._lat=+e}},{key:"alt",get:function(){return this._alt},set:function(e){this._alt=+e}},{key:"heading",get:function(){return this._heading},set:function(e){this._heading=+e}},{key:"pitch",get:function(){return this._pitch},set:function(e){this._pitch=+e}},{key:"roll",get:function(){return this._roll},set:function(e){this._roll=+e}},{key:"serialize",value:function(){var t=new e(this._lng,this._lat,this._alt,this._heading,this._pitch,this._roll);return JSON.stringify(t)}},{key:"distance",value:function(t){return t&&t instanceof e?Cesium.Cartesian3.distance(te.transformWGS84ToCartesian(this),te.transformWGS84ToCartesian(t)):0}},{key:"copy",value:function(){var t=new e;return t.lng=this.lng||0,t.lat=this.lat||0,t.alt=this.alt||0,t.heading=this.heading||0,t.pitch=this.pitch||0,t.roll=this.roll||0,t}},{key:"equal",value:function(e){return this._alt===e._alt&&this._lng===e._lng&&this._lat===e._lat}},{key:"toArray",value:function(){return[this.lng,this.lat,this.alt,this.heading,this.pitch,this.roll]}},{key:"toArrayPosition",value:function(){return[this.lng,this.lat,this.alt]}},{key:"toString",value:function(){return"".concat(this.lng,",").concat(this.lat,",").concat(this.alt,",").concat(this.heading,",").concat(this.pitch,",").concat(this.roll)}},{key:"toObject",value:function(){return{lng:this.lng,lat:this.lat,alt:this.alt,heading:this.heading,pitch:this.pitch,roll:this.roll}}}],[{key:"fromArray",value:function(t){var r=new e;return Array.isArray(t)&&(r.lng=t[0]||0,r.lat=t[1]||0,r.alt=t[2]||0,r.heading=t[3]||0,r.pitch=t[4]||0,r.roll=t[5]||0),r}},{key:"fromString",value:function(t){var r=new e;if(t&&"string"==typeof t){var n=t.split(",");r=this.fromArray(n)}return r}},{key:"fromObject",value:function(t){return new e(t.lng,t.lat,t.alt,t.heading,t.pitch,t.roll)}},{key:"deserialize",value:function(t){var r=new e,n=JSON.parse(t);return n&&(r.lng=n.lng||0,r.lat=n.lat||0,r.alt=n.alt||0,r.heading=n.heading||0,r.pitch=n.pitch||0,r.roll=n.roll||0),r}}]),e}(),se=function(){function e(){c()(this,e)}return f()(e,null,[{key:"parsePosition",value:function(e){var t=new ae;return e?("string"==typeof e?t=ae.fromString(e):Array.isArray(e)?t=ae.fromArray(e):Object(e)instanceof ae||!Object(e).hasOwnProperty("lng")||!Object(e).hasOwnProperty("lat")?Object(e)instanceof ae&&(t=e):t=ae.fromObject(e),t):t}},{key:"parsePositions",value:function(e){if("string"==typeof e){if(e.indexOf("#")>=0)throw new Error("the positions invalid");e=e.split(";")}return e.map((function(e){return"string"==typeof e?ae.fromString(e):Array.isArray(e)?ae.fromArray(e):Object(e)instanceof ae||!Object(e).hasOwnProperty("lng")||!Object(e).hasOwnProperty("lat")?Object(e)instanceof ae?e:void 0:ae.fromObject(e)}))}},{key:"parsePointCoordToArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e=this.parsePosition(e),t?[e.lng,e.lat]:[e.lng,e.lat,e.alt]}},{key:"parsePolylineCoordToArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[];return(e=this.parsePositions(e)).forEach((function(e){r.push(t?[e.lng,e.lat]:[e.lng,e.lat,e.alt])})),r}},{key:"parsePolygonCoordToArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[];return(e=this.parsePositions(e)).forEach((function(e){r.push(t?[e.lng,e.lat]:[e.lng,e.lat,e.alt])})),[r]}}]),e}(),le={};function ce(e,t,r){var n=A.Cartesian3.subtract(e,t,new A.Cartesian3),i=A.Cartesian3.subtract(r,t,new A.Cartesian3),o=A.Cartesian3.cross(n,i,n);return.5*A.Cartesian3.magnitude(o)}function ue(e,t,r){if(!e||!t)return null;var n=[];r=r||40;var i,o,a,s,l,c,u=function(e){return 1-2*e+e*e},f=function(e){return 2*e-2*e*e},h=function(e){return e*e},d=0,p=parseFloat(e.lat),y=parseFloat(t.lat),m=parseFloat(e.lng),v=parseFloat(t.lng);v>m&&v-m>180&&m<0&&(m=360+m,v=360+v),c=0,y===p?(i=0,o=m-v):v===m?(i=Math.PI/2,o=p-y):(i=Math.atan((y-p)/(v-m)),o=(y-p)/Math.sin(i)),0===c&&(c=i+Math.PI/5),l=(a=o/2)*Math.cos(c)+m,s=a*Math.sin(c)+p;for(var g=0;g<r+1;g++){var A=m*u(d)+l*f(d)+v*h(d),_=p*u(d)+s*f(d)+y*h(d),C=e.lng,E=t.lng;n.push([C<0&&E>0?A-360:A,_]),d+=1/r}return n}le.triangleArea=function(e){return e[0]instanceof A.Cartesian3||(e=te.transformWGS84ArrayToCartesianArray(e)),ce(e[0],e[1],e[2])},le.distance=function(e){var t=0;if(e&&Array.isArray(e))for(var r=te.transformWGS84ArrayToCartographicArray(e),n=0;n<r.length-1;n++){var i=r[n],o=r[n+1],a=new A.EllipsoidGeodesic;a.setEndPoints(i,o);var s=a.surfaceDistance;t+=s=Math.sqrt(Math.pow(s,2)+Math.pow(o.height-i.height,2))}return Number(t.toFixed(3))},le.center=function(e){if(e&&Array.isArray(e)){var t=A.BoundingSphere.fromPoints(te.transformWGS84ArrayToCartesianArray(e));return te.transformCartesianToWGS84(t.center)}return new ae},le.mid=function(e,t){var r=se.parsePosition(e),n=se.parsePosition(t);r=te.transformWGS84ToCartographic(r),n=te.transformWGS84ToCartographic(n);var i=new A.EllipsoidGeodesic(r,n).interpolateUsingFraction(.5);return new ae(A.Math.toDegrees(i.longitude),A.Math.toDegrees(i.latitude),i.height)},le.area=function(e){var t=0;if(!Array.isArray(e))return t;e[0].equal(e[e.length-1])||e.push(e[0]),e[0]instanceof A.Cartesian3||(e=te.transformWGS84ArrayToCartesianArray(e));var r=A.CoplanarPolygonGeometry.createGeometry(A.CoplanarPolygonGeometry.fromPositions({positions:e,vertexFormat:A.VertexFormat.POSITION_ONLY}));if(!r)return t;for(var n=r.attributes.position.values,i=r.indices,o=0;o<i.length;o+=3){t+=ce(A.Cartesian3.unpack(n,3*i[o],new A.Cartesian3),A.Cartesian3.unpack(n,3*i[o+1],new A.Cartesian3),A.Cartesian3.unpack(n,3*i[o+2],new A.Cartesian3))}return Number(t.toFixed(3))},le.bounds=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=180,n=90,i=-180,o=-90;if(e.forEach((function(e){r=Math.min(r,e.lng||e.x),n=Math.min(n,e.lat||e.y),i=Math.max(i,e.lng||e.x),o=Math.max(o,e.lat||e.y)})),t>0){var a=Math.abs(i-i),s=Math.abs(o-n);r-=a*t,n-=s*t,i+=a*t,o+=s*t}return{west:r,south:n,east:i,north:o}},le.isBetween=function(e,t,r){return(e=parseFloat(e)||0)>=parseFloat(t)&&e<=parseFloat(r)},le.curve=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,r=[],n=0;n<e.length-1;n++){var i=ue(e[n],e[n+1],t);i&&i.length>0&&(r=r.concat(i))}return r};var fe=le,he=function(){function e(){c()(this,e)}return f()(e,null,[{key:"calculatePositionByDirectionAndLen",value:function(e,t,r){var n=te.transformWGS84ToMercator(e),i=Cesium.Math.toRadians(t),o=new Cesium.Cartesian3(n.lng+r*Math.sin(i),n.lat+r*Math.cos(i),n.alt);return o=te.transformMercatorToWGS84(new ae(o.x,o.y,o.z))}},{key:"calculateHeadingForLine",value:function(e,t){if(Cesium.Cartesian3.distance(e,t)<1e-5)return 0;var r=Cesium.Transforms.eastNorthUpToFixedFrame(e),n=Cesium.Cartesian3.subtract(t,e,new Cesium.Cartesian3),i=Cesium.Matrix4.multiplyByPointAsVector(Cesium.Matrix4.inverse(r,new Cesium.Matrix4),n,new Cesium.Cartesian3),o=Cesium.Cartesian3.normalize(i,new Cesium.Cartesian3),a=Math.atan2(o.y,o.x)-Cesium.Math.PI_OVER_TWO;Math.atan2(o.z,o.x);return Cesium.Math.toDegrees(Cesium.Math.TWO_PI-Cesium.Math.zeroToTwoPi(a))}},{key:"getSurfaceTerrainPositions",value:function(e,t){return e.terrainProvider instanceof Cesium.EllipsoidTerrainProvider?t:new Promise((function(r){var n=te.transformWGS84ArrayToCartographicArray(t);e.terrainProvider.readyPromise.then((function(){Cesium.sampleTerrainMostDetailed(e.terrainProvider,n).then((function(e){r(te.transformCartographicArrayToWGS84Array(e))}))}))}))}},{key:"getSurfacePositions",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{async:!1},n=te.transformWGS84ArrayToCartographicArray(t);if(r.async)return new Promise((function(t){e.sampleHeightMostDetailed(n,null==r?void 0:r.objectsToExclude).then((function(e){t(te.transformCartographicArrayToWGS84Array(e))}))}));for(var i=0,o=t.length;i<o;i++)t[i].alt=e.sampleHeight(n[i],null==r?void 0:r.objectsToExclude);return Promise.resolve(t)}},{key:"setPositionsHeight",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=[],i=[].concat(e);return e[0]instanceof Cesium.Cartesian3&&(i=te.transformCartesianArrayToWGS84Array(i)),i.forEach((function(e){var i=e.copy();i.alt=r?t:i.alt+t,n.push(i)})),e[0]instanceof Cesium.Cartesian3?te.transformWGS84ArrayToCartesianArray(n):n}}]),e}(),de=r(10),pe=r.n(de);const ye=134217729;function me(e,t,r,n,i){let o,a,s,l,c=t[0],u=n[0],f=0,h=0;u>c==u>-c?(o=c,c=t[++f]):(o=u,u=n[++h]);let d=0;if(f<e&&h<r)for(u>c==u>-c?(a=c+o,s=o-(a-c),c=t[++f]):(a=u+o,s=o-(a-u),u=n[++h]),o=a,0!==s&&(i[d++]=s);f<e&&h<r;)u>c==u>-c?(a=o+c,l=a-o,s=o-(a-l)+(c-l),c=t[++f]):(a=o+u,l=a-o,s=o-(a-l)+(u-l),u=n[++h]),o=a,0!==s&&(i[d++]=s);for(;f<e;)a=o+c,l=a-o,s=o-(a-l)+(c-l),c=t[++f],o=a,0!==s&&(i[d++]=s);for(;h<r;)a=o+u,l=a-o,s=o-(a-l)+(u-l),u=n[++h],o=a,0!==s&&(i[d++]=s);return 0===o&&0!==d||(i[d++]=o),d}function ve(e,t){let r=t[0];for(let n=1;n<e;n++)r+=t[n];return r}function ge(e){return new Float64Array(e)}const Ae=ge(4),_e=ge(8),Ce=ge(12),Ee=ge(16),xe=ge(4);function Be(e,t,r,n,i,o){const a=(t-o)*(r-i),s=(e-i)*(n-o),l=a-s;if(0===a||0===s||a>0!=s>0)return l;const c=Math.abs(a+s);return Math.abs(l)>=33306690738754716e-32*c?l:-function(e,t,r,n,i,o,a){let s,l,c,u,f,h,d,p,y,m,v,g,A,_,C,E,x,B;const T=e-i,b=r-i,P=t-o,M=n-o;_=T*M,h=ye*T,d=h-(h-T),p=T-d,h=ye*M,y=h-(h-M),m=M-y,C=p*m-(_-d*y-p*y-d*m),E=P*b,h=ye*P,d=h-(h-P),p=P-d,h=ye*b,y=h-(h-b),m=b-y,x=p*m-(E-d*y-p*y-d*m),v=C-x,f=C-v,Ae[0]=C-(v+f)+(f-x),g=_+v,f=g-_,A=_-(g-f)+(v-f),v=A-E,f=A-v,Ae[1]=A-(v+f)+(f-E),B=g+v,f=B-g,Ae[2]=g-(B-f)+(v-f),Ae[3]=B;let w=ve(4,Ae),I=22204460492503146e-32*a;if(w>=I||-w>=I)return w;if(f=e-T,s=e-(T+f)+(f-i),f=r-b,c=r-(b+f)+(f-i),f=t-P,l=t-(P+f)+(f-o),f=n-M,u=n-(M+f)+(f-o),0===s&&0===l&&0===c&&0===u)return w;if(I=11093356479670487e-47*a+33306690738754706e-32*Math.abs(w),w+=T*u+M*s-(P*c+b*l),w>=I||-w>=I)return w;_=s*M,h=ye*s,d=h-(h-s),p=s-d,h=ye*M,y=h-(h-M),m=M-y,C=p*m-(_-d*y-p*y-d*m),E=l*b,h=ye*l,d=h-(h-l),p=l-d,h=ye*b,y=h-(h-b),m=b-y,x=p*m-(E-d*y-p*y-d*m),v=C-x,f=C-v,xe[0]=C-(v+f)+(f-x),g=_+v,f=g-_,A=_-(g-f)+(v-f),v=A-E,f=A-v,xe[1]=A-(v+f)+(f-E),B=g+v,f=B-g,xe[2]=g-(B-f)+(v-f),xe[3]=B;const D=me(4,Ae,4,xe,_e);_=T*u,h=ye*T,d=h-(h-T),p=T-d,h=ye*u,y=h-(h-u),m=u-y,C=p*m-(_-d*y-p*y-d*m),E=P*c,h=ye*P,d=h-(h-P),p=P-d,h=ye*c,y=h-(h-c),m=c-y,x=p*m-(E-d*y-p*y-d*m),v=C-x,f=C-v,xe[0]=C-(v+f)+(f-x),g=_+v,f=g-_,A=_-(g-f)+(v-f),v=A-E,f=A-v,xe[1]=A-(v+f)+(f-E),B=g+v,f=B-g,xe[2]=g-(B-f)+(v-f),xe[3]=B;const S=me(D,_e,4,xe,Ce);_=s*u,h=ye*s,d=h-(h-s),p=s-d,h=ye*u,y=h-(h-u),m=u-y,C=p*m-(_-d*y-p*y-d*m),E=l*c,h=ye*l,d=h-(h-l),p=l-d,h=ye*c,y=h-(h-c),m=c-y,x=p*m-(E-d*y-p*y-d*m),v=C-x,f=C-v,xe[0]=C-(v+f)+(f-x),g=_+v,f=g-_,A=_-(g-f)+(v-f),v=A-E,f=A-v,xe[1]=A-(v+f)+(f-E),B=g+v,f=B-g,xe[2]=g-(B-f)+(v-f),xe[3]=B;const O=me(S,Ce,4,xe,Ee);return Ee[O-1]}(e,t,r,n,i,o,c)}ge(4),ge(4),ge(4),ge(4),ge(4),ge(4),ge(4),ge(4),ge(4),ge(8),ge(8),ge(8),ge(4),ge(8),ge(8),ge(8),ge(12);ge(192),ge(192);ge(4),ge(4),ge(4),ge(4),ge(4),ge(4),ge(4),ge(4),ge(8),ge(8),ge(8),ge(8),ge(8),ge(8),ge(8),ge(8),ge(8),ge(4),ge(4),ge(4),ge(8),ge(16),ge(16),ge(16),ge(32),ge(32),ge(48),ge(64);ge(1152),ge(1152);ge(4),ge(4),ge(4),ge(4),ge(4),ge(4),ge(4),ge(4),ge(4),ge(4),ge(24),ge(24),ge(24),ge(24),ge(24),ge(24),ge(24),ge(24),ge(24),ge(24),ge(1152),ge(1152),ge(1152),ge(1152),ge(1152),ge(2304),ge(2304),ge(3456),ge(5760),ge(8),ge(8),ge(8),ge(16),ge(24),ge(48),ge(48),ge(96),ge(192),ge(384),ge(384),ge(384),ge(768);ge(96),ge(96),ge(96),ge(1152);const Te=Math.pow(2,-52),be=new Uint32Array(512);class Pe{static from(e,t=Oe,r=Re){const n=e.length,i=new Float64Array(2*n);for(let o=0;o<n;o++){const n=e[o];i[2*o]=t(n),i[2*o+1]=r(n)}return new Pe(i)}constructor(e){const t=e.length>>1;if(t>0&&"number"!=typeof e[0])throw new Error("Expected coords to contain numbers.");this.coords=e;const r=Math.max(2*t-5,0);this._triangles=new Uint32Array(3*r),this._halfedges=new Int32Array(3*r),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:r,_hullTri:n,_hullHash:i}=this,o=e.length>>1;let a=1/0,s=1/0,l=-1/0,c=-1/0;for(let t=0;t<o;t++){const r=e[2*t],n=e[2*t+1];r<a&&(a=r),n<s&&(s=n),r>l&&(l=r),n>c&&(c=n),this._ids[t]=t}const u=(a+l)/2,f=(s+c)/2;let h,d,p,y=1/0;for(let t=0;t<o;t++){const r=Me(u,f,e[2*t],e[2*t+1]);r<y&&(h=t,y=r)}const m=e[2*h],v=e[2*h+1];y=1/0;for(let t=0;t<o;t++){if(t===h)continue;const r=Me(m,v,e[2*t],e[2*t+1]);r<y&&r>0&&(d=t,y=r)}let g=e[2*d],A=e[2*d+1],_=1/0;for(let t=0;t<o;t++){if(t===h||t===d)continue;const r=Ie(m,v,g,A,e[2*t],e[2*t+1]);r<_&&(p=t,_=r)}let C=e[2*p],E=e[2*p+1];if(_===1/0){for(let t=0;t<o;t++)this._dists[t]=e[2*t]-e[0]||e[2*t+1]-e[1];De(this._ids,this._dists,0,o-1);const t=new Uint32Array(o);let r=0;for(let e=0,n=-1/0;e<o;e++){const i=this._ids[e];this._dists[i]>n&&(t[r++]=i,n=this._dists[i])}return this.hull=t.subarray(0,r),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(Be(m,v,g,A,C,E)<0){const e=d,t=g,r=A;d=p,g=C,A=E,p=e,C=t,E=r}const x=function(e,t,r,n,i,o){const a=r-e,s=n-t,l=i-e,c=o-t,u=a*a+s*s,f=l*l+c*c,h=.5/(a*c-s*l);return{x:e+(c*u-s*f)*h,y:t+(a*f-l*u)*h}}(m,v,g,A,C,E);this._cx=x.x,this._cy=x.y;for(let t=0;t<o;t++)this._dists[t]=Me(e[2*t],e[2*t+1],x.x,x.y);De(this._ids,this._dists,0,o-1),this._hullStart=h;let B=3;r[h]=t[p]=d,r[d]=t[h]=p,r[p]=t[d]=h,n[h]=0,n[d]=1,n[p]=2,i.fill(-1),i[this._hashKey(m,v)]=h,i[this._hashKey(g,A)]=d,i[this._hashKey(C,E)]=p,this.trianglesLen=0,this._addTriangle(h,d,p,-1,-1,-1);for(let o,a,s=0;s<this._ids.length;s++){const l=this._ids[s],c=e[2*l],u=e[2*l+1];if(s>0&&Math.abs(c-o)<=Te&&Math.abs(u-a)<=Te)continue;if(o=c,a=u,l===h||l===d||l===p)continue;let f=0;for(let e=0,t=this._hashKey(c,u);e<this._hashSize&&(f=i[(t+e)%this._hashSize],-1===f||f===r[f]);e++);f=t[f];let y,m=f;for(;y=r[m],Be(c,u,e[2*m],e[2*m+1],e[2*y],e[2*y+1])>=0;)if(m=y,m===f){m=-1;break}if(-1===m)continue;let v=this._addTriangle(m,l,r[m],-1,-1,n[m]);n[l]=this._legalize(v+2),n[m]=v,B++;let g=r[m];for(;y=r[g],Be(c,u,e[2*g],e[2*g+1],e[2*y],e[2*y+1])<0;)v=this._addTriangle(g,l,y,n[l],-1,n[g]),n[l]=this._legalize(v+2),r[g]=g,B--,g=y;if(m===f)for(;y=t[m],Be(c,u,e[2*y],e[2*y+1],e[2*m],e[2*m+1])<0;)v=this._addTriangle(y,l,m,-1,n[m],n[y]),this._legalize(v+2),n[y]=v,r[m]=m,B--,m=y;this._hullStart=t[l]=m,r[m]=t[g]=l,r[l]=g,i[this._hashKey(c,u)]=l,i[this._hashKey(e[2*m],e[2*m+1])]=m}this.hull=new Uint32Array(B);for(let e=0,t=this._hullStart;e<B;e++)this.hull[e]=t,t=r[t];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(function(e,t){const r=e/(Math.abs(e)+Math.abs(t));return(t>0?3-r:1+r)/4}(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:r,coords:n}=this;let i=0,o=0;for(;;){const a=r[e],s=e-e%3;if(o=s+(e+2)%3,-1===a){if(0===i)break;e=be[--i];continue}const l=a-a%3,c=s+(e+1)%3,u=l+(a+2)%3,f=t[o],h=t[e],d=t[c],p=t[u];if(we(n[2*f],n[2*f+1],n[2*h],n[2*h+1],n[2*d],n[2*d+1],n[2*p],n[2*p+1])){t[e]=p,t[a]=f;const n=r[u];if(-1===n){let t=this._hullStart;do{if(this._hullTri[t]===u){this._hullTri[t]=e;break}t=this._hullPrev[t]}while(t!==this._hullStart)}this._link(e,n),this._link(a,r[o]),this._link(o,u);const s=l+(a+1)%3;i<be.length&&(be[i++]=s)}else{if(0===i)break;e=be[--i]}}return o}_link(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}_addTriangle(e,t,r,n,i,o){const a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=t,this._triangles[a+2]=r,this._link(a,n),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}function Me(e,t,r,n){const i=e-r,o=t-n;return i*i+o*o}function we(e,t,r,n,i,o,a,s){const l=e-a,c=t-s,u=r-a,f=n-s,h=i-a,d=o-s,p=u*u+f*f,y=h*h+d*d;return l*(f*y-p*d)-c*(u*y-p*h)+(l*l+c*c)*(u*d-f*h)<0}function Ie(e,t,r,n,i,o){const a=r-e,s=n-t,l=i-e,c=o-t,u=a*a+s*s,f=l*l+c*c,h=.5/(a*c-s*l),d=(c*u-s*f)*h,p=(a*f-l*u)*h;return d*d+p*p}function De(e,t,r,n){if(n-r<=20)for(let i=r+1;i<=n;i++){const n=e[i],o=t[n];let a=i-1;for(;a>=r&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=n}else{let i=r+1,o=n;Se(e,r+n>>1,i),t[e[r]]>t[e[n]]&&Se(e,r,n),t[e[i]]>t[e[n]]&&Se(e,i,n),t[e[r]]>t[e[i]]&&Se(e,r,i);const a=e[i],s=t[a];for(;;){do{i++}while(t[e[i]]<s);do{o--}while(t[e[o]]>s);if(o<i)break;Se(e,i,o)}e[r+1]=e[o],e[o]=a,n-i+1>=o-r?(De(e,t,i,n),De(e,t,r,o-1)):(De(e,t,r,o-1),De(e,t,i,n))}}function Se(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Oe(e){return e[0]}function Re(e){return e[1]}function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ke=function(){function e(){c()(this,e)}var t;return f()(e,null,[{key:"computeStepSurfaceLine",value:function(e){for(var t=e.scene,r=e.splitNum||100,n=e.objectsToExclude||[],i=t.globe.ellipsoid.cartesianArrayToCartographicArray(e.positions),o=[],a=0;a<r;a++){var s=Cesium.Math.lerp(i[0].longitude,i[1].longitude,a/r),l=Cesium.Math.lerp(i[0].latitude,i[1].latitude,a/r),c=new Cesium.Cartographic(s,l);o.push(c)}return new Promise((function(e){t.sampleHeightMostDetailed(o,n).then((function(t){e(t)}))}))}},{key:"computeSurfaceLine",value:(t=G()(V.a.mark((function t(r){var n,i,o,a,s,l,c,u,f,h,d,p,y;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o=r.viewer,a=null!==(n=r.offset)&&void 0!==n?n:0,s=r.splitNum||100,r.objectsToExclude,l=[],c=0;c<r.positions.length-1;c++){for(u=[r.positions[c],r.positions[c+1]],f=o.scene.globe.ellipsoid.cartesianArrayToCartographicArray(u),h=0;h<s;h++)d=Cesium.Math.lerp(f[0].longitude,f[1].longitude,h/s),p=Cesium.Math.lerp(f[0].latitude,f[1].latitude,h/s),y=ae.fromArray([Cesium.Math.toDegrees(d),Cesium.Math.toDegrees(p)]),l.push(y);c===r.positions.length-2&&l.push(ae.fromArray([Cesium.Math.toDegrees(f[1].longitude),Cesium.Math.toDegrees(f[1].latitude)]))}return t.abrupt("return",e.pointsClampToGround({viewer:o,offset:a,positions:l,async:null!==(i=r.async)&&void 0!==i&&i}));case 7:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})},{key:"pointsClampToGround",value:function(e){var t,r=e.viewer,n=null!==(t=e.offset)&&void 0!==t?t:0;return new Promise((function(t){var i;he.getSurfacePositions(r.scene,e.positions,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({async:null!==(i=e.async)&&void 0!==i&&i},e)).then((function(e){n&&e.forEach((function(e){e.alt+=n})),t(e)}))}))}},{key:"interPolygon",value:function(e){for(var t,r=e.positions.map((function(e){return[e.lng,e.lat]})),n=e.splitNum||10,i=null!==(t=e.isOnlyPoint)&&void 0!==t&&t,o=[],a=0;a<r.length-1;a++)o.push([r[a],r[a+1]]);o.push([r[r.length-1],r[0]]);for(var s=Cesium.Rectangle.fromCartesianArray(te.transformWGS84ArrayToCartesianArray(e.positions)),l={minx:Cesium.Math.toDegrees(s.west),miny:Cesium.Math.toDegrees(s.south),maxx:Cesium.Math.toDegrees(s.east),maxy:Cesium.Math.toDegrees(s.north)},c=l.maxx-l.minx,u=l.maxy-l.miny,f=c>u?c/n:u/n,h=[],d=[],p=l.minx,y=l.miny,m=l.maxx,v=l.maxy,g=_.polygon([r.concat([r[0]])]);p+f<=m;)p+=f,d.push([[p,y],[p,v]]);for(p=l.minx;y+f<=v;)y+=f,h.push([[p,y],[m,y]]);for(var A=[],C=0;C<o.length;C++)for(var E=0;E<h.length;E++){var x=_.lineIntersect(_.lineString(o[C]),_.lineString(h[E]));x.features.length>0&&x.features.forEach((function(e){A.push(e.geometry.coordinates)}))}for(var B=0;B<o.length;B++)for(var T=0;T<d.length;T++){var b=_.lineIntersect(_.lineString(o[B]),_.lineString(d[T]));b.features.length>0&&b.features.forEach((function(e){A.push(e.geometry.coordinates)}))}for(var P=0;P<h.length;P++)for(var M=0;M<d.length;M++){var w=_.lineIntersect(_.lineString(h[P]),_.lineString(d[M]));if(w.features.length>0)_.booleanPointInPolygon(_.point(w.features[0].geometry.coordinates),g)&&A.push(w.features[0].geometry.coordinates)}var I=r.concat(A),D={positions:I.map((function(e){return ae.fromArray(e)}))};if(!i){for(var S=Pe.from(I).triangles,O=[],R=0;R<S.length;R+=3){var L=_.polygon([[I[S[R]],I[S[R+1]],I[S[R+2]],I[S[R]]]]),k=_.centerOfMass(L);_.booleanPointInPolygon(k,g)&&O.push([S[R],S[R+1],S[R+2]])}D.triangles=O}return D}},{key:"updateVolume",value:function(e,t){for(var r=e.triangles,n=e.positions,i=t,o=0,a=0,s=0;s<r.length;s++){var l=r[s],c=(n[l[0]].alt+n[l[1]].alt+n[l[2]].alt)/3,u=fe.triangleArea([new ae(n[l[0]].lng,n[l[0]].lat,c),new ae(n[l[1]].lng,n[l[1]].lat,c),new ae(n[l[2]].lng,n[l[2]].lat,c)]),f=Math.abs(u*(c-i));c>=i?a+=f:o+=f}e.fillVolume=o,e.digVolume=a}},{key:"computeVolume",value:function(t){var r=t.viewer,n=t.cutHeight||void 0,i=e.interPolygon(t),o=i.positions,a=i.triangles;return new Promise((function(i){var s;e.pointsClampToGround({viewer:r,offset:null!==(s=t.offset)&&void 0!==s?s:0,positions:o}).then((function(e){var t=Math.min.apply(Math,pe()(e.map((function(e){return e.alt})))),r=Math.max.apply(Math,pe()(e.map((function(e){return e.alt}))));void 0===n&&(n=t);for(var o=0,s=0,l=0,c=0;c<a.length;c++){var u=a[c],f=(e[u[0]].alt+e[u[1]].alt+e[u[2]].alt)/3,h=fe.triangleArea([new ae(e[u[0]].lng,e[u[0]].lat,f),new ae(e[u[1]].lng,e[u[1]].lat,f),new ae(e[u[2]].lng,e[u[2]].lat,f)]),d=Math.abs(h*(f-t));f>=t?s+=d:o+=d,l+=h}i({minHeight:t,maxHeight:r,positions:e,triangles:a,digVolume:s,fillVolume:o,totalArea:l})}))}))}}]),e}(),Fe=r(23),Ge=r(24),Ne=r(25),ze=r(26),Ue=r(27),Ve=r(28),We=r(29),je=r(30),He=r(31),Ze=r(32),Ye=r(33),Je=r(34),Ke=r(35),Xe=r(36),Qe=r(37);A.ShaderSource._czmBuiltinsAndUniforms.czm_cellular=Fe,A.ShaderSource._czmBuiltinsAndUniforms.czm_snoise=Ge,A.Material.AsphaltType="Asphalt",A.Material._materialCache.addMaterial(A.Material.AsphaltType,{fabric:{type:A.Material.AsphaltType,uniforms:{asphaltColor:new A.Color(.15,.15,.15,1),bumpSize:.02,roughness:.2},source:Ne},translucent:function(e){return e.uniforms.asphaltColor.alpha<1}}),A.Material.BlobType="Blob",A.Material._materialCache.addMaterial(A.Material.BlobType,{fabric:{type:A.Material.BlobType,uniforms:{lightColor:new A.Color(1,1,1,.5),darkColor:new A.Color(0,0,1,.5),frequency:10},source:ze},translucent:function(e){var t=e.uniforms;return t.lightColor.alpha<1||t.darkColor.alpha<0}}),A.Material.BrickType="Brick",A.Material._materialCache.addMaterial(A.Material.BrickType,{fabric:{type:A.Material.BrickType,uniforms:{brickColor:new A.Color(.6,.3,.1,1),mortarColor:new A.Color(.8,.8,.7,1),brickSize:new A.Cartesian2(.3,.15),brickPct:new A.Cartesian2(.9,.85),brickRoughness:.2,mortarRoughness:.1},source:Ue},translucent:function(e){var t=e.uniforms;return t.brickColor.alpha<1||t.mortarColor.alpha<1}}),A.Material.CementType="Cement",A.Material._materialCache.addMaterial(A.Material.CementType,{fabric:{type:A.Material.CementType,uniforms:{cementColor:new A.Color(.95,.95,.85,1),grainScale:.01,roughness:.3},source:Ve},translucent:function(e){return e.uniforms.cementColor.alpha<1}}),A.Material.ErosionType="Erosion",A.Material._materialCache.addMaterial(A.Material.ErosionType,{fabric:{type:A.Material.ErosionType,uniforms:{color:new A.Color(1,0,0,.5),time:1},source:We},translucent:function(e){return e.uniforms.color.alpha<1}}),A.Material.FacetType="Facet",A.Material._materialCache.addMaterial(A.Material.FacetType,{fabric:{type:A.Material.FacetType,uniforms:{lightColor:new A.Color(.25,.25,.25,.75),darkColor:new A.Color(.75,.75,.75,.75),frequency:10},source:je},translucent:function(e){var t=e.uniforms;return t.lightColor.alpha<1||t.darkColor.alpha<0}}),A.Material.FresnelType="Fresnel",A.Material._materialCache.addMaterial(A.Material.FresnelType,{fabric:{type:A.Material.FresnelType,materials:{reflection:{type:A.Material.ReflectionType},refraction:{type:A.Material.RefractionType}},source:He},translucent:!1}),A.Material.GrassType="Grass",A.Material._materialCache.addMaterial(A.Material.GrassType,{fabric:{type:A.Material.GrassType,uniforms:{grassColor:new A.Color(.25,.4,.1,1),dirtColor:new A.Color(.1,.1,.1,1),patchiness:1.5},source:Ze},translucent:function(e){var t=e.uniforms;return t.grassColor.alpha<1||t.dirtColor.alpha<1}}),A.Material.ReflectionType="Reflection",A.Material._materialCache.addMaterial(A.Material.ReflectionType,{fabric:{type:A.Material.ReflectionType,uniforms:{cubeMap:A.Material.DefaultCubeMapId,channels:"rgb"},source:Ye},translucent:!1}),A.Material.RefractionType="Refraction",A.Material._materialCache.addMaterial(A.Material.RefractionType,{fabric:{type:A.Material.RefractionType,uniforms:{cubeMap:A.Material.DefaultCubeMapId,channels:"rgb",indexOfRefractionRatio:.9},source:Je},translucent:!1}),A.Material.TyeDyeType="TieDye",A.Material._materialCache.addMaterial(A.Material.TyeDyeType,{fabric:{type:A.Material.TyeDyeType,uniforms:{lightColor:new A.Color(1,1,0,.75),darkColor:new A.Color(1,0,0,.75),frequency:5},source:Ke},translucent:function(e){var t=e.uniforms;return t.lightColor.alpha<1||t.darkColor.alpha<0}}),A.Material.WoodType="Wood",A.Material._materialCache.addMaterial(A.Material.WoodType,{fabric:{type:A.Material.WoodType,uniforms:{lightWoodColor:new A.Color(.6,.3,.1,1),darkWoodColor:new A.Color(.4,.2,.07,1),ringFrequency:3,noiseScale:new A.Cartesian2(.7,.5),grainFrequency:27},source:Xe},translucent:function(e){var t=e.uniforms;return t.lightWoodColor.alpha<1||t.darkWoodColor.alpha<1}}),A.Material.DynamicType="Dynamic",A.Material._materialCache.addMaterial(A.Material.DynamicType,{fabric:{type:A.Material.DynamicType,uniforms:{axis:!1,color:new A.Color(0,0,1,.6),image:A.Material.DefaultImageId,repeat:new A.Cartesian2(1,1),time:1},source:Qe},translucent:function(e){return e.uniforms.color.alpha<1}});var qe=r(38),$e=r(39),et=r(40),tt=r(41),rt=r(42),nt=r(43),it=r(44),ot=r(45),at=r(46),st=r(47);A.Material.CircleBlurType="CircleBlur",A.Material._materialCache.addMaterial(A.Material.CircleBlurType,{fabric:{type:A.Material.CircleBlurType,uniforms:{color:new A.Color(1,0,0,.7),speed:3},source:qe},translucent:function(e){return!0}}),A.Material.CircleDiffuseType="CircleDiffuse",A.Material._materialCache.addMaterial(A.Material.CircleDiffuseType,{fabric:{type:A.Material.CircleDiffuseType,uniforms:{color:new A.Color(1,0,0,.7),speed:3},source:$e},translucent:function(e){return!0}}),A.Material.CircleFadeType="CircleFade",A.Material._materialCache.addMaterial(A.Material.CircleFadeType,{fabric:{type:A.Material.CircleFadeType,uniforms:{color:new A.Color(1,0,0,.7),speed:3},source:et},translucent:function(e){return!0}}),A.Material.CirclePulseType="CirclePulse",A.Material._materialCache.addMaterial(A.Material.CirclePulseType,{fabric:{type:A.Material.CirclePulseType,uniforms:{color:new A.Color(1,0,0,.7),speed:12},source:tt},translucent:function(e){return!0}}),A.Material.CircleRingType="CircleRing",A.Material._materialCache.addMaterial(A.Material.CircleRingType,{fabric:{type:A.Material.CircleRingType,uniforms:{color:new A.Color(1,0,0,.7)},source:rt},translucent:function(e){return!0}}),A.Material.CircleRotateType="CircleRotate",A.Material._materialCache.addMaterial(A.Material.CircleRotateType,{fabric:{type:A.Material.CircleRotateType,uniforms:{color:new A.Color(1,0,0,.7),image:A.Material.DefaultImageId},source:nt},translucent:function(e){return!0}}),A.Material.CircleScanType="CircleScan",A.Material._materialCache.addMaterial(A.Material.CircleScanType,{fabric:{type:A.Material.CircleScanType,uniforms:{color:new A.Color(1,0,0,.7),speed:1},source:it},translucent:function(e){return!0}}),A.Material.CircleSpiralType="CircleSpiral",A.Material._materialCache.addMaterial(A.Material.CircleSpiralType,{fabric:{type:A.Material.CircleSpiralType,uniforms:{color:new A.Color(1,0,0,.7),speed:3},source:ot},translucent:function(e){return!0}}),A.Material.CircleVaryType="CircleVary",A.Material._materialCache.addMaterial(A.Material.CircleVaryType,{fabric:{type:A.Material.CircleVaryType,uniforms:{color:new A.Color(1,0,0,.7),speed:3},source:at},translucent:function(e){return!0}}),A.Material.CircleWaveType="CircleWave",A.Material._materialCache.addMaterial(A.Material.CircleWaveType,{fabric:{type:A.Material.CircleWaveType,uniforms:{color:new A.Color(1,0,0,.7),speed:3,count:1,gradient:.1},source:st},translucent:function(e){return!0}});var lt=r(48),ct=r(49);A.Material.CylinderFadeType="CylinderFade",A.Material._materialCache.addMaterial(A.Material.CylinderFadeType,{fabric:{type:A.Material.CylinderFadeType,uniforms:{color:new A.Color(1,0,0,.7)},source:lt},translucent:function(e){return!0}}),A.Material.CylinderParticlesType="CylinderParticles",A.Material._materialCache.addMaterial(A.Material.CylinderParticlesType,{fabric:{type:A.Material.CylinderParticlesType,uniforms:{color:new A.Color(1,0,0,.7),image:A.Material.DefaultImageId},source:ct},translucent:function(e){return!0}});var ut=r(50),ft=r(51);A.Material.EllipsoidElectricType="EllipsoidElectric",A.Material._materialCache.addMaterial(A.Material.EllipsoidElectricType,{fabric:{type:A.Material.EllipsoidElectricType,uniforms:{color:new A.Color(1,0,0,.7),speed:1},source:ut},translucent:function(e){return!0}}),A.Material.EllipsoidTrailType="EllipsoidTrail",A.Material._materialCache.addMaterial(A.Material.EllipsoidTrailType,{fabric:{type:A.Material.EllipsoidTrailType,uniforms:{color:new A.Color(1,0,0,.7),speed:3},source:ft},translucent:function(e){return!0}});var ht=r(52),dt=r(53),pt=r(54),yt=r(55),mt=r(56),vt=r(57),gt=r(58),At=r(59);A.Material.PolylineFlickerType="PolylineFlicker",A.Material._materialCache.addMaterial(A.Material.PolylineFlickerType,{fabric:{type:A.Material.PolylineFlickerType,uniforms:{color:new A.Color(1,0,0,.7),speed:1},source:ht},translucent:function(e){return!0}}),A.Material.PolylineFlowColorType="PolylineFlowColor",A.Material._materialCache.addMaterial(A.Material.PolylineFlowColorType,{fabric:{type:A.Material.PolylineFlowColorType,uniforms:{color:new A.Color(1,0,0,.7),speed:1,percent:.03,gradient:.1},source:dt},translucent:function(e){return!0}}),A.Material.PolylineFlowType="PolylineFlow",A.Material._materialCache.addMaterial(A.Material.PolylineFlowType,{fabric:{type:A.Material.PolylineFlowType,uniforms:{axisY:!1,hasImage2:!1,color:new A.Color(1,0,0,1),color2:new A.Color(1,1,1,1),image:A.Material.DefaultImageId,image2:A.Material.DefaultImageId,repeat:new A.Cartesian2(1,1),speed:10,time:-1},source:pt},translucent:function(e){return!0}}),A.Material.PolylineImageTrailType="PolylineImageTrail",A.Material._materialCache.addMaterial(A.Material.PolylineImageTrailType,{fabric:{type:A.Material.PolylineImageTrailType,uniforms:{color:new A.Color(1,0,0,.7),image:A.Material.DefaultImageId,speed:1,repeat:new A.Cartesian2(1,1)},source:yt},translucent:function(e){return!0}}),A.Material.PolylineLightingType="PolylineLighting",A.Material._materialCache.addMaterial(A.Material.PolylineLightingType,{fabric:{type:A.Material.PolylineLightingType,uniforms:{color:new A.Color(1,0,0,.7),image:A.Material.DefaultImageId},source:mt},translucent:function(e){return!0}}),A.Material.PolylineLightingTrailType="PolylineLightingTrail",A.Material._materialCache.addMaterial(A.Material.PolylineLightingTrailType,{fabric:{type:A.Material.PolylineLightingTrailType,uniforms:{color:new A.Color(1,0,0,.7),image:A.Material.DefaultImageId,speed:3},source:vt},translucent:function(e){return!0}}),A.Material.PolylineTrailType="PolylineTrail",A.Material._materialCache.addMaterial(A.Material.PolylineTrailType,{fabric:{type:A.Material.PolylineTrailType,uniforms:{color:new A.Color(1,0,0,.7),image:A.Material.DefaultImageId,speed:1,repeat:new A.Cartesian2(1,1)},source:gt},translucent:function(e){return!0}}),A.Material.PolylineOdType="PolylineOd",A.Material._materialCache.addMaterial(A.Material.PolylineOdType,{fabric:{type:A.Material.PolylineOdType,uniforms:{color:new A.Color(1,0,0,.7),bgColor:new A.Color(1,1,0,.1),startTime:0,speed:20,bidirectional:0},source:At},translucent:function(e){return!0}});var _t=r(60),Ct=r(61),Et=r(62);A.Material.RadarLineType="RadarLine",A.Material._materialCache.addMaterial(A.Material.RadarLineType,{fabric:{type:A.Material.RadarLineType,uniforms:{color:new A.Color(1,0,0,.7),speed:3},source:_t},translucent:function(e){return!0}}),A.Material.RadarSweepType="RadarSweep",A.Material._materialCache.addMaterial(A.Material.RadarSweepType,{fabric:{type:A.Material.RadarSweepType,uniforms:{color:new A.Color(1,0,0,.7),speed:3},source:Ct},translucent:function(e){return!0}}),A.Material.RadarWaveType="RadarWave",A.Material._materialCache.addMaterial(A.Material.RadarWaveType,{fabric:{type:A.Material.RadarWaveType,uniforms:{color:new A.Color(1,0,0,.7),speed:3},source:Et},translucent:function(e){return!0}});var xt=r(63),Bt=r(64),Tt=r(65),bt=r(66),Pt=r(67);A.Material.WallDiffuseType="WallDiffuse",A.Material._materialCache.addMaterial(A.Material.WallDiffuseType,{fabric:{type:A.Material.WallDiffuseType,uniforms:{color:new A.Color(1,0,0,.7)},source:xt},translucent:function(e){return!0}}),A.Material.WallImageTrailType="WallImageTrail",A.Material._materialCache.addMaterial(A.Material.WallImageTrailType,{fabric:{type:A.Material.WallImageTrailType,uniforms:{image:A.Material.DefaultImageId,color:new A.Color(1,0,0,.7),speed:3,repeat:new A.Cartesian2(1,1)},source:Bt},translucent:function(e){return!0}}),A.Material.WallLineTrailType="WallLineTrail",A.Material._materialCache.addMaterial(A.Material.WallLineTrailType,{fabric:{type:A.Material.WallLineTrailType,uniforms:{color:new A.Color(1,0,0,.7),image:A.Material.DefaultImageId,repeat:new A.Cartesian2(1,1),speed:3},source:Tt},translucent:function(e){return!0}}),A.Material.WallTrailType="WallTrail",A.Material._materialCache.addMaterial(A.Material.WallTrailType,{fabric:{type:A.Material.WallTrailType,uniforms:{color:new A.Color(1,0,0,.7),image:A.Material.DefaultImageId,speed:1},source:bt},translucent:function(e){return!0}}),A.Material.WallScrollType="WallScroll",A.Material._materialCache.addMaterial(A.Material.WallScrollType,{fabric:{type:A.Material.WallScrollType,uniforms:{color:new A.Color(1,0,0,.7),image:A.Material.DefaultImageId,speed:5,count:1},source:Pt},translucent:function(e){return!0}});var Mt=r(68);A.Material.TextType="Text",A.Material._materialCache.addMaterial(A.Material.TextType,{fabric:{type:A.Material.TextType,uniforms:{image:A.Material.DefaultImageId,opacity:1},source:Mt},translucent:function(){return!0}});var wt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c()(this,e),this.options=t,this._definitionChanged=new A.Event,this._color=void 0,this._colorSubscription=void 0,this._speed=void 0,this._speedSubscription=void 0,this.color=t.color||A.Color.fromRandom(),this.speed=t.speed||5}return f()(e,[{key:"isConstant",get:function(){return!1}},{key:"definitionChanged",get:function(){return this._definitionChanged}},{key:"getType",value:function(e){return null}},{key:"getValue",value:function(e,t){return t=A.defaultValue(t,{})}},{key:"equals",value:function(e){return this===e}}]),e}();function It(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Dt=function(e){d()(r,e);var t=It(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),t.call(this,e)}return f()(r,[{key:"getType",value:function(e){return A.Material.CircleBlurType}},{key:"getValue",value:function(e,t){return(t=A.defaultValue(t,{})).color=A.Property.getValueOrUndefined(this._color,e),t.speed=A.Property.getValueOrUndefined(this._speed,e),t}},{key:"equals",value:function(e){return this===e||e instanceof r&&A.Property.equals(this._color,e._color)&&A.Property.equals(this._speed,e._speed)}}]),r}(wt);Object.defineProperties(Dt.prototype,{color:A.createPropertyDescriptor("color"),speed:A.createPropertyDescriptor("speed")});var St=Dt;function Ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Rt=function(e){d()(r,e);var t=Ot(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),t.call(this,e)}return f()(r,[{key:"getType",value:function(e){return A.Material.CircleDiffuseType}},{key:"getValue",value:function(e,t){return(t=A.defaultValue(t,{})).color=A.Property.getValueOrUndefined(this._color,e),t.speed=A.Property.getValueOrUndefined(this._speed,e),t}},{key:"equals",value:function(e){return this===e||e instanceof r&&A.Property.equals(this._color,e._color)&&A.Property.equals(this._speed,e._speed)}}]),r}(wt);Object.defineProperties(Rt.prototype,{color:A.createPropertyDescriptor("color"),speed:A.createPropertyDescriptor("speed")});var Lt=Rt;function kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Ft=function(e){d()(r,e);var t=kt(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),t.call(this,e)}return f()(r,[{key:"getType",value:function(e){return A.Material.CircleFadeType}},{key:"getValue",value:function(e,t){return t||(t={}),t.color=A.Property.getValueOrUndefined(this._color,e),t.speed=A.Property.getValueOrUndefined(this._speed,e),t}},{key:"equals",value:function(e){return this===e||e instanceof r&&A.Property.equals(this._color,e._color)&&A.Property.equals(this._speed,e._speed)}}]),r}(wt);Object.defineProperties(Ft.prototype,{color:A.createPropertyDescriptor("color"),speed:A.createPropertyDescriptor("speed")});var Gt=Ft;function Nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var zt=function(e){d()(r,e);var t=Nt(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),t.call(this,e)}return f()(r,[{key:"getType",value:function(e){return A.Material.CirclePulseType}},{key:"getValue",value:function(e,t){return t||(t={}),t.color=A.Property.getValueOrUndefined(this._color,e),t.speed=A.Property.getValueOrUndefined(this._speed,e),t}},{key:"equals",value:function(e){return this===e||e instanceof r&&A.Property.equals(this._color,e._color)&&A.Property.equals(this._speed,e._speed)}}]),r}(wt);Object.defineProperties(zt.prototype,{color:A.createPropertyDescriptor("color"),speed:A.createPropertyDescriptor("speed")});var Ut=zt;function Vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Wt=function(e){d()(r,e);var t=Vt(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),t.call(this,e)}return f()(r,[{key:"getType",value:function(e){return A.Material.CircleScanType}},{key:"getValue",value:function(e,t){return t||(t={}),t.color=A.Property.getValueOrUndefined(this._color,e),t.speed=A.Property.getValueOrUndefined(this._speed,e),t}},{key:"equals",value:function(e){return this===e||e instanceof r&&A.Property.equals(this._color,e._color)&&A.Property.equals(this._speed,e._speed)}}]),r}(wt);Object.defineProperties(Wt.prototype,{color:A.createPropertyDescriptor("color"),speed:A.createPropertyDescriptor("speed")});var jt=Wt;function Ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Zt=function(e){d()(r,e);var t=Ht(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),t.call(this,e)}return f()(r,[{key:"getType",value:function(e){return A.Material.CircleSpiralType}},{key:"getValue",value:function(e,t){return t||(t={}),t.color=A.Property.getValueOrUndefined(this._color,e),t.speed=A.Property.getValueOrUndefined(this._speed,e),t}},{key:"equals",value:function(e){return this===e||e instanceof r&&A.Property.equals(this._color,e._color)&&A.Property.equals(this._speed,e._speed)}}]),r}(wt);Object.defineProperties(Zt.prototype,{color:A.createPropertyDescriptor("color"),speed:A.createPropertyDescriptor("speed")});var Yt=Zt;function Jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Kt=function(e){d()(r,e);var t=Jt(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),t.call(this,e)}return f()(r,[{key:"getType",value:function(e){return A.Material.CircleVaryType}},{key:"getValue",value:function(e,t){return(t=A.defaultValue(t,{})).color=A.Property.getValueOrUndefined(this._color,e),t.speed=A.Property.getValueOrUndefined(this._speed,e),t}},{key:"equals",value:function(e){return this===e||e instanceof r&&A.Property.equals(this._color,e._color)&&A.Property.equals(this._speed,e._speed)}}]),r}(wt);Object.defineProperties(Kt.prototype,{color:A.createPropertyDescriptor("color"),speed:A.createPropertyDescriptor("speed")});var Xt=Kt;function Qt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var qt=function(e){d()(r,e);var t=Qt(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._count=void 0,e._gradient=void 0,e.count=Math.max(n.count||3,1),e.gradient=A.Math.clamp(n.gradient||.1,0,1),e}return f()(r,[{key:"isConstant",get:function(){return!1}},{key:"definitionChanged",get:function(){return this._definitionChanged}},{key:"getType",value:function(e){return A.Material.CircleWaveType}},{key:"getValue",value:function(e,t){return t||(t={}),t.color=A.Property.getValueOrUndefined(this._color,e),t.speed=A.Property.getValueOrUndefined(this._speed,e),t.count=this._count,t.gradient=this._gradient,t}},{key:"equals",value:function(e){return this===e||e instanceof r&&A.Property.equals(this._color,e._color)&&A.Property.equals(this._speed,e._speed)}}]),r}(wt);Object.defineProperties(qt.prototype,{color:A.createPropertyDescriptor("color"),speed:A.createPropertyDescriptor("speed"),count:A.createPropertyDescriptor("count"),gradient:A.createPropertyDescriptor("gradient")});var $t=qt;function er(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var tr=function(e){d()(r,e);var t=er(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),t.call(this,e)}return f()(r,[{key:"getType",value:function(e){return A.Material.EllipsoidElectricType}},{key:"getValue",value:function(e,t){return(t=A.defaultValue(t,{})).color=A.Property.getValueOrUndefined(this._color,e),t.speed=A.Property.getValueOrUndefined(this._speed,e),t}},{key:"equals",value:function(e){return this===e||e instanceof r&&A.Property.equals(this._color,e._color)&&A.Property.equals(this._speed,e._speed)}}]),r}(wt);Object.defineProperties(tr.prototype,{color:A.createPropertyDescriptor("color"),speed:A.createPropertyDescriptor("speed")});var rr=tr;function nr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var ir=function(e){d()(r,e);var t=nr(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),t.call(this,e)}return f()(r,[{key:"getType",value:function(e){return A.Material.EllipsoidTrailType}},{key:"getValue",value:function(e,t){return(t=A.defaultValue(t,{})).color=A.Property.getValueOrUndefined(this._color,e),t.speed=A.Property.getValueOrUndefined(this._speed,e),t}},{key:"equals",value:function(e){return this===e||e instanceof r&&A.Property.equals(this._color,e._color)&&A.Property.equals(this._speed,e._speed)}}]),r}(wt);Object.defineProperties(ir.prototype,{color:A.createPropertyDescriptor("color"),speed:A.createPropertyDescriptor("speed")});var or=ir;function ar(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var sr=function(e){d()(r,e);var t=ar(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),t.call(this,e)}return f()(r,[{key:"getType",value:function(e){return A.Material.PolylineFlickerType}},{key:"getValue",value:function(e,t){return t||(t={}),t.color=A.Property.getValueOrUndefined(this._color,e),t.speed=this._speed,t}},{key:"equals",value:function(e){return this===e||e instanceof r&&A.Property.equals(this._color,e._color)&&A.Property.equals(this._speed,e._speed)}}]),r}(wt);Object.defineProperties(sr.prototype,{color:A.createPropertyDescriptor("color"),speed:A.createPropertyDescriptor("speed")});var lr=sr;function cr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var ur=function(e){d()(r,e);var t=cr(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._percent=void 0,e._percentSubscription=void 0,e._gradient=void 0,e._gradientSubscription=void 0,e.percent=n.percent||.03,e.gradient=n.gradient||.1,e}return f()(r,[{key:"getType",value:function(e){return A.Material.PolylineFlowColorType}},{key:"getValue",value:function(e,t){return t||(t={}),t.color=A.Property.getValueOrUndefined(this._color,e),t.speed=this._speed,t.percent=this._percent,t.gradient=this._gradient,t}},{key:"equals",value:function(e){return this===e||e instanceof r&&A.Property.equals(this._color,e._color)&&A.Property.equals(this._speed,e._speed)&&A.Property.equals(this._percent,e._percent)&&A.Property.equals(this._gradient,e._gradient)}}]),r}(wt);Object.defineProperties(ur.prototype,{color:A.createPropertyDescriptor("color"),speed:A.createPropertyDescriptor("speed"),percent:A.createPropertyDescriptor("percent"),gradient:A.createPropertyDescriptor("gradient")});var fr=ur;function hr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var dr=function(e){d()(r,e);var t=hr(r);function r(){var e,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(i=t.call(this,o))._image=void 0,i._imageSubscription=void 0,i._repeat=void 0,i._repeatSubscription=void 0,i.image=o.image,i.repeat=new A.Cartesian2((null===(e=o.repeat)||void 0===e?void 0:e.x)||1,(null===(n=o.repeat)||void 0===n?void 0:n.y)||1),i}return f()(r,[{key:"getType",value:function(e){return A.Material.PolylineImageTrailType}},{key:"getValue",value:function(e,t){return t||(t={}),t.color=A.Property.getValueOrUndefined(this._color,e),t.image=A.Property.getValueOrUndefined(this._image,e),t.repeat=A.Property.getValueOrUndefined(this._repeat,e),t.speed=this._speed,t}},{key:"equals",value:function(e){return this===e||e instanceof r&&A.Property.equals(this._color,e._color)&&A.Property.equals(this._image,e._image)&&A.Property.equals(this._repeat,e._repeat)&&A.Property.equals(this._speed,e._speed)}}]),r}(wt);Object.defineProperties(dr.prototype,{color:A.createPropertyDescriptor("color"),speed:A.createPropertyDescriptor("speed"),image:A.createPropertyDescriptor("image"),repeat:A.createPropertyDescriptor("repeat")});var pr=dr;function yr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var mr=r(13),vr=function(e){d()(r,e);var t=yr(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._image=void 0,e._imageSubscription=void 0,e.image=mr,e}return f()(r,[{key:"getType",value:function(e){return A.Material.PolylineLightingType}},{key:"getValue",value:function(e,t){return t||(t={}),t.color=A.Property.getValueOrUndefined(this._color,e),t.image=A.Property.getValueOrUndefined(this._image,e),t}},{key:"equals",value:function(e){return this===e||e instanceof r&&A.Property.equals(this._color,e._color)&&A.Property.equals(this._image,e._image)}}]),r}(wt);Object.defineProperties(vr.prototype,{color:A.createPropertyDescriptor("color"),image:A.createPropertyDescriptor("image")});var gr=vr;function Ar(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var _r=r(13),Cr=function(e){d()(r,e);var t=Ar(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._image=void 0,e._imageSubscription=void 0,e.image=n.image||_r,e}return f()(r,[{key:"getType",value:function(e){return A.Material.PolylineLightingTrailType}},{key:"getValue",value:function(e,t){return t||(t={}),t.color=A.Property.getValueOrUndefined(this._color,e),t.image=A.Property.getValueOrUndefined(this._image,e),t.speed=A.Property.getValueOrUndefined(this._speed,e),t}},{key:"equals",value:function(e){return this===e||e instanceof r&&A.Property.equals(this._color,e._color)&&A.Property.equals(this._speed,e._speed)}}]),r}(wt);Object.defineProperties(Cr.prototype,{color:A.createPropertyDescriptor("color"),speed:A.createPropertyDescriptor("speed"),image:A.createPropertyDescriptor("image")});var Er=Cr;function xr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Br=function(e){d()(r,e);var t=xr(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),t.call(this,e)}return f()(r,[{key:"getType",value:function(e){return A.Material.PolylineTrailType}},{key:"getValue",value:function(e,t){return t||(t={}),t.color=A.Property.getValueOrUndefined(this._color,e),t.speed=this._speed,t}},{key:"equals",value:function(e){return this===e||e instanceof r&&A.Property.equals(this._color,e._color)&&A.Property.equals(this._speed,e._speed)}}]),r}(wt);Object.defineProperties(Br.prototype,{color:A.createPropertyDescriptor("color"),speed:A.createPropertyDescriptor("speed")});var Tr=Br;function br(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Pr=function(e){d()(r,e);var t=br(r);function r(){var e,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(i=t.call(this,o))._bgColor=void 0,i._startTime=void 0,i._bidirectional=void 0,i._bgColorSubscription=void 0,i._startTimeSubscription=void 0,i._bidirectionalSubscription=void 0,i.speed=o.speed||20+10*Math.random(),i.color=o.color||A.Color.fromRandom(),i.bgColor=o.bgColor||A.Color.fromRandom(),i.startTime=null!==(e=o.startTime)&&void 0!==e?e:Math.random,i.bidirectional=null!==(n=o.bidirectional)&&void 0!==n?n:0,i}return f()(r,[{key:"getType",value:function(e){return A.Material.PolylineOdType}},{key:"getValue",value:function(e,t){return t||(t={}),t.color=A.Property.getValueOrUndefined(this._color,e),t.speed=A.Property.getValueOrUndefined(this._speed,e),t.bgColor=A.Property.getValueOrUndefined(this._bgColor,e),t.startTime=A.Property.getValueOrUndefined(this._startTime,e),t.bidirectional=A.Property.getValueOrUndefined(this._bidirectional,e),t}},{key:"equals",value:function(e){return this===e||e instanceof r&&A.Property.equals(this._color,e._color)}}]),r}(wt);Object.defineProperties(Pr.prototype,{color:A.createPropertyDescriptor("color"),speed:A.createPropertyDescriptor("speed"),bgColor:A.createPropertyDescriptor("bgColor"),startTime:A.createPropertyDescriptor("startTime"),bidirectional:A.createPropertyDescriptor("bidirectional")});var Mr=Pr;function wr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Ir=function(e){d()(r,e);var t=wr(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),t.call(this,e)}return f()(r,[{key:"getType",value:function(e){return A.Material.RadarLineType}},{key:"getValue",value:function(e,t){return(t=A.defaultValue(t,{})).color=A.Property.getValueOrUndefined(this._color,e),t.speed=A.Property.getValueOrUndefined(this._speed,e),t}},{key:"equals",value:function(e){return this===e||e instanceof r&&A.Property.equals(this._color,e._color)&&A.Property.equals(this._speed,e._speed)}}]),r}(wt);Object.defineProperties(Ir.prototype,{color:A.createPropertyDescriptor("color"),speed:A.createPropertyDescriptor("speed")});var Dr=Ir;function Sr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Or=function(e){d()(r,e);var t=Sr(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),t.call(this,e)}return f()(r,[{key:"getType",value:function(e){return A.Material.RadarSweepType}},{key:"getValue",value:function(e,t){return(t=A.defaultValue(t,{})).color=A.Property.getValueOrUndefined(this._color,e),t.speed=this._speed,t}},{key:"equals",value:function(e){return this===e||e instanceof r&&A.Property.equals(this._color,e._color)&&A.Property.equals(this._speed,e._speed)}}]),r}(wt);Object.defineProperties(Or.prototype,{color:A.createPropertyDescriptor("color"),speed:A.createPropertyDescriptor("speed")});var Rr=Or;function Lr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var kr=function(e){d()(r,e);var t=Lr(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),t.call(this,e)}return f()(r,[{key:"getType",value:function(e){return A.Material.RadarWaveType}},{key:"getValue",value:function(e,t){return(t=A.defaultValue(t,{})).color=A.Property.getValueOrUndefined(this._color,e),t.speed=this._speed,t}},{key:"equals",value:function(e){return this===e||e instanceof r&&A.Property.equals(this._color,e._color)&&A.Property.equals(this._speed,e._speed)}}]),r}(wt);Object.defineProperties(kr.prototype,{color:A.createPropertyDescriptor("color"),speed:A.createPropertyDescriptor("speed")});var Fr=kr;function Gr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Nr=function(e){d()(r,e);var t=Gr(r);function r(){var e,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(i=t.call(this,o))._image=void 0,i._imageSubscription=void 0,i._repeat=void 0,i._repeatSubscription=void 0,i.image=o.image,i.repeat=new A.Cartesian2((null===(e=o.repeat)||void 0===e?void 0:e.x)||1,(null===(n=o.repeat)||void 0===n?void 0:n.y)||1),i}return f()(r,[{key:"getType",value:function(e){return A.Material.WallImageTrailType}},{key:"getValue",value:function(e,t){return(t=A.defaultValue(t,{})).color=A.Property.getValueOrUndefined(this._color,e),t.image=A.Property.getValueOrUndefined(this._image,e),t.repeat=A.Property.getValueOrUndefined(this._repeat,e),t.speed=this._speed,t}},{key:"equals",value:function(e){return this===e||e instanceof r&&A.Property.equals(this._color,e._color)&&A.Property.equals(this._image,e._image)&&A.Property.equals(this._repeat,e._repeat)&&A.Property.equals(this._speed,e._speed)}}]),r}(wt);Object.defineProperties(Nr.prototype,{image:A.createPropertyDescriptor("image"),color:A.createPropertyDescriptor("color"),speed:A.createPropertyDescriptor("speed"),repeat:A.createPropertyDescriptor("repeat")});var zr=Nr;function Ur(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Vr=r(69),Wr=function(e){d()(r,e);var t=Ur(r);function r(){var e,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(i=t.call(this,o))._image=void 0,i._imageSubscription=void 0,i._repeat=void 0,i._repeatSubscription=void 0,i.image=o.image||Vr,i.repeat=new A.Cartesian2((null===(e=o.repeat)||void 0===e?void 0:e.x)||1,(null===(n=o.repeat)||void 0===n?void 0:n.y)||1),i}return f()(r,[{key:"getType",value:function(e){return A.Material.WallLineTrailType}},{key:"getValue",value:function(e,t){return t||(t={}),t.color=A.Property.getValueOrUndefined(this._color,e),t.image=A.Property.getValueOrUndefined(this._image,e),t.repeat=A.Property.getValueOrUndefined(this._repeat,e),t.speed=this._speed,t}},{key:"equals",value:function(e){return this===e||e instanceof r&&A.Property.equals(this._color,e._color)&&A.Property.equals(this._speed,e._speed)&&A.Property.equals(this._repeat,e._repeat)}}]),r}(wt);Object.defineProperties(Wr.prototype,{color:A.createPropertyDescriptor("color"),image:A.createPropertyDescriptor("image"),repeat:A.createPropertyDescriptor("repeat"),speed:A.createPropertyDescriptor("speed")});var jr=Wr;function Hr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Zr=r(70),Yr=function(e){d()(r,e);var t=Hr(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._image=void 0,e._imageSubscription=void 0,e.image=Zr,e}return f()(r,[{key:"getType",value:function(e){return A.Material.WallTrailType}},{key:"getValue",value:function(e,t){return t||(t={}),t.color=A.Property.getValueOrUndefined(this._color,e),t.image=A.Property.getValueOrUndefined(this._image,e),t.speed=this._speed,t}},{key:"equals",value:function(e){return this===e||e instanceof r&&A.Property.equals(this._color,e._color)&&A.Property.equals(this._speed,e._speed)}}]),r}(wt);Object.defineProperties(Yr.prototype,{color:A.createPropertyDescriptor("color"),speed:A.createPropertyDescriptor("speed"),image:A.createPropertyDescriptor("image")});var Jr=Yr,Kr=function(){function e(t){c()(this,e),t=t||{},this._definitionChanged=new A.Event,this._baseWaterColor=void 0,this._baseWaterColorSubscription=void 0,this.baseWaterColor=t.baseWaterColor||new A.Color(.2,.3,.6,1),this._blendColor=void 0,this._blendColorSubscription=void 0,this.blendColor=t.blendColor||new A.Color(0,1,.699,1),this._specularMap=void 0,this._specularMapSubscription=void 0,this.specularMap=t.specularMap||A.Material.DefaultImageId,this._normalMap=void 0,this._normalMapSubscription=void 0,this.normalMap=t.normalMap||A.Material.DefaultImageId,this.frequency=A.defaultValue(t.frequency,1e3),this.animationSpeed=A.defaultValue(t.animationSpeed,.01),this.amplitude=A.defaultValue(t.amplitude,10),this.specularIntensity=A.defaultValue(t.specularIntensity,.5)}return f()(e,[{key:"isConstant",get:function(){return!1}},{key:"definitionChanged",get:function(){return this._definitionChanged}},{key:"getType",value:function(e){return A.Material.WaterType}},{key:"getValue",value:function(e,t){return t||(t={}),t.baseWaterColor=A.Property.getValueOrUndefined(this._baseWaterColor,e),t.blendColor=A.Property.getValueOrUndefined(this._blendColor,e),t.specularMap=A.Property.getValueOrUndefined(this._specularMap,e),t.normalMap=A.Property.getValueOrUndefined(this._normalMap,e),t.frequency=this.frequency,t.animationSpeed=this.animationSpeed,t.amplitude=this.amplitude,t.specularIntensity=this.specularIntensity,t}},{key:"equals",value:function(t){return this===t||t instanceof e&&A.Property.equals(this._baseWaterColor,t._baseWaterColor)}}]),e}();Object.defineProperties(Kr.prototype,{baseWaterColor:A.createPropertyDescriptor("baseWaterColor"),blendColor:A.createPropertyDescriptor("blendColor"),specularMap:A.createPropertyDescriptor("specularMap"),normalMap:A.createPropertyDescriptor("normalMap"),frequency:A.createPropertyDescriptor("frequency"),animationSpeed:A.createPropertyDescriptor("animationSpeed"),amplitude:A.createPropertyDescriptor("amplitude"),specularIntensity:A.createPropertyDescriptor("specularIntensity")});var Xr=Kr;function Qr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var qr=function(e){d()(r,e);var t=Qr(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._image=void 0,e._text=void 0,e._textStyles=void 0,e._opacity=void 0,e.textStyles={font:n.font||"normal small-caps normal 70px 楷体",textBaseline:n.textBaseline||"middle",fill:n.fill||!0,stroke:n.stroke||!1,fillColor:n.fillColor||A.Color.BLUE,strokeColor:n.strokeColor||A.Color.BLACK,strokeWidth:n.strokeWidth||1,backgroundColor:n.backgroundColor||A.Color.TRANSPARENT,padding:n.padding||10},e.opacity=n.opacity||1,e.text=n.text||"",e._updateImage(),e}return f()(r,[{key:"getType",value:function(e){return A.Material.TextType}},{key:"getValue",value:function(e,t){return t||(t={}),t.image=this.image,t.opacity=this.opacity,t}},{key:"equals",value:function(e){return this===e||e instanceof r&&A.Property.equals(this._image,e._image)}},{key:"_updateImage",value:function(){var e=A.writeTextToCanvas(this._text,this._textStyles);this.options.customCanvasFUNC&&"function"==typeof this.options.customCanvasFUNC?this.canvas=this.options.customCanvasFUNC(e):this.canvas=e,this.image=e.toDataURL("image/png")}}]),r}(wt);Object.defineProperties(qr.prototype,{image:{get:function(){return this._image},set:function(e){this._image=e}},opacity:{get:function(){return this._opacity},set:function(e){this._opacity=e}},textStyles:{get:function(){return this._textStyles},set:function(e){this._textStyles=e}},text:{get:function(){return this._text},set:function(e){this._text=e,this._updateImage()}}});var $r=qr;function en(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?en(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):en(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var rn=function(){function e(){c()(this,e)}return f()(e,null,[{key:"createMaterialProperty",value:function(e,t){var r=A[e+"MaterialProperty"]||n[e+"MaterialProperty"];return["PolylineArrow","Color"].includes(e)?r?new r(t.color):null:r?new r(t):null}},{key:"createMaterial",value:function(e,t){return new A.Material.fromType(e,t)}},{key:"fromDraw",value:function(e,t){}},{key:"toJSON",value:function(t){if(t instanceof A.Color)return t.toCssHexString();if("function"==typeof t.getType){var r=t.getType(A.JulianDate.now());if(r){var n=t.getValue(A.JulianDate.now());return tn({type:r},e.objToStyle(n))}}else if(t instanceof A.Material){var i=t.type,o=t.uniforms;return tn({type:i},e.objToStyle(o))}return null}},{key:"objToStyle",value:function(e){var t={};if(X.isObject(e))for(var r in e)A.defined(e[r])&&(e[r]instanceof A.Color?t[r]=e[r].toCssHexString():e[r]instanceof A.Cartesian2?t[r]=[e[r].x,e[r].y]:e[r]instanceof A.Cartesian3?t[r]=[e[r].x,e[r].y,e[r].z]:e[r]instanceof A.ConstantProperty||"function"==typeof e[r].getValue?t[r]=e[r].getValue():t[r]=e[r]);return t}},{key:"toCesiumValue",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return X.isObject(t)&&t.type?r?e.createMaterial(t.type,e.convertJsonToCesiumObject(t)):e.createMaterialProperty(t.type,e.convertJsonToCesiumObject(t)):A.Color.fromCssColorString(t)}},{key:"convertJsonToCesiumObject",value:function(e){var t={};for(var r in e)e[r].toString().indexOf("#")>-1||e[r].toString().indexOf("rgb")>-1?t[r]=A.Color.fromCssColorString(e[r]):Array.isArray(e[r])&&2===e[r].length?t[r]=new A.Cartesian2(e[r][0],e[r][1]):Array.isArray(e[r])&&3===e[r].length?t[r]=new A.Cartesian3(e[r][0],e[r][1],e[r][2]):Array.isArray(e[r])&&4===e[r].length?t[r]=new A.Cartesian4(e[r][0],e[r][1],e[r][2],e[r][3]):t[r]=e[r];return t}}]),e}(),nn={},on=["scaleByDistance","translucencyByDistance","pixelOffsetScaleByDistance"],an=["distanceDisplayCondition"],sn=["color","outlineColor","backgroundColor","fillColor"],ln=["backgroundPadding","pixelOffset"],cn=["eyeOffset"],un=["material"],fn=function(){function e(){c()(this,e)}return f()(e,null,[{key:"toJSON",value:function(t){var r={};for(var n in t){var i;on.includes(n)?(r[n]=!0,r[n+"_near"]=t[n].near,r[n+"_far"]=t[n].far,r[n+"_nearValue"]=t[n].nearValue,r[n+"_farValue"]=t[n].farValue):an.includes(n)?(r[n]=!0,r[n+"_near"]=t[n].near,r[n+"_far"]=t[n].far):sn.includes(n)?r[n]=t[n]instanceof A.Color?t[n].toCssHexString():t[n]:ln.includes(n)?r[n]=t[n]instanceof A.Cartesian2?[t[n].x,t[n].y]:t[n]:cn.includes(n)?r[n]=t[n]instanceof A.Cartesian3?[t[n].x,t[n].y,t[n].z]:t[n]:un.includes(n)?r[n]=rn.toJSON(t[n]):null!==(i=t[n])&&void 0!==i&&i.getValue&&"function"==typeof t[n].getValue?t[n]=t[n].getValue(A.JulianDate.now()):X.isObject(t[n])?r[n]=e.toJSON(t[n]):r[n]=t[n]}return r}},{key:"toCesiumValue",value:function(t,r){var n={};for(var i in t)on.includes(i)&&t[i]?n[i]=new A.NearFarScalar(t[i+"_near"],t[i+"_nearValue"],t[i+"_far"],t[i+"_farValue"]):an.includes(i)&&t[i]?n[i]=new A.DistanceDisplayCondition(t[i+"_near"],t[i+"_far"]):sn.includes(i)?n[i]=t[i]instanceof A.Color?t[i]:A.Color.fromCssColorString(t[i]):ln.includes(i)?n[i]=t[i]instanceof A.Cartesian2?t[i]:new A.Cartesian2(t[i][0],t[i][1]):cn.includes(i)?n[i]=t[i]instanceof A.Cartesian3?t[i]:new A.Cartesian3(t[i][0],t[i][1],t[i][2]):un.includes(i)?n[i]=rn.toCesiumValue(t[i],r):X.isObject(t[i])?n[i]=e.toCesiumValue(t[i]):n[i]=t[i];return n}}]),e}(),hn="".concat("void clipLineSegmentToNearPlane(\n    vec3 p0,\n    vec3 p1,\n    out vec4 positionWC,\n    out bool clipped,\n    out bool culledByNearPlane,\n    out vec4 clippedPositionEC)\n{\n    culledByNearPlane = false;\n    clipped = false;\n\n    vec3 p0ToP1 = p1 - p0;\n    float magnitude = length(p0ToP1);\n    vec3 direction = normalize(p0ToP1);\n\n    // Distance that p0 is behind the near plane. Negative means p0 is\n    // in front of the near plane.\n    float endPoint0Distance =  czm_currentFrustum.x + p0.z;\n\n    // Camera looks down -Z.\n    // When moving a point along +Z: LESS VISIBLE\n    //   * Points in front of the camera move closer to the camera.\n    //   * Points behind the camrea move farther away from the camera.\n    // When moving a point along -Z: MORE VISIBLE\n    //   * Points in front of the camera move farther away from the camera.\n    //   * Points behind the camera move closer to the camera.\n\n    // Positive denominator: -Z, becoming more visible\n    // Negative denominator: +Z, becoming less visible\n    // Nearly zero: parallel to near plane\n    float denominator = -direction.z;\n\n    if (endPoint0Distance > 0.0 && abs(denominator) < czm_epsilon7)\n    {\n        // p0 is behind the near plane and the line to p1 is nearly parallel to\n        // the near plane, so cull the segment completely.\n        culledByNearPlane = true;\n    }\n    else if (endPoint0Distance > 0.0)\n    {\n        // p0 is behind the near plane, and the line to p1 is moving distinctly\n        // toward or away from it.\n\n        // t = (-plane distance - dot(plane normal, ray origin)) / dot(plane normal, ray direction)\n        float t = endPoint0Distance / denominator;\n        if (t < 0.0 || t > magnitude)\n        {\n            // Near plane intersection is not between the two points.\n            // We already confirmed p0 is behind the naer plane, so now\n            // we know the entire segment is behind it.\n            culledByNearPlane = true;\n        }\n        else\n        {\n            // Segment crosses the near plane, update p0 to lie exactly on it.\n            p0 = p0 + t * direction;\n\n            // Numerical noise might put us a bit on the wrong side of the near plane.\n            // Don't let that happen.\n            p0.z = min(p0.z, -czm_currentFrustum.x);\n\n            clipped = true;\n        }\n    }\n\n    clippedPositionEC = vec4(p0, 1.0);\n    positionWC = czm_eyeToWindowCoordinates(clippedPositionEC);\n}\n\nvec4 getPolylineWindowCoordinatesEC(vec4 positionEC, vec4 prevEC, vec4 nextEC, float expandDirection, float width, bool usePrevious, out float angle)\n{\n    // expandDirection +1 is to the _left_ when looking from positionEC toward nextEC.\n\n#ifdef POLYLINE_DASH\n    // Compute the window coordinates of the points.\n    vec4 positionWindow = czm_eyeToWindowCoordinates(positionEC);\n    vec4 previousWindow = czm_eyeToWindowCoordinates(prevEC);\n    vec4 nextWindow = czm_eyeToWindowCoordinates(nextEC);\n\n    // Determine the relative screen space direction of the line.\n    vec2 lineDir;\n    if (usePrevious) {\n        lineDir = normalize(positionWindow.xy - previousWindow.xy);\n    }\n    else {\n        lineDir = normalize(nextWindow.xy - positionWindow.xy);\n    }\n    angle = atan(lineDir.x, lineDir.y) - 1.570796327; // precomputed atan(1,0)\n\n    // Quantize the angle so it doesn't change rapidly between segments.\n    angle = floor(angle / czm_piOverFour + 0.5) * czm_piOverFour;\n#endif\n\n    vec4 clippedPrevWC, clippedPrevEC;\n    bool prevSegmentClipped, prevSegmentCulled;\n    clipLineSegmentToNearPlane(prevEC.xyz, positionEC.xyz, clippedPrevWC, prevSegmentClipped, prevSegmentCulled, clippedPrevEC);\n\n    vec4 clippedNextWC, clippedNextEC;\n    bool nextSegmentClipped, nextSegmentCulled;\n    clipLineSegmentToNearPlane(nextEC.xyz, positionEC.xyz, clippedNextWC, nextSegmentClipped, nextSegmentCulled, clippedNextEC);\n\n    bool segmentClipped, segmentCulled;\n    vec4 clippedPositionWC, clippedPositionEC;\n    clipLineSegmentToNearPlane(positionEC.xyz, usePrevious ? prevEC.xyz : nextEC.xyz, clippedPositionWC, segmentClipped, segmentCulled, clippedPositionEC);\n\n    if (segmentCulled)\n    {\n        return vec4(0.0, 0.0, 0.0, 1.0);\n    }\n\n    vec2 directionToPrevWC = normalize(clippedPrevWC.xy - clippedPositionWC.xy);\n    vec2 directionToNextWC = normalize(clippedNextWC.xy - clippedPositionWC.xy);\n\n    // If a segment was culled, we can't use the corresponding direction\n    // computed above. We should never see both of these be true without\n    // `segmentCulled` above also being true.\n    if (prevSegmentCulled)\n    {\n        directionToPrevWC = -directionToNextWC;\n    }\n    else if (nextSegmentCulled)\n    {\n        directionToNextWC = -directionToPrevWC;\n    }\n\n    vec2 thisSegmentForwardWC, otherSegmentForwardWC;\n    if (usePrevious)\n    {\n        thisSegmentForwardWC = -directionToPrevWC;\n        otherSegmentForwardWC = directionToNextWC;\n    }\n    else\n    {\n        thisSegmentForwardWC = directionToNextWC;\n        otherSegmentForwardWC =  -directionToPrevWC;\n    }\n\n    vec2 thisSegmentLeftWC = vec2(-thisSegmentForwardWC.y, thisSegmentForwardWC.x);\n\n    vec2 leftWC = thisSegmentLeftWC;\n    float expandWidth = width * 0.5;\n\n    // When lines are split at the anti-meridian, the position may be at the\n    // same location as the next or previous position, and we need to handle\n    // that to avoid producing NaNs.\n    if (!czm_equalsEpsilon(prevEC.xyz - positionEC.xyz, vec3(0.0), czm_epsilon1) && !czm_equalsEpsilon(nextEC.xyz - positionEC.xyz, vec3(0.0), czm_epsilon1))\n    {\n        vec2 otherSegmentLeftWC = vec2(-otherSegmentForwardWC.y, otherSegmentForwardWC.x);\n\n        vec2 leftSumWC = thisSegmentLeftWC + otherSegmentLeftWC;\n        float leftSumLength = length(leftSumWC);\n        leftWC = leftSumLength < czm_epsilon6 ? thisSegmentLeftWC : (leftSumWC / leftSumLength);\n\n        // The sine of the angle between the two vectors is given by the formula\n        //         |a x b| = |a||b|sin(theta)\n        // which is\n        //     float sinAngle = length(cross(vec3(leftWC, 0.0), vec3(-thisSegmentForwardWC, 0.0)));\n        // Because the z components of both vectors are zero, the x and y coordinate will be zero.\n        // Therefore, the sine of the angle is just the z component of the cross product.\n        vec2 u = -thisSegmentForwardWC;\n        vec2 v = leftWC;\n        float sinAngle = abs(u.x * v.y - u.y * v.x);\n        expandWidth = clamp(expandWidth / sinAngle, 0.0, width * 2.0);\n    }\n\n    vec2 offset = leftWC * expandDirection * expandWidth * czm_pixelRatio;\n    return vec4(clippedPositionWC.xy + offset, -clippedPositionWC.z, 1.0) * (czm_projection * clippedPositionEC).w;\n}\n\nvec4 getPolylineWindowCoordinates(vec4 position, vec4 previous, vec4 next, float expandDirection, float width, bool usePrevious, out float angle)\n{\n    vec4 positionEC = czm_modelViewRelativeToEye * position;\n    vec4 prevEC = czm_modelViewRelativeToEye * previous;\n    vec4 nextEC = czm_modelViewRelativeToEye * next;\n    return getPolylineWindowCoordinatesEC(positionEC, prevEC, nextEC, expandDirection, width, usePrevious, angle);\n}\n","\nattribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute vec3 prevPosition3DHigh;\nattribute vec3 prevPosition3DLow;\nattribute vec3 nextPosition3DHigh;\nattribute vec3 nextPosition3DLow;\nattribute vec2 expandAndWidth;\nattribute vec2 st;\nattribute float batchId;\nattribute vec4 color;\n\nvarying float v_width;\nvarying vec2 v_st;\nvarying float v_polylineAngle;\nvarying vec4 v_color;\n\nvoid main()\n{\n    float expandDir = expandAndWidth.x;\n    float width = abs(expandAndWidth.y) + 0.5;\n    bool usePrev = expandAndWidth.y < 0.0;\n\n    vec4 p = czm_computePosition();\n    vec4 prev = czm_computePrevPosition();\n    vec4 next = czm_computeNextPosition();\n\n    float angle;\n    vec4 positionWC = getPolylineWindowCoordinates(p, prev, next, expandDir, width, usePrev, angle);\n    gl_Position = czm_viewportOrthographic * positionWC;\n\n    v_width = width;\n    v_st.s = st.s;\n    v_st.t = czm_writeNonPerspective(st.t, gl_Position.w);\n    v_polylineAngle = angle;\n    v_color = color;\n}\n        "),dn={TRANSLATE:0,ROTATE:1,SCALE:2,UNIFORM_SCALE:3};function pn(e){return[Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]),Math.sqrt(e[4]*e[4]+e[5]*e[5]+e[6]*e[6]),Math.sqrt(e[8]*e[8]+e[9]*e[9]+e[10]*e[10])]}var yn=new A.Material({fabric:{uniforms:{color:A.Color.WHITE},source:"\n      #ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n\nuniform vec4 color;\n\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n    czm_material material = czm_getDefaultMaterial(materialInput);\n\n    vec2 st = materialInput.st;\n\n#ifdef GL_OES_standard_derivatives\n    float base = 1.0 - abs(fwidth(st.s)) * 10.0 * czm_pixelRatio;\n#else\n    float base = 0.975; // 2.5% of the line will be the arrow head\n#endif\n\n    vec2 center = vec2(1.0, 0.5);\n    float ptOnUpperLine = 1.0;\n    float ptOnLowerLine = 0.0;\n\n    float halfWidth = 0.15;\n    float s = step(0.5 - halfWidth, st.t);\n    s *= 1.0 - step(0.5 + halfWidth, st.t);\n    s *= 1.0 - step(base, st.s);\n\n    float t = step(base, materialInput.st.s);\n    t *= 1.0 - step(ptOnUpperLine, st.t);\n    t *= step(ptOnLowerLine, st.t);\n\n    // Find the distance from the closest separator (region between two colors)\n    float dist;\n    if (st.s < base)\n    {\n        float d1 = abs(st.t - (0.5 - halfWidth));\n        float d2 = abs(st.t - (0.5 + halfWidth));\n        dist = min(d1, d2);\n    }\n    else\n    {\n        float d1 = czm_infinity;\n        if (st.t < 0.5 - halfWidth && st.t > 0.5 + halfWidth)\n        {\n            d1 = abs(st.s - base);\n        }\n        float d2 = abs(st.t - ptOnUpperLine);\n        float d3 = abs(st.t - ptOnLowerLine);\n        dist = min(min(d1, d2), d3);\n    }\n\n    vec4 outsideColor = vec4(0.0);\n    vec4 currentColor = mix(outsideColor, color, clamp(s + t, 0.0, 1.0));\n    vec4 outColor = czm_antialias(outsideColor, color, currentColor, dist);\n\n    outColor = czm_gammaCorrect(outColor);\n    material.diffuse = outColor.rgb;\n    material.alpha = outColor.a;\n    return material;\n}\n"}});var mn=new A.BoundingSphere;var vn=new A.Cartesian3,gn=new A.Cartographic;function An(e,t){var r=t.context,n=Math.max(r.drawingBufferWidth,r.drawingBufferHeight),i=e.modelMatrix;if(vn.x=i[12],vn.y=i[13],vn.z=i[14],t.camera._scene.mode!==A.SceneMode.SCENE3D){var o=t.mapProjection,a=o.ellipsoid.cartesianToCartographic(vn,gn);o.project(a,vn),A.Cartesian3.fromElements(vn.z,vn.x,vn.y,vn)}var s=function(e,t,r){return mn.center=e,mn.radius=t,r.camera.getPixelSize(mn,r.context.drawingBufferWidth,r.context.drawingBufferHeight)}(vn,1,t),l=1/s,c=1;return Math.min(2*l*1,n)<e.length&&(c=e.length*s/2),c}var _n=function(){function e(t){var r,n,i,o;c()(this,e),t=A.defaultValue(t,A.defaultValue.EMPTY_OBJECT),A.defined(t.viewer)||new A.DeveloperError("viewer must be assigned!"),A.defined(t.model)||new A.DeveloperError("model must be assigned!"),A.defined(t.model.modelMatrix)||new A.DeveloperError("model must have the modelMatrix attribute!"),this.viewer=t.viewer,this.model=t.model,this.length=A.defaultValue(t.length,300),this._length=void 0,this.width=A.defaultValue(t.width,20),this._width=void 0,this.show=A.defaultValue(t.show,!0),this.id=t.id,this._id=void 0,this.type=A.defaultValue(t.type,dn.TRANSLATE),this._type=void 0,this.xColor=A.defaultValue(t.xColor,A.Color.RED),this._xColor=void 0,this._xOriginColor=this.xColor,this.yColor=A.defaultValue(t.yColor,A.Color.GREEN),this._yColor=void 0,this._yOriginColor=this.yColor,this.zColor=A.defaultValue(t.zColor,A.Color.BLUE),this._zColor=void 0,this._zOriginColor=this.zColor,this.highlightColor=A.defaultValue(t.highlightColor,A.Color.YELLOW),this._highlightColor=void 0,this._primitive=void 0,this._itemMatrix=this.model.modelMatrix.clone(),this.applyTransform=A.defaultValue(t.applyTransform,!0),this.onDragMoving=t.onDragMoving,this.onDragStart=t.onDragStart,this.onDragEnd=t.onDragEnd,this.handler=new A.ScreenSpaceEventHandler(this.viewer.canvas),this.viewer.scene.primitives.add(this),r=this.handler,n=this.viewer,i=this,o=null,r.setInputAction((function(e){var t=n.scene.pick(e.position);A.defined(t)&&(t.primitive===i?(o=t,n.scene.screenSpaceCameraController.enableRotate=!1,n.scene.screenSpaceCameraController.enableTranslate=!1,"function"==typeof i.onDragStart&&i.onDragStart()):(o=null,n.scene.screenSpaceCameraController.enableRotate=!0,n.scene.screenSpaceCameraController.enableTranslate=!0))}),A.ScreenSpaceEventType.LEFT_DOWN),r.setInputAction((function(){o&&(o.primitive.xColor=A.Color.RED,o.primitive.yColor=A.Color.GREEN,o.primitive.zColor=A.Color.BLUE,o=null,"function"==typeof i.onDragEnd&&i.onDragEnd()),n.scene.screenSpaceCameraController.enableRotate=!0,n.scene.screenSpaceCameraController.enableTranslate=!0}),A.ScreenSpaceEventType.LEFT_UP),r.setInputAction((function(e){if(o){var t=i.modelMatrix,r=new A.Cartesian3(t[12],t[13],t[14]),a=A.Transforms.eastNorthUpToFixedFrame(r),s=A.SceneTransforms.wgs84ToWindowCoordinates(n.scene,r,new A.Cartesian2),l=new A.Cartesian2(e.endPosition.x-e.startPosition.x,e.endPosition.y-e.startPosition.y);if(i.type===dn.TRANSLATE){var c=new A.Matrix4,u=new A.Cartesian3,f=new A.Cartesian3;switch(o.id.axis){case"x":A.Matrix4.multiplyByPoint(a,A.Cartesian3.UNIT_X,u);break;case"y":A.Matrix4.multiplyByPoint(a,A.Cartesian3.UNIT_Y,u);break;case"z":A.Matrix4.multiplyByPoint(a,A.Cartesian3.UNIT_Z,u)}A.Cartesian3.subtract(u,r,f);var h=A.SceneTransforms.wgs84ToWindowCoordinates(n.scene,u,new A.Cartesian2),d=A.Cartesian2.subtract(h,s,new A.Cartesian2),p=A.Cartesian2.angleBetween(l,d),y=p<A.Math.PI_OVER_TWO?1:-1,m=A.Cartesian2.magnitude(l)*Math.abs(Math.cos(p)),v=n.camera.getPixelSize(new A.BoundingSphere(r,A.Cartesian3.magnitude(f)),n.canvas.width,n.canvas.height);A.Matrix4.fromTranslation(A.Cartesian3.multiplyByScalar(f,y*v*m,new A.Cartesian3),c);var g=A.Matrix4.multiply(c,i.modelMatrix,new A.Matrix4);if(!g[12])return;if(i.modelMatrix[12]=g[12],i.modelMatrix[13]=g[13],i.modelMatrix[14]=g[14],"function"==typeof i.onDragMoving&&i.onDragMoving({type:dn.TRANSLATE,result:new A.Cartesian3(g[12],g[13],g[14])}),i.applyTransform){var _=i.model.modelMatrix.clone();_[12]=g[12],_[13]=g[13],_[14]=g[14],i.model.modelMatrix=_}}else if(i.type===dn.ROTATE){var C,E=A.Cartesian2.subtract(new A.Cartesian2(e.startPosition.x,e.startPosition.y),s,new A.Cartesian2),x=A.Cartesian2.subtract(new A.Cartesian2(e.endPosition.x,e.endPosition.y),s,new A.Cartesian2),B=A.Cartesian2.cross(E,x)<0?1:-1,T=A.Cartesian2.angleBetween(E,x),b=A.Cartesian3.subtract(n.scene.camera.position,r,new A.Cartesian3),P=new A.Matrix3,M=new A.Cartesian3;switch(o.id.axis){case"x":A.Matrix4.multiplyByPointAsVector(i.modelMatrix,A.Cartesian3.UNIT_X,M),C=A.Cartesian3.dot(M,b)>0?1:-1,A.Matrix3.fromRotationX(T*C*B,P);break;case"y":A.Matrix4.multiplyByPointAsVector(i.modelMatrix,A.Cartesian3.UNIT_Y,M),C=A.Cartesian3.dot(M,b)>0?1:-1,A.Matrix3.fromRotationY(T*C*B,P);break;case"z":A.Matrix4.multiplyByPointAsVector(i.modelMatrix,A.Cartesian3.UNIT_Z,M),C=A.Cartesian3.dot(M,b)>0?1:-1,A.Matrix3.fromRotationZ(T*C*B,P)}A.Matrix4.multiplyByMatrix3(i.modelMatrix,P,i.modelMatrix);var w=pn(i.model.modelMatrix),I=A.Matrix4.multiply(i.modelMatrix,A.Matrix4.fromScale(new A.Cartesian3(w[0],w[1],w[2])),new A.Matrix4);"function"==typeof i.onDragMoving&&i.onDragMoving({type:dn.ROTATE,result:A.Transforms.fixedFrameToHeadingPitchRoll(I)}),i.applyTransform&&(i.model.modelMatrix=I)}else if(i.type===dn.SCALE){var D=new A.Matrix4,S=new A.Cartesian3,O=new A.Cartesian2,R=new A.Cartesian2,L=pn(i.model.modelMatrix);switch(o.id.axis){case"x":A.Matrix4.multiplyByPoint(i.modelMatrix,A.Cartesian3.UNIT_X,S),A.SceneTransforms.wgs84ToDrawingBufferCoordinates(n.scene,S,O),A.Cartesian2.subtract(O,s,R);var k=A.Cartesian2.dot(R,l)>0?1.05:.95;if(L[0]<=.001&&.95===k)return;A.Matrix4.fromScale(new A.Cartesian3(k,1,1),D);break;case"y":A.Matrix4.multiplyByPoint(i.modelMatrix,A.Cartesian3.UNIT_Y,S),A.SceneTransforms.wgs84ToDrawingBufferCoordinates(n.scene,S,O),A.Cartesian2.subtract(O,s,R);var F=A.Cartesian2.dot(R,l)>0?1.05:.95;if(A.Matrix4.fromScale(new A.Cartesian3(1,F,1),D),L[1]<=.001&&.95===F)return;break;case"z":A.Matrix4.multiplyByPoint(i.modelMatrix,A.Cartesian3.UNIT_Z,S),A.SceneTransforms.wgs84ToDrawingBufferCoordinates(n.scene,S,O),A.Cartesian2.subtract(O,s,R);var G=A.Cartesian2.dot(R,l)>0?1.05:.95;if(A.Matrix4.fromScale(new A.Cartesian3(1,1,G),D),L[2]<=.001&&.95===G)return}var N=A.Matrix4.multiply(i.model.modelMatrix,D,new A.Matrix4);"function"==typeof i.onDragMoving&&i.onDragMoving({type:dn.SCALE,result:pn(N)}),i.applyTransform&&(i.model.modelMatrix=N)}else if(i.type===dn.UNIFORM_SCALE){var z=A.Cartesian2.subtract(new A.Cartesian2(e.startPosition.x,e.startPosition.y),s,new A.Cartesian2),U=A.Cartesian2.dot(z,l)>0?1.05:.95,V=A.Matrix4.fromUniformScale(U,new A.Matrix4);if(pn(i.model.modelMatrix)[0]<=.001&&.95===U)return;var W=A.Matrix4.multiply(i.model.modelMatrix,V,new A.Matrix4);"function"==typeof i.onDragMoving&&i.onDragMoving({type:dn.SCALE,result:pn(W)}),i.applyTransform&&(i.model.modelMatrix=W)}}else{var j=n.scene.pick(e.endPosition);if(A.defined(j)&&j.primitive===i)if(i.type===dn.UNIFORM_SCALE)n.canvas.style.cursor="pointer",i.xColor=i._highlightColor,i.yColor=i._highlightColor,i.zColor=i._highlightColor;else switch(j.id.axis){case"x":i.xColor=i._highlightColor,i.yColor=i._yOriginColor,i.zColor=i._zOriginColor,n.canvas.style.cursor="pointer";break;case"y":i.yColor=i._highlightColor,i.xColor=i._xOriginColor,i.zColor=i._zOriginColor,n.canvas.style.cursor="pointer";break;case"z":i.zColor=i._highlightColor,i.xColor=i._xOriginColor,i.yColor=i._yOriginColor,n.canvas.style.cursor="pointer";break;default:i.xColor=i._xOriginColor,i.yColor=i._yOriginColor,i.zColor=i._zOriginColor,n.canvas.style.cursor="default"}else n.canvas.style.cursor="default",i.xColor=i._xOriginColor,i.yColor=i._yOriginColor,i.zColor=i._zOriginColor}}),A.ScreenSpaceEventType.MOUSE_MOVE)}return f()(e,[{key:"update",value:function(e){if(this.show){if(!A.defined(this._primitive)||!A.Matrix4.equals(this._itemMatrix,this.model.modelMatrix)||this._length!==this.length||this._width!==this.width||this._id!==this.id||this._xColor!==this.xColor||this._yColor!==this.yColor||this._zColor!==this.zColor||this._type!==this.type||this._highlightColor!==this.highlightColor){if(this.type===dn.TRANSLATE){var t=this.model.modelMatrix,r=new A.Cartesian3(t[12],t[13],t[14]);this.modelMatrix=A.Transforms.eastNorthUpToFixedFrame(r)}else{if(this.type!==dn.ROTATE&&this.type!==dn.SCALE&&this.type!==dn.UNIFORM_SCALE)return void(A.defined(this._primitive)&&this._primitive.destroy());var n=this.model.modelMatrix.clone(),i=pn(n);0!==i[0]&&0!==i[1]&&0!==i[2]||new A.DeveloperError("Can't get transform infomation from modelMatrix since scale is 0."),n[0]/=i[0],n[1]/=i[0],n[2]/=i[0],n[4]/=i[1],n[5]/=i[1],n[6]/=i[1],n[8]/=i[2],n[9]/=i[2],n[10]/=i[2],this.modelMatrix=n}this._itemMatrix=this.model.modelMatrix.clone(),this._length=this.length,this._width=this.width,this._id=this.id,this._xColor=this.xColor,this._yColor=this.yColor,this._zColor=this.zColor,this._type=this.type,this._highlightColor=this.highlightColor,A.defined(this._primitive)&&this._primitive.destroy(),0===this.modelMatrix[12]&&0===this.modelMatrix[13]&&0===this.modelMatrix[14]&&(this.modelMatrix[14]=.01);var o=A.Matrix4.IDENTITY.clone();o[14]=.01;var a,s=[],l=[],c=[];if(this.type===dn.TRANSLATE||this.type===dn.SCALE||this.type===dn.UNIFORM_SCALE)a=A.Material.fromType("PolylineArrow"),s=[A.Cartesian3.ZERO,A.Cartesian3.UNIT_X],l=[A.Cartesian3.ZERO,A.Cartesian3.UNIT_Y],c=[A.Cartesian3.ZERO,A.Cartesian3.UNIT_Z],this.type!==dn.TRANSLATE&&(a=yn);else if(this.type===dn.ROTATE){a=A.Material.fromType("Color",{color:A.Color.WHITE});for(var u=0;u<=64;u+=1)s.push(A.Matrix3.multiplyByVector(A.Matrix3.fromRotationX(u*(2*A.Math.PI)/64),A.Cartesian3.UNIT_Y,new A.Cartesian3));for(var f=0;f<=64;f+=1)l.push(A.Matrix3.multiplyByVector(A.Matrix3.fromRotationY(f*(2*A.Math.PI)/64),A.Cartesian3.UNIT_Z,new A.Cartesian3));for(var h=0;h<=64;h+=1)c.push(A.Matrix3.multiplyByVector(A.Matrix3.fromRotationZ(h*(2*A.Math.PI)/64),A.Cartesian3.UNIT_X,new A.Cartesian3))}var d=this.type===dn.ROTATE?this.width/2:this.width,p=new A.GeometryInstance({geometry:new A.PolylineGeometry({positions:s,width:d,vertexFormat:A.PolylineMaterialAppearance.VERTEX_FORMAT,arcType:A.ArcType.NONE}),modelMatrix:o,id:{axis:"x"},pickPrimitive:this,attributes:{color:A.ColorGeometryInstanceAttribute.fromColor(this.xColor),depthFailColor:A.ColorGeometryInstanceAttribute.fromColor(A.Color.multiplyByScalar(this.xColor,.5,new A.Color))}}),y=new A.GeometryInstance({geometry:new A.PolylineGeometry({positions:l,width:d,vertexFormat:A.PolylineMaterialAppearance.VERTEX_FORMAT,arcType:A.ArcType.NONE}),modelMatrix:o,id:{axis:"y"},pickPrimitive:this,attributes:{color:A.ColorGeometryInstanceAttribute.fromColor(this.yColor),depthFailColor:A.ColorGeometryInstanceAttribute.fromColor(A.Color.multiplyByScalar(this.yColor,.5,new A.Color))}}),m=new A.GeometryInstance({geometry:new A.PolylineGeometry({positions:c,width:d,vertexFormat:A.PolylineMaterialAppearance.VERTEX_FORMAT,arcType:A.ArcType.NONE}),modelMatrix:o,id:{axis:"z"},pickPrimitive:this,attributes:{color:A.ColorGeometryInstanceAttribute.fromColor(this.zColor),depthFailColor:A.ColorGeometryInstanceAttribute.fromColor(A.Color.multiplyByScalar(this.zColor,.5,new A.Color))}}),v=new A.PolylineMaterialAppearance({material:a,vertexShaderSource:hn,fragmentShaderSource:"\n#ifdef VECTOR_TILE\nuniform vec4 u_highlightColor;\n#endif\n\nvarying vec2 v_st;\nvarying vec4 v_color;\n\nvoid main()\n{\n    czm_materialInput materialInput;\n\n    vec2 st = v_st;\n    st.t = czm_readNonPerspective(st.t, gl_FragCoord.w);\n\n    materialInput.s = st.s;\n    materialInput.st = st;\n    materialInput.str = vec3(st, 0.0);\n\n    czm_material material = czm_getMaterial(materialInput);\n    gl_FragColor = vec4((material.diffuse + material.emission) * v_color.rgb, material.alpha * v_color.w);\n#ifdef VECTOR_TILE\n    gl_FragColor *= u_highlightColor;\n#endif\n\n    czm_writeLogDepth();\n}\n        "});this._primitive=new A.Primitive({geometryInstances:[p,y,m],appearance:v,depthFailAppearance:v,asynchronous:!1,releaseGeometryInstances:!1})}var g=An(this,e),_=A.Matrix4.multiplyByUniformScale(this.modelMatrix,g,new A.Matrix4);this._primitive.modelMatrix=_,this._primitive.update(e)}}},{key:"isDestroyed",value:function(){return!1}},{key:"destroy",value:function(){return this.handler&&this.handler.destroy(),this.handler=null,this.viewer.scene.primitives.remove(this),A.destroyObject(this)}}]),e}();_n.EditType=Object.freeze(dn);var Cn=_n;function En(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?En(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):En(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Bn=function(){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c()(this,e);var n=X.uuid(),i={uuid:n,id:n,groupId:-1};this.options=xn(xn({},i),r),this._groupId=this.options.groupId,this._id=this.options.id,this._name=this.options.name||"未命名",this._style=this.options.style||{},this._attr=this.options.attr||{},this._delegate=void 0,this._outlineDelegate=[],this._layer=void 0,this._state=void 0,this._show=null===(t=r.show)||void 0===t||t,this._def_style={},this._allowDrillPicking=!1,this._contextMenu=[],this._graphicEvent=new Z,this._type=void 0,this.on(O.ADD,this._onAdd,this),this.on(O.REMOVE,this._onRemove,this)}return f()(e,[{key:"graphicId",get:function(){return this._id},set:function(e){this._id=e}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name},set:function(e){return this._name=e,this}},{key:"groupId",get:function(){return this._groupId},set:function(e){this._groupId=e}},{key:"show",get:function(){return this._show},set:function(e){var t=this;return this._show=e,this._delegate&&(this._delegate.show=this._show),this._outlineDelegate&&this._outlineDelegate.forEach((function(e){e.show=t._show})),this}},{key:"attr",get:function(){return this._attr},set:function(e){return this._attr=e,this}},{key:"allowDrillPicking",get:function(){return this._allowDrillPicking},set:function(e){return this._allowDrillPicking=e,this}},{key:"graphicEvent",get:function(){return this._graphicEvent}},{key:"delegate",get:function(){return this._delegate}},{key:"state",get:function(){return this._state}},{key:"contextMenu",get:function(){return this._contextMenu},set:function(e){return this._contextMenu=e,this}},{key:"center",get:function(){return this.position}},{key:"earthPosition",get:function(){return te.transformWGS84ToCartesian(this.center)}},{key:"boundingRectangle",get:function(){return this.positions?A.Rectangle.fromCartesianArray(te.transformWGS84ArrayToCartesianArray(this.positions)):null}},{key:"boundingRectangleLngLat",get:function(){var e=this.boundingRectangle;return e?{minx:A.Math.toDegrees(e.west),miny:A.Math.toDegrees(e.south),maxx:A.Math.toDegrees(e.east),maxy:A.Math.toDegrees(e.north)}:null}},{key:"style",get:function(){return this._style}},{key:"label",get:function(){return this.delegate.label}},{key:"cartesians",get:function(){return this.positions?te.transformWGS84ArrayToCartesianArray(this.positions):[]}},{key:"cartesian",get:function(){return this.position?te.transformWGS84ToCartesian(this.position):null}},{key:"callbackProperty",get:function(){return this._position instanceof A.CallbackProperty||this._position instanceof A.SampledPositionProperty||this._positions instanceof A.CallbackProperty||this._positions instanceof A.SampledPositionProperty}},{key:"modelMatrix",get:function(){return this._delegate.computeModelMatrix(this._layer._viewer.clock.currentTime)},set:function(e){var t=new A.Cartesian3(e[12],e[13],e[14]);this.position=te.transformCartesianToWGS84(t),this.orientation=A.Transforms.headingPitchRollQuaternion(t,A.Transforms.fixedFrameToHeadingPitchRoll(e))}},{key:"type",get:function(){return this._type||void 0}},{key:"positionEditor",get:function(){return this._positionEditor}},{key:"enablePositionEditor",get:function(){return!!this._positionEditor},set:function(e){var t,r;if(null!==(t=this._layer)&&void 0!==t&&null!==(r=t._viewer)&&void 0!==r&&r.delegate)if(e){var n=this._positionEditor||new Cn({viewer:this._layer._viewer.delegate,model:this});this._positionEditor=n}else this._positionEditor&&(this._positionEditor.destroy(),this._positionEditor=void 0)}},{key:"_mountedHook",value:function(){this._style=X.merge({},this._def_style,this._style)}},{key:"_addedHook",value:function(){var e,t,r=this;if(!this._delegate)return!1;this._delegate instanceof Array?this._delegate.forEach((function(e){var t;if(e.layerId=null===(t=r._layer)||void 0===t?void 0:t.layerId,e.graphicId=r._id,e instanceof A.PrimitiveCollection)for(var n=e.length,i=0;i<n;++i){var o,a=r._primitives.get(i);a.layerId=null===(o=r._layer)||void 0===o?void 0:o.layerId,a.graphicId=r._id}})):(this._delegate.layerId=null===(e=this._layer)||void 0===e?void 0:e.layerId,this._delegate.graphicId=this._id);this._delegate_label&&(this._delegate_label.layerId=null===(t=this._layer)||void 0===t?void 0:t.layerId,this._delegate_label.graphicId=this._id);this._outlineDelegate&&this._outlineDelegate.forEach((function(e){var t;e.layerId=null===(t=r._layer)||void 0===t?void 0:t.layerId,e.graphicId=r._id})),this.show=this._show}},{key:"_removedHook",value:function(){}},{key:"_onAdd",value:function(e){var t,r,n,i,o,a=this;if(e){if(this._layer=e,this._mountedHook&&this._mountedHook(),this.setStyle(this._style),null!==(t=this._layer)&&void 0!==t&&null!==(r=t.delegate)&&void 0!==r&&r.entities&&this._delegate)this._layer.delegate.entities.add(this._delegate),this._outlineDelegate&&this._outlineDelegate.forEach((function(e){a._layer.delegate.entities.add(e)}));else if(null!==(n=this._layer)&&void 0!==n&&null!==(i=n.delegate)&&void 0!==i&&i.add&&this._delegate)this._layer.delegate.add(this._delegate);else if(null!==(o=this._layer)&&void 0!==o&&o.dataSource&&this._delegate instanceof A.Entity){var s;null===(s=this._layer)||void 0===s||s.dataSource.entities.add(this._delegate),this._outlineDelegate&&this._outlineDelegate.forEach((function(e){var t;null===(t=a._layer)||void 0===t||t.dataSource.entities.add(e)}))}this._delegate_label&&this._layer.labelCollection.add&&(this._delegate_label=this._layer.labelCollection.add(xn({position:te.transformWGS84ToCartesian(this.center)},this._delegate_label))),this._addedHook&&this._addedHook(),this._state=E.ADDED}}},{key:"_onRemove",value:function(){var e,t,r,n,i,o=this;if(this._layer&&this._delegate){if(null!==(e=this._layer)&&void 0!==e&&null!==(t=e.delegate)&&void 0!==t&&t.entities)this._layer.delegate.entities.remove(this._delegate),this._outlineDelegate&&this._outlineDelegate.forEach((function(e){o._layer.delegate.entities.remove(e)}));else if(null!==(r=this._layer)&&void 0!==r&&null!==(n=r.delegate)&&void 0!==n&&n.remove)this._layer.delegate.remove(this._delegate);else if(null!==(i=this._layer)&&void 0!==i&&i.dataSource&&this._delegate instanceof A.Entity){var a;null===(a=this._layer)||void 0===a||a.dataSource.entities.remove(this._delegate),this._outlineDelegate&&this._outlineDelegate.forEach((function(e){var t;null===(t=o._layer)||void 0===t||t.dataSource.entities.remove(e)}))}this._delegate_label&&this._layer.labelCollection.remove&&this._layer.labelCollection.remove(this._delegate_label)&&(this._delegate_label=null),this._removeUpdateEvent&&this._removeUpdateEvent(),this._positionEditor&&(this._positionEditor.destroy(),this._positionEditor=void 0),this._removedHook&&this._removedHook(),this._state=E.REMOVED}}},{key:"setLabel",value:function(e,t){return this._style.label=X.merge(this._style.label||{},t,{text:e}),this._delegate&&(this._delegate.label=this._style.label),this}},{key:"setStyle",value:function(e){return e&&0!==Object.keys(e).length?(this._style=X.merge({},this._style,e),this._style.label&&this.setLabel(this._style.label.text,this._style.label),this._style.outlineStyle&&this.setOutlineStyle&&this.setOutlineStyle(),X.merge(this._delegate[this._editType||this.type],this._style),this):this}},{key:"setOutlineStyle",value:function(){var e=this;if(this._outlineDelegate.length>0){var t=this.callbackProperty?new A.CallbackProperty((function(t){return e.outlinePositions}),!1):this.outlinePositions;this._outlineDelegate.forEach((function(r){r.polyline.positions=t,X.merge(r.polyline,e._style.outlineStyle)}))}else{var r=this.callbackProperty?new A.CallbackProperty((function(t){return e.outlinePositions}),!1):this.outlinePositions,n=new A.Entity({polyline:xn({positions:r},this._style.outlineStyle)});this._outlineDelegate.push(n)}}},{key:"setModel",value:function(e,t){return this._delegate&&(this._delegate.model=xn(xn({},t),{},{uri:e})),this}},{key:"_getGeoJsonGeometry",value:function(){}},{key:"_styleToJson",value:function(){return fn.toJSON(this.style)}},{key:"toGeoJSON",value:function(e){var t={type:"Feature",properties:{name:this.name,type:this.type,group:this.groupId,id:this.id,style:this._styleToJson()},geometry:this._getGeoJsonGeometry(e)};return this._primitive&&(t.properties.primitive=!0),t}},{key:"remove",value:function(){return this._layer&&this._layer.removeGraphic(this),this}},{key:"addTo",value:function(e){return e&&e.addGraphic&&e.addGraphic(this),this}},{key:"flyTo",value:function(e){this._layer._viewer.flyTo(this._delegate,e)}},{key:"on",value:function(e,t,r){return this._graphicEvent.on(e,t,r||this)}},{key:"off",value:function(e,t,r){return this._graphicEvent.off(e,t,r||this),this}},{key:"fire",value:function(e,t){return this._graphicEvent.fire(e,t),this}}],[{key:"registerType",value:function(e){e&&(nn[e.toLocaleUpperCase()]=e)}},{key:"getGraphicType",value:function(e){return nn[e.toLocaleUpperCase()]||void 0}}]),e}(),Tn=r(6),bn=r.n(Tn);function Pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Mn=function(e){d()(r,e);var t=Pn(r);function r(e){var n;return c()(this,r),(n=t.call(this,e))._delegate_label=null,n._boundingSphere=null,n._primitive=!0,n._state=E.INITIALIZED,n}return f()(r,[{key:"boundingSphere",get:function(){if(!this._boundingSphere){var e=[];if(this._delegate instanceof A.Primitive&&this._delegate.ready){this._delegate._instanceBoundingSpheres.forEach((function(t){e.push(t)})),this._boundingSphere=A.BoundingSphere.fromBoundingSpheres(e);var t=A.Matrix4.multiplyByPoint(this._delegate.modelMatrix,this._boundingSphere.center,new A.Cartesian3);this._boundingSphere=new A.BoundingSphere(t,this._boundingSphere.radius)}}return this._boundingSphere}},{key:"label",get:function(){return this._delegate_label}},{key:"show",get:function(){return this._show},set:function(e){var t,r=this;return this._show=e,this._delegate&&(null===(t=this._delegate)||void 0===t?void 0:t.type)!==this.type&&(this._delegate.show=this._show),this._delegate instanceof Array&&this._delegate.forEach((function(e){e.show=r._show})),this._delegate_label&&(this._delegate_label.show=this._show),this}},{key:"modelMatrix",get:function(){var e;return null===(e=this._delegate)||void 0===e?void 0:e.modelMatrix}},{key:"_organizePrimitive",value:function(e){var t=this,r={geometryInstances:e,appearance:this._organizeAppearance()};this.modelMatrix&&(r.modelMatrix=this.modelMatrix);return["depthFailAppearance","modelMatrix","allowPicking","vertexCacheOptimize","interleave","compressVertices","releaseGeometryInstances","cull","asynchronous","debugShowBoundingVolume","shadows","classificationType","show"].forEach((function(e){A.defined(t.options[e])&&(r[e]=t.options[e])})),this.style.clampToGround?new A.GroundPrimitive(r):new A.Primitive(r)}},{key:"_organizeGeometry",value:function(){}},{key:"_organizeGeometryInstance",value:function(e){var t=new A.GeometryInstance({geometry:e,id:this._id}),r={};return this.style.color&&(r.color=A.ColorGeometryInstanceAttribute.fromColor(this.style.color)),this.style.distanceDisplayCondition&&(r.distanceDisplayCondition=new A.DistanceDisplayConditionGeometryInstanceAttribute(this.style.distanceDisplayCondition.near,this.style.distanceDisplayCondition.far)),Object.keys(r).length>0&&(t.attributes=r),this.options.attributes&&(t.attributes=this.options.attributes),t}},{key:"_organizeAppearance",value:function(){var e=this,t={};return["flat","faceForward","translucent","closed","materialSupport","vertexShaderSource","fragmentShaderSource","renderState"].forEach((function(r){A.defined(e.options[r])&&(t[r]=e.options[r])})),this.options.appearance?this.options.appearance:this.style.material?(t.material=this.style.material,new A.MaterialAppearance(t)):new A.PerInstanceColorAppearance(t)}},{key:"_mountedHook",value:function(){bn()(v()(r.prototype),"_mountedHook",this).call(this);var e=this._organizeGeometry();if(e){var t=this._organizeGeometryInstance(e);this._delegate=this._layer.primitiveCollection.add(this._organizePrimitive(t))}}},{key:"_removedHook",value:function(){this._layer.primitiveCollection.remove(this._delegate),this._delegate=null}},{key:"setLabel",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!this._delegate_label&&this._layer&&(this._delegate_label=this._layer.labelCollection.add({position:te.transformWGS84ToCartesian(this.center)}),this.state===E.ADDED&&(this._delegate_label.layerId=null===(t=this._layer)||void 0===t?void 0:t.layerId,this._delegate_label.graphicId=this._id));return null===this._delegate_label&&(this._delegate_label={}),this._style.label=X.merge(this._style.label||{},r,{text:e}),X.merge(this._delegate_label,this._style.label),this}},{key:"setStyle",value:function(e){return e&&0!==Object.keys(e).length?(this._style=X.merge({},this._style,this._def_style,e),this._style.label&&this.setLabel(this._style.label.text,this._style.label),A.defined(this._style.heading)&&(this.heading=this._style.heading),A.defined(this._style.pitch)&&(this.pitch=this._style.pitch),A.defined(this._style.roll)&&(this.roll=this._style.roll),X.merge(this._delegate,this._style),this):this}},{key:"flyTo",value:function(e){var t=this;this.boundingSphere?this._layer._viewer.camera.flyToBoundingSphere(this.boundingSphere,e):this._delegate instanceof A.Primitive&&this._delegate.readyPromise&&this._delegate.readyPromise.then((function(){t._layer._viewer.camera.flyToBoundingSphere(t.boundingSphere,e)}))}}]),r}(Bn);function wn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var In=function(e){d()(r,e);var t=wn(r);function r(e){var n,i;return c()(this,r),(i=t.call(this,e))._position=se.parsePosition(e.position),i._near=null!==(n=e.near)&&void 0!==n?n:0,i._far=e.far||65e5,i._zOffset=0,i._zScale=1,i._alpha=1,i._delegate=[],i._instanceIds=[],i._boundingSpheres=[],i._delegate_label={},i}return f()(r,[{key:"boundingSphere",get:function(){if(!this._boundingSphere){this._boundingSphere=A.BoundingSphere.fromBoundingSpheres(this._boundingSpheres);var e=A.Matrix4.multiplyByPoint(this.modelMatrix,this._boundingSphere.center,new A.Cartesian3);this._boundingSphere=new A.BoundingSphere(e,this._boundingSphere.radius)}return this._boundingSphere}},{key:"modelMatrix",get:function(){return this._delegate[0].modelMatrix}},{key:"position",get:function(){return this._position},set:function(e){return this._position=se.parsePosition(e),this.zScale=this._zScale,this._delegate_label&&(this._delegate_label.position=te.transformWGS84ToCartesian(this._position)),this}},{key:"zScale",get:function(){return this._zScale},set:function(e){this._zScale=e,this._centerScale()}},{key:"zOffset",get:function(){return this._zOffset},set:function(e){this._zOffset=e;for(var t=A.Cartesian3.fromDegrees(this._position.lng,this._position.lat,0),r=A.Cartesian3.normalize(t,new A.Cartesian3),n=A.Matrix4.getTranslation(this._delegate[0].modelMatrix,new A.Cartesian3),i=A.Cartesian3.add(n,A.Cartesian3.multiplyByScalar(r,this._zOffset,new A.Cartesian3),new A.Cartesian3),o=A.Matrix4.setTranslation(this._delegate[0].modelMatrix,i,new A.Matrix4),a=this._delegate.length,s=0;s<a;++s){this._delegate[s].modelMatrix=o}}},{key:"alpha",get:function(){return this._alpha},set:function(e){var t=this;this._alpha=e,this._instanceIds.forEach((function(e){var r=t._getLayerColor(e);t.setLayerColor(e,A.Color.fromCssColorString(r).withAlpha(t._alpha).toCssColorString())}))}},{key:"_mountedHook",value:function(){var e=this;this._createGeology(),this._delegate.forEach((function(t){e._layer.primitiveCollection.add(t)}))}},{key:"_removedHook",value:function(){var e=this;this._delegate.forEach((function(t){e._layer.primitiveCollection.remove(t)})),this._delegate=[],this._instanceIds.length=0}},{key:"_againRender",value:function(){this._removedHook(),this._mountedHook(),this._addedHook&&this._addedHook()}},{key:"_createGeology",value:function(){}},{key:"_createGeometry",value:function(e,t,r,n){var i=A.Geometry,o=A.GeometryAttribute,a=A.ComponentDatatype,s=A.PrimitiveType,l=A.BoundingSphere,c={};c.position=new o({componentDatatype:a.DOUBLE,componentsPerAttribute:3,values:new Float64Array(e)}),t&&t.length>0&&(c.color=new o({componentsPerAttribute:4,componentDatatype:a.FLOAT,values:new Float32Array(t)})),n&&n.length>0&&(c.st=new A.GeometryAttribute({componentDatatype:A.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:new Float32Array(n)}));var u=new i({attributes:c,indices:new Uint32Array(r),primitiveType:s.TRIANGLES,boundingSphere:l.fromVertices(new Float64Array(e))});return A.GeometryPipeline.computeNormal(u),this._boundingSpheres.push(u.boundingSphere),u}},{key:"setLayerColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#ff0000";if(1===this._delegate.length&&1===this._renderWay){var r=this._delegate[0].getGeometryInstanceAttributes(e);r&&(r.color=A.ColorGeometryInstanceAttribute.toValue(A.Color.fromCssColorString(t)))}else void 0!==e.index&&(this._delegate[e.index].appearance.material.uniforms.color=A.Color.fromCssColorString(t))}},{key:"_getLayerColor",value:function(e){if(1===this._delegate.length&&1===this._renderWay){var t=this._delegate[0].getGeometryInstanceAttributes(e);if(null!=t&&t.color)return A.Color.fromBytes(t.color[0],t.color[1],t.color[2],t.color[3]).toCssColorString()}else{var r;if(void 0!==e.index)return null===(r=this._delegate[e.index].appearance.material.uniforms.color)||void 0===r?void 0:r.toCssColorString()}return"#ffffff"}},{key:"flash",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#ff0000",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=0,o=this._getLayerColor(e);return new Promise((function(a){var s=setInterval((function(){i%2==0?t.setLayerColor(e,r):t.setLayerColor(e,o||"#ffffff"),++i>5*n&&(clearInterval(s),t.setLayerColor(e,o||"#ffffff"),s=null,a())}),200)}))}},{key:"_centerScale",value:function(){for(var e=A.Transforms.eastNorthUpToFixedFrame(A.Cartesian3.fromDegrees(this._position.lng,this._position.lat,0)),t=A.Matrix4.fromScale(new A.Cartesian3(1,1,this._zScale),new A.Matrix4),r=A.Matrix4.multiply(e,t,e),n=this._delegate.length,i=0;i<n;++i){this._delegate[i].modelMatrix=r}}}]),r}(Mn);function Dn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var On=function(e){d()(r,e);var t=Sn(r);function r(){var e,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(i=t.call(this,o))._radius=o.radius||15,i._renderWay=o.renderWay||1,i._layers=o.layers||[],i._radialSegments=null!==(e=o.radialSegments)&&void 0!==e?e:128,i._depthScale=null===(n=o.depthScale)||void 0===n||n,i._type=In.getGraphicType("drill"),i._state=E.INITIALIZED,i}return f()(r,[{key:"length",get:function(){return this.topZ-this.bottomZ}},{key:"topZ",get:function(){return Math.max.apply(Math,pe()(this._layers.map((function(e){return e.maxz}))))}},{key:"bottomZ",get:function(){return Math.min.apply(Math,pe()(this._layers.map((function(e){return e.minz}))))}},{key:"radius",get:function(){return this._radius},set:function(e){this._radius=e,this._againRender()}},{key:"zScale",get:function(){return this._zScale},set:function(e){this._zScale=e,this._depthScale?this._againRender():bn()(v()(r.prototype),"_centerScale",this).call(this)}},{key:"_createGeology",value:function(){var e=this,t=[];this._layers.forEach((function(r,n){var i,o=e._calculateAttributes(r),a=e._createGeometry(o.positions,null,o.indices,o.sts),s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({index:n,graphicId:e.graphicId,layerId:null===(i=e._layer)||void 0===i?void 0:i.layerId},r);e._instanceIds.push(s);var l=A.Color.RED;1===e._renderWay&&(l=A.Color.fromCssColorString(r.render));var c=new A.DistanceDisplayConditionGeometryInstanceAttribute(e._near,e._far);t.push(new A.GeometryInstance({geometry:a,id:s,attributes:{color:A.ColorGeometryInstanceAttribute.fromColor(l),distanceDisplayCondition:c}}))}));var r=A.Matrix4.multiplyByTranslation(A.Transforms.eastNorthUpToFixedFrame(A.Cartesian3.fromDegrees(this._position.lng,this._position.lat,0)),new A.Cartesian3(0,0,0),new A.Matrix4);if(1===this._renderWay){var n=new A.Primitive({cull:!1,show:this._show,modelMatrix:r,geometryInstances:t,asynchronous:!1,appearance:new A.PerInstanceColorAppearance({renderState:{blending:A.BlendingState.ALPHA_BLEND,depthTest:{enabled:!0}},translucent:!1})});this._delegate.push(n)}else for(var i=0;i<t.length;i++){var o=new A.Cartesian2(1,1),a=2*Math.PI*this._radius,s=a/(this._layers[i].maxz-this._layers[i].minz);s>1&&(o.x=s),(s=(this._layers[i].maxz-this._layers[i].minz)/a)>1&&(o.y=s);var l=new A.MaterialAppearance({material:new A.Material({fabric:{type:"Image",uniforms:{repeat:o,image:this._layers[i].render}}})}),c=new A.Primitive({cull:!1,show:this._show,modelMatrix:r,geometryInstances:t[i],asynchronous:!1,appearance:l});this._delegate.push(c)}}},{key:"_calculateAttributes",value:function(e){for(var t=[],r=[],n=[],i=2*Math.PI/this._radialSegments,o=0===e.maxz?.01:this._depthScale?e.maxz-(this.topZ-e.maxz)*(this.zScale-1):e.maxz,a=0===e.minz?.01:this._depthScale?e.minz-(this.topZ-e.minz)*(this.zScale-1):e.minz,s=1,l=0;l<this._radialSegments;s=++l+1){var c=Math.cos(i*l)*this._radius,u=Math.sin(i*l)*this._radius,f=Math.cos(i*s)*this._radius,h=Math.sin(i*s)*this._radius;t.push(c,u,a),t.push(f,h,a),t.push(f,h,o),t.push(c,u,a),t.push(f,h,o),t.push(c,u,o),t.push(c,u,o),t.push(f,h,o),t.push(0,0,o),t.push(c,u,a),t.push(f,h,a),t.push(0,0,a),r.push(12*l,1+12*l,2+12*l,3+12*l,4+12*l,5+12*l),r.push(6+12*l,7+12*l,8+12*l,9+12*l,10+12*l,11+12*l)}return 2===this._renderWay&&(n=this._calculateSts(t,a)),{positions:t,indices:r,sts:n}}},{key:"_calculateSts",value:function(e,t){for(var r=[],n=0;n<e.length/9;n++)if(e[9*n+2]===e[9*n+8])r.push((this._radius-e[9*n+0])/(2*this._radius),(this._radius-e[9*n+1])/(2*this._radius)),r.push((this._radius-e[9*n+3])/(2*this._radius),(this._radius-e[9*n+4])/(2*this._radius)),r.push((this._radius-e[9*n+6])/(2*this._radius),(this._radius-e[9*n+7])/(2*this._radius));else for(var i=0;i<3;i++){var o=e[9*n+3*i],a=e[9*n+1+3*i],s=e[9*n+2+3*i],l=0;l=a>0||0===a?Math.acos(o/this._radius)/(2*Math.PI):o<0||0===o?(Math.acos(-1*o/this._radius)+Math.PI)/(2*Math.PI):(2*Math.PI-Math.acos(o/this._radius))/(2*Math.PI),r.push(l,s===t?0:1)}return r}},{key:"setStyle",value:function(e){return this}}]),r}(In);In.registerType("drill");var Rn=On;function Ln(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Fn=function(e){d()(r,e);var t=kn(r);function r(){var e,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(n=t.call(this,i))._dataType=i.dataType||1,n._renderWay=i.renderWay||1,n._layers=i.layers||[],n._positions=se.parsePositions(i.positions)||[],n._position=i.position||fe.center(n._positions),n._depthScale=null!==(e=i.depthScale)&&void 0!==e&&e,n._type=In.getGraphicType("section"),n._extents=[],n._state=E.INITIALIZED,n}return f()(r,[{key:"positions",get:function(){return this._positions}},{key:"length",get:function(){return fe.distance(this._positions)}},{key:"depth",get:function(){return this.topZ-this.bottomZ}},{key:"topZ",get:function(){return Math.max.apply(Math,pe()(this._extents.map((function(e){return e.maxz}))))}},{key:"bottomZ",get:function(){return Math.min.apply(Math,pe()(this._extents.map((function(e){return e.minz}))))}},{key:"zScale",get:function(){return this._zScale},set:function(e){this._zScale=e,this._depthScale?this._againRender():2===this._dataType?bn()(v()(r.prototype),"_centerScale",this).call(this):this._setZScale()}},{key:"_createGeology",value:function(){var e=this,t=[],r=[],n=[];this._layers.forEach((function(i,o){var a,s=e._calculateAttributes(i);r.push(s.repeat),n.push(s.extent);var l=e._createGeometry(s.positions,s.colors,s.indices,s.sts),c=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ln(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ln(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({index:o,graphicId:e.graphicId,layerId:null===(a=e._layer)||void 0===a?void 0:a.layerId,extent:s.extent},i);e._instanceIds.push(c);var u=A.Color.RED;1===e._renderWay&&(u=A.Color.fromCssColorString(i.render));var f=new A.DistanceDisplayConditionGeometryInstanceAttribute(e._near,e._far);t.push(new A.GeometryInstance({geometry:l,id:c,attributes:{color:A.ColorGeometryInstanceAttribute.fromColor(u),distanceDisplayCondition:f}}))})),this._extents=n;var i=A.Matrix4.IDENTITY;if(2===this._dataType&&(i=A.Matrix4.multiplyByTranslation(A.Transforms.eastNorthUpToFixedFrame(A.Cartesian3.fromDegrees(this._position.lng,this._position.lat,0)),new A.Cartesian3(0,0,0),new A.Matrix4)),1===this._renderWay){var o=new A.Primitive({cull:!1,show:this._show,modelMatrix:i,geometryInstances:t,asynchronous:!1,appearance:new A.PerInstanceColorAppearance({renderState:{blending:A.BlendingState.ALPHA_BLEND,depthTest:{enabled:!0}},translucent:!1})});this._delegate.push(o)}else for(var a=0;a<t.length;a++){var s=new A.MaterialAppearance({material:new A.Material({fabric:{type:"Image",uniforms:{repeat:r[a],image:this._layers[a].render}}})}),l=new A.Primitive({cull:!1,show:this._show,modelMatrix:i,geometryInstances:t[a],asynchronous:!1,appearance:s});this._delegate.push(l)}}},{key:"_calculateAttributes",value:function(e){var t=[],r=new A.Cartesian2(1,1),n=e.colors,i=e.triangles,o=Array.from(e.vertexes),a=[],s=[],l=[];if(!i){i=[];for(var c=0,u=e.vertexes.length/3;c<u;c++)i.push(c)}for(var f=0,h=e.vertexes.length/3;f<h;f++)a.push(e.vertexes[3*f]),s.push(e.vertexes[3*f+1]),l.push(e.vertexes[3*f+2]);var d=Math.min.apply(Math,a),p=Math.max.apply(Math,a),y=Math.min.apply(Math,s),m=Math.max.apply(Math,s),v=Math.min.apply(Math,l),g=Math.max.apply(Math,l);if(1===this._dataType){for(var _=[],C=0,E=(o=A.Cartesian3.fromDegreesArrayHeights(e.vertexes)).length;C<E;C++)if(this._depthScale&&this._zScale>1){var x=A.Cartesian3.fromDegrees(e.vertexes[3*C],e.vertexes[3*C+1],(e.vertexes[3*C+2]-this.topZ)*(this._zScale-1)+e.vertexes[3*C+2]);_.push(x.x,x.y,x.z)}else _.push(o[C].x,o[C].y,o[C].z);o=_}if(2===this._renderWay)if(e.st)t=e.st,r=new A.Cartesian2(1,1);else{for(var B=[],T=0,b=e.vertexes.length/3;T<b;T++){var P=[e.vertexes[3*T],e.vertexes[3*T+1],e.vertexes[3*T+2]];1===this._dataType&&(P=(P=oe.lnglatToMercator([e.vertexes[3*T],e.vertexes[3*T+1]])).concat(e.vertexes[3*T+2])),B.push(P)}var M=oe.lnglatToMercator([d,y]),w=oe.lnglatToMercator([p,m]),I=this._calculateSts(B,{minx:M[0],maxx:w[0],miny:M[1],maxy:w[1],minz:v,maxz:g});t=I.sts,r=I.repeat,this._depthScale&&(r.y=r.y*this._depthScale)}if(2===this._dataType){for(var D=(d+p)/2,S=(y+m)/2,O=0,R=e.vertexes.length/3;O<R;O++){e.vertexes[3*O]=e.vertexes[3*O]-D,e.vertexes[3*O+1]=e.vertexes[3*O+1]-S;var L=this._depthScale?(e.vertexes[3*O+2]-this.topZ)*(this._zScale-1)+e.vertexes[3*O+2]:e.vertexes[3*O+2];e.vertexes[3*O+2]=L}o=e.vertexes}return{positions:o,colors:n,indices:i,sts:t,extent:{minx:d,miny:y,minz:v,maxx:p,maxy:m,maxz:g},repeat:r}}},{key:"_calculateSts",value:function(e,t){var r,n=t.maxx-t.minx,i=t.maxy-t.miny,o=t.maxz-t.minz,a=A.Cartesian3.fromArray(e[0]),s=A.Cartesian3.fromArray(e[1]),l=A.Cartesian3.fromArray(e[2]),c=A.Cartesian3.subtract(a,s,new A.Cartesian3),u=A.Cartesian3.subtract(l,s,new A.Cartesian3),f=A.Cartesian3.cross(c,u,c),h=Math.max(Math.abs(f.x),Math.abs(f.y),Math.abs(f.z)),d=new A.Cartesian2(1,1);Math.abs(f.z)===h?(r="GLB_PLANE_XY",d.x=n/20,d.y=i/20):Math.abs(f.x)===h?(r="GLB_PLANE_YZ",d.x=i/o>1?i/o:1,d.y=i/o>1?1:o/i):(r="GLB_PLANE_XZ",d.x=n/o>1?n/o:1,d.y=n/o>1?1:o/n);for(var p=[],y=0;y<e.length;y++)"GLB_PLANE_XY"===r?p.push((e[y][0]-t.minx)/n,(e[y][1]-t.miny)/i):"GLB_PLANE_XZ"===r?p.push((e[y][0]-t.minx)/n,(e[y][2]-t.minz)/o):p.push((e[y][1]-t.miny)/i,(e[y][2]-t.minz)/o);return{sts:p,repeat:d}}},{key:"_calculatePointToSectionLineDistance",value:function(e){if(!this._plane){var t=A.Cartesian3.fromDegrees(this._position.lng,this._position.lat,this.topZ),r=this._layer._viewer.scene.globe.ellipsoid.geodeticSurfaceNormal(t,new A.Cartesian3);this._plane=A.Plane.fromPointNormal(t,A.Cartesian3.normalize(r,new A.Cartesian3))}return A.Plane.getPointDistance(this._plane,e)}},{key:"setStyle",value:function(){return this}},{key:"_setZScale",value:function(){for(var e=A.Cartesian3.fromDegrees(this._position.lng,this._position.lat,0),t=A.Cartesian3.normalize(e,new A.Cartesian3),r=A.Matrix4.setTranslation(A.Matrix4.IDENTITY,A.Cartesian3.negate(e,new A.Cartesian3),new A.Matrix4),n=this._zScale,i=t.x,o=t.y,a=t.z,s=new A.Matrix4(1+(n-1)*i*i,(n-1)*i*o,(n-1)*i*a,0,(n-1)*i*o,1+(n-1)*o*o,(n-1)*a*o,0,(n-1)*i*a,(n-1)*a*o,1+(n-1)*a*a,0,0,0,0,1),l=A.Matrix4.setTranslation(A.Matrix4.IDENTITY,e,new A.Matrix4),c=A.Matrix4.multiply(l,A.Matrix4.multiply(s,r,new A.Matrix4),new A.Matrix4),u=this._delegate.length,f=0;f<u;++f){this._delegate[f].modelMatrix=c}}}]),r}(In);In.registerType("section");var Gn=Fn;function Nn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var zn=function(e){d()(r,e);var t=Nn(r);function r(e){var n;return c()(this,r),(n=t.call(this,e))._type=In.getGraphicType("tin"),n._layers=e.layers||[],n._state=E.INITIALIZED,n}return f()(r,[{key:"_createGeology",value:function(){var e=this,t=[];this._layers.forEach((function(r){var n,i=e._calculateAttributes(r),o=e._createGeometry(i.positions,i.colors,i.indices),a={graphicId:e.graphicId,layerId:null===(n=e._layer)||void 0===n?void 0:n.layerId};e._instanceIds.push(a);var s={geometry:o,id:a,attributes:{distanceDisplayCondition:new Cesium.DistanceDisplayConditionGeometryInstanceAttribute(e._near,e._far)}};if(o.color){var l=Cesium.ColorGeometryInstanceAttribute.fromColor(o.color);s.attributes.color=l}t.push(new Cesium.GeometryInstance(s))}));var r=new Cesium.Primitive({cull:!1,show:this._show,asynchronous:!1,modelMatrix:Cesium.Matrix4.multiplyByTranslation(Cesium.Transforms.eastNorthUpToFixedFrame(Cesium.Cartesian3.fromDegrees(this._position.lng,this._position.lat,0)),new Cesium.Cartesian3(0,0,0),new Cesium.Matrix4),geometryInstances:t,appearance:new Cesium.PerInstanceColorAppearance({translucent:!1,renderState:{cull:{enabled:!1,face:Cesium.CullFace.FRONT},polygonOffset:{enabled:!0,factor:0,units:0},depthTest:{enabled:!0,func:Cesium.DepthFunction.LESS}}})});this._delegate.push(r)}},{key:"_calculateAttributes",value:function(e){var t,r,n=[],i="",o=Array.from(e.triangles);return t=Array.from(e.vertexes),r=o,Array.isArray(e.color)?n=e.color:i=e.color,{positions:t,indices:r,colors:n,color:i}}}]),r}(In);In.registerType("tin");var Un=zn;function Vn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Wn=function(e){d()(r,e);var t=Vn(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._cache=[],e._maxCacheSize=(null==n?void 0:n.maxCacheSize)||50,e._position=null==n?void 0:n.position,e}return f()(r,[{key:"position",get:function(){return this._position instanceof A.SampledPositionProperty||this._position instanceof A.CallbackProperty?te.transformCartesianToWGS84(this._position.getValue(A.JulianDate.now())):this._position},set:function(e){var t=this;return e instanceof A.SampledPositionProperty?(this._position=e,this._initSampledPositionProperty()):e instanceof A.CallbackProperty?(this._position=e,this._delegate.position=this._position,this._delegate.orientation=new A.CallbackProperty((function(){return A.Transforms.headingPitchRollQuaternion(t.cartesian,A.HeadingPitchRoll.fromDegrees(t.heading,t.pitch,t.roll))}),!1)):(this._position=se.parsePosition(e),this._delegate.position=te.transformWGS84ToCartesian(this._position)),this}},{key:"orientation",get:function(){return this._delegate.orientation.getValue(A.JulianDate.now())},set:function(e){this._delegate.orientation=e;var t=A.HeadingPitchRoll.fromQuaternion(e);this._style.heading=A.Math.toDegrees(t.heading),this._style.pitch=A.Math.toDegrees(t.pitch),this._style.roll=A.Math.toDegrees(t.roll)}},{key:"heading",get:function(){var e;return null!==(e=this.style.heading)&&void 0!==e?e:0},set:function(e){this._style.heading=e,this.updateOrientation()}},{key:"pitch",get:function(){var e;return null!==(e=this.style.pitch)&&void 0!==e?e:0},set:function(e){this._style.pitch=e,this.updateOrientation()}},{key:"roll",get:function(){var e;return null!==(e=this.style.roll)&&void 0!==e?e:0},set:function(e){this._style.roll=e,this.updateOrientation()}},{key:"objectsToExclude",get:function(){return[this._delegate]}},{key:"_mountedHook",value:function(){bn()(v()(r.prototype),"_mountedHook",this).call(this),this.position=this._position}},{key:"_initSampledPositionProperty",value:function(){this._delegate.position=this._position,this._delegate.orientation=new A.VelocityOrientationProperty(this._position),this._cache=this._position._property._times,this._cache.length>0&&(this._delegate.availability=A.TimeIntervalCollection.fromJulianDateArray({julianDates:this._cache}))}},{key:"addDynamicPosition",value:function(e,t){this._removePosition();var r=A.JulianDate.now(),n=t instanceof A.JulianDate?t:A.JulianDate.addSeconds(r,t,new A.JulianDate);return this._position.addSample(n,te.transformWGS84ToCartesian(se.parsePosition(e))),this._delegate.availability=A.TimeIntervalCollection.fromJulianDateArray({julianDates:this._cache}),this}},{key:"_removePosition",value:function(){if(this._cache.length>this._maxCacheSize){var e=A.JulianDate.addSeconds(this._cache[0],-.2,new A.JulianDate),t=A.JulianDate.addSeconds(this._cache[this._cache.length-this._maxCacheSize],-.2,new A.JulianDate);this._position.removeSamples(new A.TimeInterval({start:e,stop:t})),this._cache.splice(0,this._cache.length-this._maxCacheSize)}}},{key:"_getGeoJsonGeometry",value:function(e){return{type:"Point",coordinates:se.parsePointCoordToArray(this.position,null==e?void 0:e.noAlt)}}},{key:"updateOrientation",value:function(){this._delegate&&!(this._delegate.orientation instanceof A.CallbackProperty)&&(this._delegate.orientation=A.Transforms.headingPitchRollQuaternion(this.cartesian,A.HeadingPitchRoll.fromDegrees(this.heading,this.pitch,this.roll)))}},{key:"setStyle",value:function(e){return e&&0!==Object.keys(e).length?(this._style=X.merge({},this._style,e),this._style.label&&this.setLabel(this._style.label.text,this._style.label),A.defined(this._style.heading)&&(this.heading=this._style.heading),A.defined(this._style.pitch)&&(this.pitch=this._style.pitch),A.defined(this._style.roll)&&(this.roll=this._style.roll),X.merge(this._delegate[this._editType||this.type],this._style),this):this}}]),r}(Bn);Bn.registerType("basePoint");var jn=Wn;function Hn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Zn=function(e){d()(r,e);var t=Hn(r);function r(e){var n,i;return c()(this,r),i=t.call(this,e),null!==(n=e.positions)&&void 0!==n||(e.positions=[]),i._positions=e.positions,i}return f()(r,[{key:"positions",get:function(){return this._positions instanceof A.CallbackProperty?te.transformCartesianArrayToWGS84Array(this._positions.getValue(A.JulianDate.now())):se.parsePositions(this._positions)},set:function(e){return this._setPositions(e),this._style.outlineStyle&&this.setOutlineStyle&&this.setOutlineStyle(),this}},{key:"center",get:function(){return fe.center(this.positions)}},{key:"boundingSphere",get:function(){return this._boundingSphere||(this._boundingSphere=A.BoundingSphere.fromPoints(te.transformWGS84ArrayToCartesianArray(this.positions))),this._boundingSphere}},{key:"distance",get:function(){return fe.distance(this.positions)}},{key:"area",get:function(){return fe.area(this.positions)}},{key:"_mountedHook",value:function(){bn()(v()(r.prototype),"_mountedHook",this).call(this),this.positions=this._positions}},{key:"_setPositions",value:function(e){e instanceof A.CallbackProperty?(this._positions=e,this._delegate[this.type].positions=this._positions):(this._positions=se.parsePositions(e),this._delegate[this.type].positions=te.transformWGS84ArrayToCartesianArray(this._positions))}},{key:"setLabel",value:function(e,t,r){var n=this;return r?this._delegate.position=te.transformWGS84ToCartesian(se.parsePosition(r)):this._positions instanceof A.CallbackProperty?this._delegate.position=new A.CallbackProperty((function(){return te.transformWGS84ToCartesian(n.center)}),!1):this._delegate.position=te.transformWGS84ToCartesian(this.center),this._style.label=X.merge(this._style.label||{},t,{text:e}),this._delegate&&(this._delegate.label=this._style.label),this}},{key:"_getGeoJsonGeometry",value:function(e){return{type:"LineString",coordinates:se.parsePolylineCoordToArray(this.positions,null==e?void 0:e.noAlt)}}}]),r}(Bn),Yn=r(14),Jn=r.n(Yn);function Kn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Qn=function(e){d()(r,e);var t=Xn(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._delegate=new A.Entity({billboard:{}}),e._type=jn.getGraphicType("billboard"),e._state=E.INITIALIZED,e}return f()(r,[{key:"_mountedHook",value:function(){var e=this;if(bn()(v()(r.prototype),"_mountedHook",this).call(this),this.position=this._position,/.*\.gif/.test(this._style.image)){var t=Q.create("img","hide",document.body);t.setAttribute("src",this._style.image),this.gif=new Jn.a({gif:t}),this.gif.load((function(){e.delegate.billboard.image=new A.CallbackProperty((function(){return e.gif.get_canvas().toDataURL("image/png")}),!1)}))}}}],[{key:"fromEntity",value:function(e){var t,n=void 0,i=A.JulianDate.now(),o=te.transformCartesianToWGS84(e.position.getValue(i));e.billboard&&((n=new r({position:o})).attr=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kn(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},null==e||null===(t=e.properties)||void 0===t?void 0:t.getValue(i)));return n}}]),r}(jn);jn.registerType("billboard");var qn=Qn;function $n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var ei=function(e){d()(r,e);var t=$n(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._delegate=new A.Entity({box:{dimensions:{x:0,y:0,z:0}}}),e._type=Bn.getGraphicType("box"),e._state=E.INITIALIZED,e}return f()(r,[{key:"length",get:function(){return this._delegate.box.dimensions.x},set:function(e){return this._delegate.box.dimensions.x=e,this}},{key:"width",get:function(){return this._delegate.box.dimensions.y},set:function(e){return this._delegate.box.dimensions.y=e,this}},{key:"height",get:function(){return this._delegate.box.dimensions.z},set:function(e){return this._delegate.box.dimensions.z=e,this}}]),r}(jn);Bn.registerType("box");var ti=ei;function ri(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var ni=function(e){d()(r,e);var t=ri(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._delegate=new A.Entity({polygon:{}}),e._radius=n.radius||e._style.radius||0,e._rotateAmount=0,e._stRotation=0,e._outlinePositions=[],e._type=Bn.getGraphicType("circle"),e._state=E.INITIALIZED,e._editType="polygon",e}return f()(r,[{key:"position",get:function(){return this._position instanceof A.SampledPositionProperty||this._position instanceof A.CallbackProperty?te.transformCartesianToWGS84(this._position.getValue(A.JulianDate.now())):this._position},set:function(e){var t=this;return e instanceof A.SampledPositionProperty?(this._position=e,this._initSampledPositionProperty(),this._delegate.polygon.hierarchy=new A.CallbackProperty((function(e){return t._computeHierarchy()}),!1)):e instanceof A.CallbackProperty?(this._position=e,this._delegate.position=this._position,this._delegate.polygon.hierarchy=new A.CallbackProperty((function(e){return t._computeHierarchy()}),!1)):(this._position=se.parsePosition(e),this._delegate.position=te.transformWGS84ToCartesian(this._position),this._delegate.polygon.hierarchy=this._computeHierarchy()),this._style.outlineStyle&&this.setOutlineStyle&&this.setOutlineStyle(),this}},{key:"radius",get:function(){return this._radius instanceof A.CallbackProperty?this._radius.getValue(A.JulianDate.now()):this._radius},set:function(e){return this._radius=e,this._position instanceof ae&&(this._delegate.polygon.hierarchy=this._computeHierarchy(),this._style.outlineStyle&&this.setOutlineStyle&&this.setOutlineStyle()),this}},{key:"outlinePositions",get:function(){return this._outlinePositions}},{key:"style",get:function(){return X.merge(this._style,{radius:this.radius})}},{key:"rotateAmount",get:function(){return this._rotateAmount},set:function(e){var t=this;return this._rotateAmount=+e,this._delegate.polygon.stRotation=new A.CallbackProperty((function(e){return t._stRotation+=t._rotateAmount,(t._stRotation>=360||t._stRotation<=-360)&&(t._stRotation=0),A.Math.toRadians(t._stRotation)}),!1),this}},{key:"_computeHierarchy",value:function(){if(!this.position||!this.radius)return null;var e=new A.PolygonHierarchy,t=A.EllipseGeometryLibrary.computeEllipsePositions({center:te.transformWGS84ToCartesian(this.position),semiMajorAxis:this.radius,semiMinorAxis:this.radius,rotation:0,granularity:.005},!1,!0),r=A.Cartesian3.unpackArray(t.outerPositions);return r.push(r[0]),e.positions=r,this._outlinePositions=r,e}}]),r}(jn);Bn.registerType("circle");var ii=ni;function oi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ai(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var si=function(e){d()(r,e);var t=ai(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._delegate=new A.Entity({corridor:{}}),e._type=Bn.getGraphicType("corridor"),e._state=E.INITIALIZED,e}return f()(r,null,[{key:"fromEntity",value:function(e){var t,n=void 0,i=A.JulianDate.now();e.polyline&&((n=new r({positions:te.transformCartesianArrayToWGS84Array(e.polyline.positions.getValue(i))})).attr=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oi(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},null==e||null===(t=e.properties)||void 0===t?void 0:t.getValue(i)));return n}}]),r}(Zn);Bn.registerType("corridor");var li=si;function ci(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ui(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var fi=function(e){d()(r,e);var t=ui(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._delegate=new A.Entity({polyline:{}}),e._type=Bn.getGraphicType("polyline"),e._state=E.INITIALIZED,e}return f()(r,[{key:"_getGeoJsonGeometry",value:function(e){return{type:"LineString",coordinates:se.parsePolylineCoordToArray(this.positions,null==e?void 0:e.noAlt)}}}],[{key:"fromEntity",value:function(e){var t,n=void 0,i=A.JulianDate.now();e.polyline&&((n=new r({positions:te.transformCartesianArrayToWGS84Array(e.polyline.positions.getValue(i))})).attr=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ci(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ci(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},null==e||null===(t=e.properties)||void 0===t?void 0:t.getValue(i)));return n}}]),r}(Zn);Bn.registerType("polyline");var hi=fi;function di(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var pi=function(e){d()(r,e);var t=di(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._delegate=new A.Entity({polyline:{}}),e._type=Bn.getGraphicType("curve"),e._state=E.INITIALIZED,e._editType="polyline",e}return f()(r,[{key:"_setPositions",value:function(e){e instanceof A.CallbackProperty?(this._positions=e,this._delegate[this._editType].positions=new A.CallbackProperty((function(){return te.transformWGS84ArrayToCartesianArray(se.parsePositions($.getQBSplinePoints(se.parsePolylineCoordToArray(te.transformCartesianArrayToWGS84Array(e.getValue(A.JulianDate.now())),!0))))}),!1)):(this._positions=se.parsePositions(e),this._delegate[this._editType].positions=te.transformWGS84ArrayToCartesianArray(se.parsePositions($.getQBSplinePoints(se.parsePolylineCoordToArray(this._positions,!0)))))}}]),r}(hi);Bn.registerType("curve");var yi=pi;function mi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var vi=function(e){d()(r,e);var t=mi(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._delegate=new A.Entity({cylinder:{}}),e._type=Bn.getGraphicType("cylinder"),e._state=E.INITIALIZED,e}return f()(r,[{key:"length",get:function(){return this._delegate.cylinder.length},set:function(e){return this.setStyle({length:e}),this}},{key:"topRadius",get:function(){return this._delegate.cylinder.topRadius},set:function(e){return this.setStyle({topRadius:e}),this}},{key:"bottomRadius",get:function(){return this._delegate.cylinder.bottomRadius},set:function(e){return this.setStyle({bottomRadius:e}),this}}]),r}(jn);Bn.registerType("cylinder");var gi=vi;function Ai(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var _i=function(e){d()(r,e);var t=Ai(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._delegate=new A.Entity({ellipse:{}}),e._type=Bn.getGraphicType("ellipse"),e._state=E.INITIALIZED,e}return f()(r,[{key:"semiMajorAxis",get:function(){return this._delegate.ellipse.semiMajorAxis},set:function(e){return this._delegate.ellipse.semiMajorAxis=e,this}},{key:"semiMinorAxis",get:function(){return this._delegate.ellipse.semiMinorAxis},set:function(e){return this._delegate.ellipse.semiMinorAxis=e,this}}]),r}(jn);Bn.registerType("ellipse");var Ci=_i;function Ei(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var xi=function(e){d()(r,e);var t=Ei(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._delegate=new A.Entity({ellipsoid:{}}),e._type=Bn.getGraphicType("ellipsoid"),e._state=E.INITIALIZED,e}return f()(r,[{key:"radii",get:function(){return this._delegate.ellipsoid.radii},set:function(e){return this._delegate.ellipsoid.radii=e,this}},{key:"_mountedHook",value:function(){bn()(v()(r.prototype),"_mountedHook",this).call(this),this.position=this._position}}]),r}(jn);Bn.registerType("ellipsoid");var Bi=xi;function Ti(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Pi=function(e){d()(r,e);var t=bi(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._delegate=new A.Entity({label:{}}),e._type=jn.getGraphicType("label"),e._state=E.INITIALIZED,e}return f()(r,[{key:"text",get:function(){return this._delegate.label.text},set:function(e){return this._delegate.label.text=e,this}},{key:"setLabel",value:function(e,t){return this}}],[{key:"fromEntity",value:function(e){var t,n=A.JulianDate.now(),i=te.transformCartesianToWGS84(e.position.getValue(n)),o=void 0;e.billboard&&((o=new r({position:i})).attr=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ti(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ti(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},null==e||null===(t=e.properties)||void 0===t?void 0:t.getValue(n)));return o}}]),r}(jn);jn.registerType("label");var Mi=Pi;function wi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ii(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wi(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Di(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Si=function(e){d()(r,e);var t=Di(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._delegate=new A.Entity({path:{}}),e._type=jn.getGraphicType("path"),e._position=(null==n?void 0:n.position)||new A.SampledPositionProperty,e._state=E.INITIALIZED,e}return f()(r,[{key:"setBillboard",value:function(e){return this._delegate&&(this._delegate.billboard=Ii({},e)),this}}],[{key:"fromEntity",value:function(e){var t,n=void 0,i=A.JulianDate.now();return(n=new r({position:e.position})).attr=Ii({},null==e||null===(t=e.properties)||void 0===t?void 0:t.getValue(i)),n}}]),r}(jn);jn.registerType("path");var Oi=Si;function Ri(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Li=function(e){d()(r,e);var t=Ri(r);function r(){var e,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(c()(this,r),n=t.call(this,i),null!==(e=i.plane)&&void 0!==e&&e.normal&&"string"==typeof i.plane.normal){var o=String(i.plane.normal).toLocaleUpperCase();i.plane.normal="X"===o?A.Cartesian3.UNIT_X:"Y"===o?A.Cartesian3.UNIT_Y:A.Cartesian3.UNIT_Z}else i.plane=new A.Plane,i.plane.normal=A.Cartesian3.UNIT_Z;return n._normal=i.plane.normal,n._distance=i.plane.distance||0,n._delegate=new A.Entity({plane:{dimensions:{x:0,y:0},plane:new A.Plane(n._normal,n._distance)}}),n._type=Bn.getGraphicType("plane"),n._state=E.INITIALIZED,n}return f()(r,[{key:"width",get:function(){return this._delegate.plan.dimensions.x},set:function(e){return this._delegate.plan.dimensions.x=e,this}},{key:"height",get:function(){return this._delegate.plan.dimensions.y},set:function(e){return this._delegate.plan.dimensions.y=e,this}},{key:"distance",get:function(){return this._delegate.plane.plane.distance},set:function(e){return this._delegate.plane.plane.distance=e,this}}]),r}(jn);Bn.registerType("plane");var ki=Li;function Fi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Ni=function(e){d()(r,e);var t=Gi(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._def_style={pixelSize:8,outlineColor:A.Color.WHITE,outlineWidth:1},e._delegate=new A.Entity({point:{}}),e._type=jn.getGraphicType("point"),e._state=E.INITIALIZED,e}return f()(r,null,[{key:"fromEntity",value:function(e){var t,n=void 0,i=A.JulianDate.now();return(n=new r({position:te.transformCartesianToWGS84(e.position.getValue(i))})).attr=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fi(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},null==e||null===(t=e.properties)||void 0===t?void 0:t.getValue(i)),n}},{key:"fromDraw",value:function(e,t){}}]),r}(jn);jn.registerType("point");var zi=Ni;function Ui(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Wi=function(e){d()(r,e);var t=Vi(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._delegate=new A.Entity({polygon:{}}),e._holes=[],e._outlinePositions=[],e._type=Bn.getGraphicType("polygon"),e._state=E.INITIALIZED,e._editType="polygon",e}return f()(r,[{key:"holes",get:function(){return this._holes},set:function(e){return e&&e.length&&(this._holes=e.map((function(e){return se.parsePositions(e)})),this._delegate.polygon.hierarchy=this._computeHierarchy()),this}},{key:"hierarchy",get:function(){return this._computeHierarchy()}},{key:"outlinePositions",get:function(){var e=this._delegate.polygon.hierarchy.positions,t=this._delegate.polygon.hierarchy.getValue();return this._outlinePositions=t&&t.positions.length>0?t.positions.concat(t.positions[0]):e&&e.length>0?e.concat(e[0]):[],this._outlinePositions}},{key:"_setPositions",value:function(e){var t=this;e instanceof A.CallbackProperty?(this._positions=e,this._delegate.polygon.hierarchy=new A.CallbackProperty((function(){return t.positions.length>0?t._computeHierarchy():new A.PolygonHierarchy}),!1)):(this._positions=se.parsePositions(e),this._delegate.polygon.hierarchy=this._computeHierarchy())}},{key:"_computeHierarchy",value:function(){var e=new A.PolygonHierarchy;return e.positions=te.transformWGS84ArrayToCartesianArray(this.positions),e.holes=this._holes.map((function(e){return new A.PolygonHierarchy(te.transformWGS84ArrayToCartesianArray(e))})),e}},{key:"_getGeoJsonGeometry",value:function(e){return{type:"Polygon",coordinates:se.parsePolygonCoordToArray(this.positions,null==e?void 0:e.noAlt)}}}],[{key:"fromEntity",value:function(e){var t,n=void 0,i=A.JulianDate.now();e.polygon&&((n=new r({positions:te.transformCartesianArrayToWGS84Array(e.polygon.hierarchy.getValue(i).positions)})).attr=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ui(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ui(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},null==e||null===(t=e.properties)||void 0===t?void 0:t.getValue(i)));return n}}]),r}(Zn);Bn.registerType("polygon");var ji=Wi;function Hi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Yi=function(e){d()(r,e);var t=Zi(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._delegate=new A.Entity({polylineVolume:{}}),e._type=Bn.getGraphicType("polylineVolume"),e._state=E.INITIALIZED,e}return f()(r,[{key:"shape",get:function(){return this._delegate.polylineVolume.shape},set:function(e){return this._delegate.polylineVolume.shape=e,this}}],[{key:"fromEntity",value:function(e,t){var n,i=void 0,o=A.JulianDate.now();e.polyline&&((i=new r({positions:te.transformCartesianArrayToWGS84Array(e.polyline.positions.getValue(o))})).attr=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hi(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},null==e||null===(n=e.properties)||void 0===n?void 0:n.getValue(o)));return i}}]),r}(Zn);Bn.registerType("polylineVolume");var Ji=Yi;function Ki(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Xi=function(e){d()(r,e);var t=Ki(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._outlinePositions=[],e._delegate=new A.Entity({rectangle:{}}),e._type=Bn.getGraphicType("rectangle"),e._outlineHeight=0,e._state=E.INITIALIZED,e}return f()(r,[{key:"center",get:function(){return 0===this.positions.length?new ae:te.transformCartographicToWGS84(A.Rectangle.center(this._delegate.rectangle.coordinates.getValue(A.JulianDate.now())))}},{key:"area",get:function(){return this._delegate.rectangle.coordinates.getValue(A.JulianDate.now()).width*this._delegate.rectangle.coordinates.getValue(A.JulianDate.now()).height}},{key:"outlinePositions",get:function(){var e=this._delegate.rectangle.coordinates.getValue(A.JulianDate.now());if(!e)return[];var t=A.Cartesian3.fromRadians(e.west,e.south,this._outlineHeight),r=A.Cartesian3.fromRadians(e.east,e.south,this._outlineHeight),n=A.Cartesian3.fromRadians(e.east,e.north,this._outlineHeight),i=A.Cartesian3.fromRadians(e.west,e.north,this._outlineHeight);return this._outlinePositions=[t,r,n,i,t],this._outlinePositions}},{key:"_setPositions",value:function(e){var t=this;e instanceof A.CallbackProperty?(this._positions=e,this._delegate.rectangle.coordinates=new A.CallbackProperty((function(){var e=t.positions;return e.length>0?(t._outlineHeight=e[0].alt,A.Rectangle.fromCartesianArray(te.transformWGS84ArrayToCartesianArray(e))):null}),!1)):(this._positions=se.parsePositions(e),this._outlineHeight=this._positions[0].alt,this._delegate.rectangle.coordinates=A.Rectangle.fromCartesianArray(te.transformWGS84ArrayToCartesianArray(this._positions)))}}]),r}(Zn);Bn.registerType("rectangle");var Qi=Xi;function qi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var eo=function(e){d()(r,e);var t=$i(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._delegate=new A.Entity({wall:{}}),e._type=Bn.getGraphicType("wall"),e._state=E.INITIALIZED,e}return f()(r,null,[{key:"fromEntity",value:function(e){var t,n=void 0,i=A.JulianDate.now();e.wall&&((n=new r({positions:te.transformCartesianArrayToWGS84Array(e.wall.positions.getValue(i))})).attr=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qi(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},null==e||null===(t=e.properties)||void 0===t?void 0:t.getValue(i)));return n}}]),r}(Zn);Bn.registerType("wall");var to=eo;function ro(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var no=function(e){d()(r,e);var t=ro(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._type=Bn.getGraphicType("sector"),e._positions=n.positions,e}return f()(r,[{key:"positions",get:function(){return this._positions instanceof A.CallbackProperty?te.transformCartesianArrayToWGS84Array(this._positions.getValue(A.JulianDate.now())):se.parsePositions(this._positions||[])},set:function(e){return e instanceof A.CallbackProperty?this._positions=e:this._positions=se.parsePositions(e),this}},{key:"_computeHierarchy",value:function(){if(!this.position||!this.radius)return null;var e=te.transformWGS84ToCartesian(this.position),t=new A.PolygonHierarchy,r=A.EllipseGeometryLibrary.computeEllipsePositions({center:e,semiMajorAxis:this.radius,semiMinorAxis:this.radius,rotation:0,granularity:.005},!1,!0),n=A.Cartesian3.unpackArray(r.outerPositions);n.reverse();var i=0,o=0;if(this.callbackProperty){var a=this.positions;if(a.length>1){var s=te.transformWGS84ToCartographic(a[0]),l=te.transformWGS84ToCartographic(a[1]),c=$.getAzimuthDegree(se.parsePointCoordToArray([s.longitude,s.latitude]),se.parsePointCoordToArray([l.longitude,l.latitude]));this.style.startAngle=this.style.endAngle=c-90<0?c+270:c-90}if(a.length>2){var u=te.transformWGS84ToCartographic(a[0]),f=te.transformWGS84ToCartographic(a[2]),h=$.getAzimuthDegree(se.parsePointCoordToArray([u.longitude,u.latitude]),se.parsePointCoordToArray([f.longitude,f.latitude]));this.style.endAngle=h-90<0?h+270:h-90}}this.style.startAngle&&(i=Math.round(this.style.startAngle/360*n.length)),this.style.endAngle&&(o=Math.round(this.style.endAngle/360*n.length));var d=[];return(d=o>i?n.slice(i,o+1):o<i?(d=n.slice(i)).concat(n.slice(0,o+1)):n.slice(i,i+1)).push(e),d.push(d[0]),this._outlinePositions=d,t.positions=d,t}}]),r}(ii);Bn.registerType("sector");var io=no;function oo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ao(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oo(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function so(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var lo=function(e){d()(r,e);var t=so(r);function r(e){var n;return c()(this,r),(n=t.call(this,e)).positions=se.parsePositions(e.positions),n.speed=e.speed||5,n.arrSpeed=Array.isArray(n.speed)?n.speed:n.positions.map((function(e){return n.speed})),n.startTime=e.startTime||A.JulianDate.now(),n.stopTime=null,n.stepLen=[],n.stepTime=[],n.times=[],n.headings=[],n.property=null,n.cameraOptions={type:"gs",pitch:void 0,distance:300,followedX:-50,followedZ:10,range:1},n.allLen=0,n.allTimes=0,n._isStart=!1,n._fly_point_index=-1,n._headChangeParam={headChange:!1,headIndex:-1},n._delegate=new A.Entity({point:{}}),n._roamEvent=new J,n._type=Bn.getGraphicType("roamLine"),n._state=E.INITIALIZED,n}return f()(r,[{key:"position",get:function(){return te.transformCartesianToWGS84(this.property.getValue(this._lastTime))},set:function(e){this._position=se.parsePosition(e),this._delegate.position=te.transformWGS84ToCartesian(this._position)}},{key:"multiplier",get:function(){var e;return null===(e=this._layer)||void 0===e?void 0:e._viewer.clock.multiplier},set:function(e){this._layer._viewer.clock.multiplier=e}},{key:"isPause",get:function(){return!this._layer._viewer.clock.shouldAnimate}},{key:"_mountedHook",value:function(){bn()(v()(r.prototype),"_mountedHook",this).call(this)}},{key:"_removedHook",value:function(){this._isStart&&this.stop()}},{key:"_createEntity",value:function(){var e=this;this.allLen=fe.distance(this.positions),this.stopTime=null,this.stepLen=[0],this.stepTime=[0],this.headings=[0],this.times=[this.startTime];for(var t=0;t<this.positions.length-1;t++){var r=fe.distance([this.positions[t],this.positions[t+1]]);this.stepLen.push(r+this.stepLen[this.stepLen.length-1]);var n=r/(.277777778*this.arrSpeed[t]);this.stepTime.push(n+this.stepTime[this.stepTime.length-1]),this.times.push(A.JulianDate.addSeconds(this.times[this.times.length-1],n,new A.JulianDate)),this.headings.push(he.calculateHeadingForLine(te.transformWGS84ToCartesian(this.positions[t]),te.transformWGS84ToCartesian(this.positions[t+1])))}this.allTimes=this.stepTime[this.stepTime.length-1],this.stopTime=this.times[this.times.length-1];var i=new A.SampledPositionProperty;if(this.options.timeField&&this.options.positions.length>0){this.times=[],this.stepTime=[0];for(var o=0;o<this.cartesians.length-1;o++)i.addSample(this.options.positions[o][this.options.timeField],this.cartesians[o]),this.times.push(this.options.positions[o][this.options.timeField]),this.stepTime.push(A.JulianDate.secondsDifference(this.options.positions[o][this.options.timeField],this.options.positions[o+1][this.options.timeField],new A.JulianDate)+this.stepTime[this.stepTime.length-1]);this.times.push(this.options.positions[this.options.positions.length-1][this.options.timeField]),this.startTime=this.times[0],this.stopTime=this.times[this.times.length-1],this.allTimes=A.JulianDate.secondsDifference(this.startTime,this.stopTime)}else this.cartesians.forEach((function(t,r){i.addSample(e.times[r],t)}));this.property=i,this.options.interpolation&&this.property.setInterpolationOptions({interpolationAlgorithm:A.LagrangePolynomialApproximation,interpolationDegree:this.options.interpolationDegree||2}),this.property.forwardExtrapolationType=this.options.forwardExtrapolationType||A.ExtrapolationType.HOLD,this.property.backwardExtrapolationType=this.options.backwardExtrapolationType||A.ExtrapolationType.HOLD,this._delegate.position=this.property,this._delegate.orientation=new A.VelocityOrientationProperty(this.property),this._delegate.availability=new A.TimeIntervalCollection([new A.TimeInterval({start:this.startTime,stop:this.stopTime})]),this.options.model&&(this._delegate.model=this.options.model),this.options.label&&(this._delegate.label=this.options.label),this.options.billboard&&(this._delegate.billboard=this.options.billboard),this.options.path&&(this._delegate.path=this.options.path),this.options.circle&&(this._delegate.circle=this.options.circle),this.options.point&&(this._delegate.point=this.options.point),this._layer._viewer.clock.shouldAnimate=!0,this.multiplier=this.options.multiplier||1}},{key:"start",value:function(){var e;this._isStart||(this._createEntity(),this._layer._viewer.clock.startTime=this.startTime,this._layer._viewer.clock.currentTime=this.startTime,this._layer._viewer.clock.stopTime=this.stopTime,this._layer._viewer.clock.clockRange=null!==(e=this.options.clockRange)&&void 0!==e?e:A.ClockRange.UNBOUNDED,this._layer._viewer.clock.shouldAnimate=!0,this._layer._viewer.sceneEvent.on(S,this._onPreRenderHandler,this),this.setCameraOptions(this.options.camera),this.fire(L.START,this),this._isStart=!0)}},{key:"stop",value:function(){this._isStart=!1,this._layer._viewer.sceneEvent.off(S,this._onPreRenderHandler,this),this.position=this.position,this._delegate.availability=void 0,this._delegate.orientation=this._delegate.orientation.getValue(this._lastTime),this._fly_point_index=-1,this._headChangeParam={headChange:!1,headIndex:-1},this._layer._viewer.trackedEntity=null,this._layer._viewer.camera.lookAtTransform(A.Matrix4.IDENTITY)}},{key:"pause",value:function(){this._isStart&&(this._layer._viewer.clock.shouldAnimate=!1,this._layer._viewer.sceneEvent.off(S,this._onPreRenderHandler,this))}},{key:"proceed",value:function(){this._isStart&&(this._layer._viewer.clock.shouldAnimate=!0,this._layer._viewer.sceneEvent.on(S,this._onPreRenderHandler,this))}},{key:"setCameraOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};X.merge(this.cameraOptions,e);var t=this.cameraOptions.type,r=this._layer._viewer;switch(t){case"":r.trackedEntity=null,r.camera.lookAtTransform(A.Matrix4.IDENTITY);break;case"gs":r.trackedEntity=this._delegate,this._delegate.viewFrom=new A.Cartesian3(0,0,this.cameraOptions.distance);break;case"dy":r.trackedEntity=null}}},{key:"_onPreRenderHandler",value:function(e,t){if(this._isStart){this._lastTime=t;var r=this._delegate.position.getValue(t);if(this._fly_point_index>-1&&this._roamEvent.getEvent(L.CHANGE).numberOfListeners>0&&this.fire(L.CHANGE,{target:this,distance:this.stepLen[this._fly_point_index]+fe.distance([this.positions[this._fly_point_index],te.transformCartesianToWGS84(r)])}),this._fly_point_index<this.positions.length-1&&A.JulianDate.greaterThanOrEquals(t,this.times[this._fly_point_index+1],new A.JulianDate)&&(this._fly_point_index++,this.fire(L.OVERPOINT,{index:this._fly_point_index,target:this})),A.JulianDate.greaterThanOrEquals(t,this.stopTime,new A.JulianDate))return this.stop(),void this.fire(L.END,this);var n=this.cameraOptions.type,i=this._delegate.orientation.getValue(t);if(r&&i){if("dy"===n&&this._fly_point_index>-1&&this._fly_point_index<this.positions.length-2){var o=(this.stepTime[this._fly_point_index+1]-this.stepTime[this._fly_point_index])/5;if(A.JulianDate.secondsDifference(this.times[this._fly_point_index+1],t)<o){var a=this.headings[this._fly_point_index+2]-this.headings[this._fly_point_index+1];a>=180?a=-(360-a):a<=-180&&(a=360- -a),this._headChangeParam.headChange=!0,this._headChangeParam.speed=A.Math.toRadians(a)/o,this._headChangeParam.startTime=A.JulianDate.addSeconds(this.times[this._fly_point_index+1],-1*o,new A.JulianDate)}else this._headChangeParam.headChange=!1}else this._headChangeParam.headChange=!1;var s=A.Matrix4.fromRotationTranslation(A.Matrix3.fromQuaternion(i),r),l=A.Transforms.fixedFrameToHeadingPitchRoll(s),c=this._headChangeParam.headChange?A.Math.toRadians(this.headings[this._fly_point_index+1])+this._headChangeParam.speed*A.JulianDate.secondsDifference(t,this._headChangeParam.startTime):A.Math.toRadians(this.headings[this._fly_point_index+1]),u=void 0!==this.cameraOptions.pitch?A.Math.toRadians(this.cameraOptions.pitch):l.pitch;switch(n){case"":case"gs":break;case"dy":this._layer._viewer.camera.lookAt(r,new A.HeadingPitchRange(c,u,this.cameraOptions.range||this.cameraOptions.followedZ))}}}}},{key:"clampToGround",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(r){ke.computeSurfaceLine(ao({viewer:e._layer._viewer,positions:e.cartesians},t)).then((function(t){e.positions=t,e.arrSpeed=Array.isArray(e.speed)?e.speed:e.positions.map((function(t){return e.speed})),r()}))}))}},{key:"on",value:function(e,t,r){return this._graphicEvent.getEvent(e)?this._graphicEvent.on(e,t,r||this):this._roamEvent.on(e,t,r||this),this}},{key:"off",value:function(e,t,r){return this._graphicEvent.getEvent(e)?this._graphicEvent.off(e,t,r||this):this._roamEvent.off(e,t,r||this),this}},{key:"fire",value:function(e,t){return this._graphicEvent.getEvent(e)?this._graphicEvent.fire(e,t):this._roamEvent.fire(e,t),this}}]),r}(Bn);Bn.registerType("roamLine");var co=lo;function uo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uo(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ho(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var po=function(e){d()(r,e);var t=ho(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._delegate=Q.create("div","div-icon"),e._position=se.parsePosition(n.position),e._delegate.setAttribute("id",e._id),X.merge(e._delegate.style,{position:"absolute",top:"0",left:"0"}),e.content=n.content,e._type=Bn.getGraphicType("divIcon"),e._state=E.INITIALIZED,e}return f()(r,[{key:"show",get:function(){return this._show},set:function(e){return this._show=e,this._delegate.style.visibility=this._show?"visible":"hidden",this}},{key:"position",get:function(){return this._position},set:function(e){return this._position=se.parsePosition(e),this}},{key:"content",get:function(){return this._delegate.childNodes||[]},set:function(e){if(e&&"string"==typeof e)this._delegate.innerHTML=e;else if(e&&e instanceof Element){for(;this._delegate.hasChildNodes();)this._delegate.removeChild(this._delegate.firstChild);this._delegate.appendChild(e)}return this}},{key:"_updateStyle",value:function(e,t,r){if(this._show&&e){var n=e.x-this._delegate.offsetWidth/2,i=e.y-this._delegate.offsetHeight/2,o="translate3d(".concat(Math.round(n),"px,").concat(Math.round(i),"px, 0)"),a="scale3d(1,1,1)",s=this._style.scaleByDistance;if(t&&s){var l=s.near||0,c=s.nearValue||1,u=s.far||Number.MAX_VALUE,f=s.farValue||0,h=t/u;if(t<l)a="scale3d(".concat(c,",").concat(c,",1)");else if(t>u)a="scale3d(".concat(f,",").concat(f,",1)");else{var d=f+h*(c-f);a="scale3d(".concat(d,",").concat(d,",1)")}}var p=!0,y=this._style.distanceDisplayCondition;t&&y&&(p=fe.isBetween(t,y.near||0,y.far||Number.MAX_VALUE)),this._delegate.style.transform="".concat(o," ").concat(a),this._delegate.style.visibility=p&&r?"visible":"hidden"}}},{key:"_onAdd",value:function(e){var t=this;this._layer=e,this._layer.delegate.appendChild(this._delegate);var r={layer:e,graphic:this,position:te.transformWGS84ToCartesian(this._position)};this._delegate.addEventListener("click",(function(){t._graphicEvent.fire(M.CLICK,r)})),this._delegate.addEventListener("mouseover",(function(){t._graphicEvent.fire(M.MOUSE_OVER,r)})),this._delegate.addEventListener("mouseout",(function(){t._graphicEvent.fire(M.MOUSE_OUT,r)})),this._state=E.ADDED}},{key:"_onRemove",value:function(){this._layer&&(this._layer.delegate.removeChild(this._delegate),this._state=E.REMOVED)}},{key:"setLabel",value:function(e,t){return this}},{key:"setStyle",value:function(e){return e&&0!==Object.keys(e).length?(this._style=e,this._style.className&&Q.addClass(this._delegate,this._style.className),this):this}},{key:"flyTo",value:function(e){this._layer._viewer.camera.flyTo(fo({destination:this.earthPosition},e))}}],[{key:"fromEntity",value:function(e,t){var n,i,o=A.JulianDate.now();(n=new r({position:te.transformCartesianToWGS84(e.position.getValue(o)),content:t}),e.billboard)&&(n.attr=fo({},null==e||null===(i=e.properties)||void 0===i?void 0:i.getValue(o)));return n}}]),r}(Bn);Bn.registerType("divIcon");var yo=po;function mo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var go=function(e){d()(r,e);var t=vo(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._delegate=new A.Entity({model:{}}),e._rotateAmount=0,e._type=jn.getGraphicType("model"),e._state=E.INITIALIZED,e}return f()(r,[{key:"modelUrl",get:function(){return this._delegate.model.uri},set:function(e){return this._delegate.model.uri=e,this}},{key:"rotateAmount",get:function(){return this._rotateAmount},set:function(e){var t=this;return this._rotateAmount=+e,this._delegate.orientation=new A.CallbackProperty((function(e){return t.heading+=t._rotateAmount,(t.heading>=360||t.heading<=-360)&&(t.heading=0),A.Transforms.headingPitchRollQuaternion(t.cartesian,new A.HeadingPitchRoll(A.Math.toRadians(t.heading),A.Math.toRadians(t.pitch),A.Math.toRadians(t.roll)))}),!1),this}},{key:"_mountedHook",value:function(){bn()(v()(r.prototype),"_mountedHook",this).call(this),this.position=this._position,X.merge(this._delegate.model,this._style)}},{key:"setModel",value:function(){}}],[{key:"fromEntity",value:function(e,t){var n=A.JulianDate.now(),i=new r({position:te.transformCartesianToWGS84(e.position.getValue(n)),style:{uri:t}});return i.attr=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mo(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e.properties.getValue(n)),i}}]),r}(jn);jn.registerType("model");var Ao=go;function _o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Co(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_o(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Eo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var xo=function(e){d()(r,e);var t=Eo(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(c()(this,r),e=t.call(this,n),n.luminanceAtZenith&&A.ImageBasedLighting&&(n.imageBasedLighting=new A.ImageBasedLighting({luminanceAtZenith:n.luminanceAtZenith})),e._delegate=new A.Cesium3DTileset(Co({},n)),e._tileVisibleCallback=void 0,e._properties=void 0,e._fragmentShader=void 0,e._replaceFS=!1,e._type=Bn.getGraphicType("tileset"),e._state=E.INITIALIZED,e.style.highlight){e._previousPickedFeature={feature:void 0,originalColor:void 0};var i=e.style.highlight.type.toUpperCase();e.removeEventHightClick=e.on(O[i],e._highlight,z()(e))}return e}return f()(r,[{key:"readyPromise",get:function(){return this._delegate.readyPromise}},{key:"boundingSphere",get:function(){return this._delegate.ready?this._delegate.boundingSphere:null}},{key:"modelMatrix",get:function(){return this._delegate.root.transform},set:function(e){this._delegate.root.transform=e}},{key:"_mountedHook",value:function(){bn()(v()(r.prototype),"_mountedHook",this).call(this),this.style.highlight&&this._layer._viewer.viewerEvent.on(w[this.style.highlight.type.toUpperCase()],this.closeHighlight,this)}},{key:"_addedHook",value:function(){var e,t,r;null!==(e=this._layer)&&void 0!==e&&null!==(t=e.primitiveCollection)&&void 0!==t&&t.add&&this._delegate&&(null===(r=this._layer)||void 0===r||r.primitiveCollection.add(this._delegate))}},{key:"_removedHook",value:function(){var e,t,r;null!==(e=this._layer)&&void 0!==e&&null!==(t=e.primitiveCollection)&&void 0!==t&&t.remove&&this._delegate&&(null===(r=this._layer)||void 0===r||r.primitiveCollection.remove(this._delegate));this.style.highlight&&this._layer._viewer.viewerEvent.off(w[this.style.highlight.type.toUpperCase()],this.closeHighlight,this),this.removeEventHightClick&&this.removeEventHightClick()}},{key:"_bindVisibleEvent",value:function(){this._tileVisibleCallback&&this._tileVisibleCallback(),this._tileVisibleCallback=this._delegate.tileVisible.addEventListener(this._updateTile,this)}},{key:"_updateTile",value:function(e){var t=this,r=e.content,n=r._model;if(!n.renderOk){for(var i=function(e){var n=r.getFeature(e);t._properties&&t._properties.length&&t._properties.forEach((function(e){n.hasProperty(e.key)&&n.getProperty(e.key)===e.keyValue&&n.setProperty(e.propertyName,e.propertyValue)}))},o=0;o<r.featuresLength;o++)i(o);this._fragmentShader&&n&&n._sourcePrograms&&n._rendererResources&&(Object.keys(n._sourcePrograms).forEach((function(e){var r=n._sourcePrograms[e],i=n._rendererResources.sourceShaders;if(t._replaceFS)i[r.fragmentShader]=t._fragmentShader;else{var o=i[r.fragmentShader];i[r.fragmentShader]=o.replace("gl_FragColor = vec4(color, 1.0);\n}","gl_FragColor = vec4(color, 1.0);\n               ".concat(t._fragmentShader,"\n}\n              "))}})),n._shouldRegenerateShaders=!0),n.renderOk=!0}}},{key:"_highlight",value:function(e){null!=this._previousPickedFeature.feature&&(this._previousPickedFeature.feature.color=this._previousPickedFeature.originalColor),e.feature&&(e.feature!==this._previousPickedFeature.feature&&(this._previousPickedFeature.feature=e.feature,this._previousPickedFeature.originalColor=e.feature.color),e.feature.color=A.Color.fromCssColorString(this.style.highlight.color))}},{key:"closeHighlight",value:function(){var e;null!=(null===(e=this._previousPickedFeature)||void 0===e?void 0:e.feature)&&(this._previousPickedFeature.feature.color=this._previousPickedFeature.originalColor)}},{key:"setPosition",value:function(e){return e=se.parsePosition(e),this.readyPromise.then((function(t){var r=A.Transforms.eastNorthUpToFixedFrame(A.Cartesian3.fromDegrees(e.lng,e.lat,e.alt)),n=A.Matrix4.fromRotationTranslation(A.Matrix3.fromHeadingPitchRoll(new A.HeadingPitchRoll(A.Math.toRadians(e.heading),A.Math.toRadians(e.pitch),A.Math.toRadians(e.roll))));A.Matrix4.multiply(r,n,r),t.root.transform=r})),this}},{key:"setHeadingPitchRoll",value:function(e,t,r){return this.readyPromise.then((function(n){var i=n.root.transform,o=A.Matrix4.fromRotationTranslation(A.Matrix3.fromHeadingPitchRoll(new A.HeadingPitchRoll(A.Math.toRadians(e||0),A.Math.toRadians(t||0),A.Math.toRadians(r||0))));A.Matrix4.multiply(i,o,i),n.root.transform=i})),this}},{key:"setLabel",value:function(e,t){return this}},{key:"clampToGround",value:function(){return this.readyPromise.then((function(e){var t=A.Cartographic.fromCartesian(e.boundingSphere.center),r=A.Cartesian3.fromRadians(t.longitude,t.latitude,t.height),n=A.Cartesian3.fromRadians(t.longitude,t.latitude,0),i=A.Cartesian3.subtract(n,r,new A.Cartesian3);e.modelMatrix=A.Matrix4.fromTranslation(i)})),this}},{key:"setHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.readyPromise.then((function(r){var n=A.Cartographic.fromCartesian(r.boundingSphere.center),i=A.Cartesian3.fromRadians(n.longitude,n.latitude,n.height),o=A.Cartesian3.fromRadians(n.longitude,n.latitude,t?e:n.height+e),a=A.Cartesian3.subtract(o,i,new A.Cartesian3);r.modelMatrix=A.Matrix4.fromTranslation(a)})),this}},{key:"setScale",value:function(e){return this.readyPromise.then((function(t){var r=t.root.transform;e>0&&1!==e&&A.Matrix4.multiplyByUniformScale(r,e,r),t.root.transform=r})),this}},{key:"setProperties",value:function(e){return this._properties=e,this._bindVisibleEvent(),this}},{key:"setCustomShader",value:function(e){return e instanceof A.CustomShader?this._delegate.customShader=e:(this._replaceFS=!0,this._fragmentShader=e,this._bindVisibleEvent()),this}},{key:"appendFS",value:function(e){return this._replaceFS=!1,this._fragmentShader=e,this._bindVisibleEvent(),this}},{key:"setSplitDirection",value:function(e){return this.readyPromise.then((function(t){t.splitDirection=e})),this}},{key:"setStyle",value:function(e){return e&&e instanceof A.Cesium3DTileStyle&&(this._tilesetStyle=e,this._delegate.style=this._tilesetStyle),this}}]),r}(Bn);Bn.registerType("tileset");var Bo=xo;function To(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Po=function(e){d()(r,e);var t=bo(r);function r(e){var n;return c()(this,r),(n=t.call(this,e))._cache=[],n._maxCacheSize=(null==e?void 0:e.maxCacheSize)||50,n._modelMatrix=e.modelMatrix||void 0,e.position&&(n._position=se.parsePosition(e.position)),n}return f()(r,[{key:"position",get:function(){return this.property&&this.property instanceof A.SampledPositionProperty?te.transformCartesianToWGS84(this.property.getValue(A.JulianDate.now())):this._position},set:function(e){var t;return this._position=se.parsePosition(e),this._delegate&&(null===(t=this._delegate)||void 0===t?void 0:t.type)!==this.type&&(this._delegate.position=te.transformWGS84ToCartesian(this._position)),this._delegate_label&&(this._delegate_label.position=te.transformWGS84ToCartesian(this._position)),this.updateModelMatrix(),this}},{key:"modelMatrix",get:function(){var e;return this._modelMatrix||(null===(e=this.delegate)||void 0===e?void 0:e.modelMatrix)},set:function(e){var t;this._modelMatrix=e,this.delegate&&(null===(t=this._delegate)||void 0===t?void 0:t.type)!==this.type&&(this.delegate.modelMatrix=e)}},{key:"heading",get:function(){var e;return null!==(e=this.style.heading)&&void 0!==e?e:0},set:function(e){this._style.heading=e,this.updateModelMatrix()}},{key:"pitch",get:function(){var e;return null!==(e=this.style.pitch)&&void 0!==e?e:0},set:function(e){this._style.pitch=e,this.updateModelMatrix()}},{key:"roll",get:function(){var e;return null!==(e=this.style.roll)&&void 0!==e?e:0},set:function(e){this._style.roll=e,this.updateModelMatrix()}},{key:"updateModelMatrix",value:function(){var e;if(this.position){if(this._orientation){var t=this._orientation.getValue(A.JulianDate.now()),r=this.property.getValue(A.JulianDate.now());t&&r&&(this.modelMatrix=A.Matrix4.fromRotationTranslation(A.Matrix3.fromQuaternion(t,new A.Matrix3),r,this.modelMatrix))}else this.modelMatrix=A.Transforms.headingPitchRollToFixedFrame(te.transformWGS84ToCartesian(this.position),A.HeadingPitchRoll.fromDegrees(this.heading,this.pitch,this.roll));this.delegate&&(null===(e=this._delegate)||void 0===e?void 0:e.type)!==this.type&&(this.delegate.modelMatrix=this.modelMatrix)}}},{key:"bindUpdateEvent",value:function(){this._removeUpdateEvent=this._layer._viewer.sceneEvent.on(D,this.updatePosition,this)}},{key:"_initSampledPositionProperty",value:function(){this._cache=this.property._property._times,this._orientation=new A.VelocityOrientationProperty(this.property),this.bindUpdateEvent()}},{key:"addDynamicPosition",value:function(e,t){this._removePosition();var r=A.JulianDate.now(),n=t instanceof A.JulianDate?t:A.JulianDate.addSeconds(r,t,new A.JulianDate);return this.property?this.property.addSample(n,te.transformWGS84ToCartesian(se.parsePosition(e))):(this.property=new A.SampledPositionProperty,this.property.addSample(n,te.transformWGS84ToCartesian(se.parsePosition(e))),this._initSampledPositionProperty()),this}},{key:"updatePosition",value:function(e,t){if(this._delegate){var r,n=null===(r=this.property)||void 0===r?void 0:r.getValue(t);n&&(this._delegate.position=n,this._delegate_label&&(this._delegate_label.position=n))}}},{key:"_removePosition",value:function(){if(this._cache&&this._cache.length>this._maxCacheSize){var e=A.JulianDate.addSeconds(this._cache[0],-.2,new A.JulianDate),t=A.JulianDate.addSeconds(this._cache[this._cache.length-this._maxCacheSize],-.2,new A.JulianDate);this.property.removeSamples(new A.TimeInterval({start:e,stop:t})),this._cache.splice(0,this._cache.length-this._maxCacheSize)}}},{key:"clampToGround",value:function(){var e,t=this;this._layer&&null!==(e=this._layer)&&void 0!==e&&e._viewer&&ke.pointsClampToGround({viewer:this._layer._viewer,positions:[this._position]}).then((function(e){e&&e.length>0&&(t.position=e[0])}))}},{key:"flyTo",value:function(e){this._layer._viewer.camera.flyTo(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?To(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):To(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({destination:this.earthPosition},e))}},{key:"_getGeoJsonGeometry",value:function(e){return{type:"Point",coordinates:se.parsePointCoordToArray(this.position,null==e?void 0:e.noAlt)}}}]),r}(Mn);function Mo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var wo=function(e){d()(r,e);var t=Mo(r);function r(e){var n;return c()(this,r),(n=t.call(this,e))._positions=se.parsePositions(e.positions),n}return f()(r,[{key:"positions",get:function(){return this._positions},set:function(e){return this._positions=se.parsePositions(e),this._delegate.positions=te.transformWGS84ArrayToCartesianArray(this._positions),this}},{key:"center",get:function(){return fe.center(this._positions)}},{key:"boundingSphere",get:function(){return this._boundingSphere||(this._boundingSphere=A.BoundingSphere.fromPoints(te.transformWGS84ArrayToCartesianArray(this._positions))),this._boundingSphere}},{key:"distance",get:function(){return fe.distance(this._positions)}},{key:"_getGeoJsonGeometry",value:function(e){return{type:"LineString",coordinates:se.parsePolylineCoordToArray(this.positions,null==e?void 0:e.noAlt)}}}]),r}(Mn);function Io(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Do(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var So=function(e){d()(r,e);var t=Do(r);function r(e){var n;return c()(this,r),(n=t.call(this,e))._def_style={scale:1,horizontalOrigin:A.HorizontalOrigin.CENTER,verticalOrigin:A.VerticalOrigin.BOTTOM,scaleByDistance:new A.NearFarScalar(150,1,8e6,.2)},n._type=Bn.getGraphicType("billboardP"),n}return f()(r,[{key:"_mountedHook",value:function(){bn()(v()(r.prototype),"_mountedHook",this).call(this),this._delegate=this._layer.billboardCollection.add(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Io(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Io(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({position:te.transformWGS84ToCartesian(this.position)},this._style))}},{key:"_removedHook",value:function(){this._layer.billboardCollection.remove(this._delegate),this._delegate=null}}]),r}(Po);Bn.registerType("billboardP");var Oo=So;function Ro(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Lo=function(e){d()(r,e);var t=Ro(r);function r(e){var n;return c()(this,r),(n=t.call(this,e))._type=Bn.getGraphicType("boxPrimitive"),n}return f()(r,[{key:"_organizeGeometry",value:function(){var e=this,t={};return["dimensions","vertexFormat"].forEach((function(r){A.defined(e.style[r])&&(t[r]=e.style[r])})),A.BoxGeometry.fromDimensions(t)}}]),r}(Po);Bn.registerType("boxPrimitive");var ko=Lo;function Fo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Go=function(e){d()(r,e);var t=Fo(r);function r(e){var n;return c()(this,r),(n=t.call(this,e))._type=Bn.getGraphicType("corridorP"),n}return f()(r,[{key:"_organizeGeometry",value:function(){var e=this,t={positions:te.transformWGS84ArrayToCartesianArray(this._positions)};return["width","height","extrudedHeight","cornerType","vertexFormat","ellipsoid","granularity"].forEach((function(r){A.defined(e.style[r])&&(t[r]=e.style[r])})),new A.CorridorGeometry(t)}}]),r}(wo);Bn.registerType("corridorP");var No=Go;function zo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Uo=function(e){d()(r,e);var t=zo(r);function r(e){var n;return c()(this,r),(n=t.call(this,e))._type=Bn.getGraphicType("cylinderPrimitive"),n}return f()(r,[{key:"_organizeGeometry",value:function(){var e=this,t={};return["length","topRadius","slices","bottomRadius","ellipsoid"].forEach((function(r){A.defined(e.style[r])&&(t[r]=e.style[r])})),new A.CylinderGeometry(t)}}]),r}(Po);Bn.registerType("cylinderPrimitive");var Vo=Uo;function Wo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Ho=function(e){d()(r,e);var t=jo(r);function r(e){var n;return c()(this,r),(n=t.call(this,e))._def_style={fillColor:new A.Color(1,1,1,.5),horizontalOrigin:A.HorizontalOrigin.CENTER,scaleByDistance:new A.NearFarScalar(150,1,8e6,.2)},n._type=Bn.getGraphicType("labelPrimitive"),n}return f()(r,[{key:"_mountedHook",value:function(){bn()(v()(r.prototype),"_mountedHook",this).call(this),this._delegate=this._layer.labelCollection.add(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wo(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({position:te.transformWGS84ToCartesian(this._position)},this._style))}},{key:"_removedHook",value:function(){this._layer.labelCollection.remove(this._delegate),this._delegate=null}},{key:"setLabel",value:function(e){return this}}]),r}(Po);Bn.registerType("labelPrimitive");var Zo=Ho;function Yo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Ko=function(e){d()(r,e);var t=Jo(r);function r(e){var n;return c()(this,r),(n=t.call(this,e))._def_style={color:new A.Color(1,1,1,.5),pixelSize:16,scaleByDistance:new A.NearFarScalar(150,1,8e6,.2)},n._type=Bn.getGraphicType("pointPrimitive"),n}return f()(r,[{key:"_mountedHook",value:function(){bn()(v()(r.prototype),"_mountedHook",this).call(this),this._delegate=this._layer.pointCollection.add(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yo(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({position:te.transformWGS84ToCartesian(this._position)},this._style))}},{key:"_removedHook",value:function(){this._layer.pointCollection.remove(this._delegate),this._delegate=null}}]),r}(Po);Bn.registerType("pointPrimitive");var Xo=Ko;function Qo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var $o=function(e){d()(r,e);var t=qo(r);function r(e){var n;return c()(this,r),(n=t.call(this,e))._def_style={material:new A.Color(1,1,1,.5),width:2},n._type=Bn.getGraphicType("polylinePrimitive"),n}return f()(r,[{key:"_mountedHook",value:function(){bn()(v()(r.prototype),"_mountedHook",this).call(this),this._delegate=this._layer.polylineCollection.add(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qo(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({positions:te.transformWGS84ArrayToCartesianArray(this._positions)},this._style))}},{key:"_removedHook",value:function(){this._layer.polylineCollection.remove(this._delegate),this._delegate=null}}]),r}(wo);Bn.registerType("polylinePrimitive");var ea=$o;function ta(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var ra=function(e){d()(r,e);var t=ta(r);function r(e){var n;return c()(this,r),(n=t.call(this,e))._type=Bn.getGraphicType("polygonPrimitive"),n}return f()(r,[{key:"_organizeGeometry",value:function(){var e=this,t={positions:te.transformWGS84ArrayToCartesianArray(this._positions)};return["height","extrudedHeight","vertexFormat","stRotation","ellipsoid","granularity","perPositionHeight","closeTop","closeBottom","arcType"].forEach((function(r){A.defined(e.style[r])&&(t[r]=e.style[r])})),A.PolygonGeometry.fromPositions(t)}},{key:"_getGeoJsonGeometry",value:function(e){return{type:"Polygon",coordinates:se.parsePolygonCoordToArray(this.positions,null==e?void 0:e.noAlt)}}}]),r}(wo);Bn.registerType("polygonPrimitive");var na=ra;function ia(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ia(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ia(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function aa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var sa=function(e){d()(r,e);var t=aa(r);function r(e){var n;return c()(this,r),(n=t.call(this,e))._zOffset=0,n._type=Bn.getGraphicType("modelPrimitive"),n}return f()(r,[{key:"zOffset",get:function(){return this._zOffset},set:function(e){var t=e-this._zOffset;this._zOffset=e;var r=A.Cartesian3.fromDegrees(this._position.lng,this._position.lat,0),n=A.Cartesian3.normalize(r,new A.Cartesian3),i=A.Matrix4.getTranslation(this._delegate.modelMatrix,new A.Cartesian3),o=A.Cartesian3.add(i,A.Cartesian3.multiplyByScalar(n,t,new A.Cartesian3),new A.Cartesian3),a=A.Matrix4.setTranslation(this._delegate.modelMatrix,o,new A.Matrix4);this._delegate.modelMatrix=a}},{key:"boundingSphere",get:function(){return!this._boundingSphere&&this._delegate.ready&&(this._boundingSphere=this._delegate.boundingSphere),this._boundingSphere}},{key:"_mountedHook",value:function(){bn()(v()(r.prototype),"_mountedHook",this).call(this);var e=A.Matrix4.IDENTITY;this._position&&(this.position=this._position),e=this._style.modelMatrix||this.modelMatrix||e,this._style.url?this._delegate=A.Model.fromGltf(oa({modelMatrix:e},this._style)):this._style.gltf&&(this._delegate=new A.Model(oa({modelMatrix:e},this._style))),this._layer.primitiveCollection.add(this._delegate)}},{key:"_removedHook",value:function(){this._layer.primitiveCollection.remove(this._delegate),this._delegate=null}},{key:"updatePosition",value:function(e,t){bn()(v()(r.prototype),"updatePosition",this).call(this,e,t),this.updateModelMatrix()}},{key:"flyTo",value:function(e){var t=this;this._delegate.ready?this.boundingSphere&&this._layer._viewer.camera.flyToBoundingSphere(this.boundingSphere,e):this._delegate.readyPromise.then((function(){t.boundingSphere&&t._layer._viewer.camera.flyToBoundingSphere(t.boundingSphere,e)}))}}]),r}(Po);Bn.registerType("modelPrimitive");var la=sa;function ca(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var ua=function(e){d()(r,e);var t=ca(r);function r(e){var n;return c()(this,r),(n=t.call(this,e))._type=Bn.getGraphicType("wallPrimitive"),n}return f()(r,[{key:"_organizeGeometry",value:function(){var e=this,t={positions:te.transformWGS84ArrayToCartesianArray(this._positions)};return["maximumHeight","minimumHeight","vertexFormat","ellipsoid"].forEach((function(r){A.defined(e.style[r])&&(t[r]=e.style[r])})),A.WallGeometry.fromConstantHeights(t)}}]),r}(wo);Bn.registerType("wallPrimitive");var fa=ua;function ha(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var da=function(e){d()(r,e);var t=ha(r);function r(e){var n;return c()(this,r),(n=t.call(this,e))._def_style={length:1e3,topRadius:35,bottomRadius:50},n._delegate=[],n._type=Po.getGraphicType("lightCylinderPrimitive"),n._state=E.INITIALIZED,n}return f()(r,[{key:"position",get:function(){return this._position},set:function(e){return this._position=se.parsePosition(e),this._createPrimitives(),this._delegate_label&&(this._delegate_label.position=te.transformWGS84ToCartesian(this._position)),this}},{key:"_addedHook",value:function(){this._createPrimitives()}},{key:"_removedHook",value:function(){var e=this;this._delegate.forEach((function(t){e._layer.primitiveCollection.remove(t)})),this._delegate=[]}},{key:"_computeEllipsePositions",value:function(e,t){var r=A.EllipseGeometryLibrary.computeEllipsePositions({center:te.transformWGS84ToCartesian(e),semiMajorAxis:t,semiMinorAxis:t,rotation:0,granularity:.005},!1,!0),n=A.Cartesian3.unpackArray(r.outerPositions);return n.push(n[0]),n}},{key:"_createCylinderInstance",value:function(e,t,r){for(var n=t.slice(),i=t.length,o=2*i,a=[],s=1/(i-1),l=[],c=[],u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=A.Cartographic.fromCartesian(e);return r.height+=t,A.Cartographic.toCartesian(r)},f=0;f<i;f++){c.push(u(e[f],r)),a.push(f*s,0);var h=(f+1)%i,d=o-(f+1);l.push.apply(l,[d-1,d,f]),l.push.apply(l,[f,h,d-1])}for(var p in c)n.push(c[i-p-1]),a.push(1-p*s,1);var y=A.PolygonGeometry.createGeometry(new A.PolygonGeometry({polygonHierarchy:new A.PolygonHierarchy(n),perPositionHeight:!0}));return y.indices=l,y.attributes.st.values=a,new A.GeometryInstance({geometry:y})}},{key:"_getCircleImage",value:function(){var e=document.createElement("canvas");e.width=512,e.height=512;var t=e.getContext("2d");return t.fillStyle="rgba(255,255,255,0)",t.strokeStyle="rgba(255, 255, 255,255)",t.setLineDash([50,50]),t.lineWidth=30,t.beginPath(),t.arc(256,256,150,0,2*Math.PI,!0),t.stroke(),t.restore(),e}},{key:"_getParticlesImage",value:function(e){var t=document.createElement("canvas");t.width=64,t.height=256;var r=t.getContext("2d");return r.clearRect(0,0,64,256),r.drawImage(e,0,0),r.drawImage(e,33,0),t}},{key:"_createPrimitives",value:function(){var e=this;this._removedHook();var t=0===this._position.alt,r=this._computeEllipsePositions(this._position,this.style.topRadius),n=this._computeEllipsePositions(this._position,.7*this.style.bottomRadius),i=this._computeEllipsePositions(this._position,this.style.bottomRadius),o={geometryInstances:new A.GeometryInstance({geometry:new A.PolygonGeometry({polygonHierarchy:new A.PolygonHierarchy(this._computeEllipsePositions(this._position,2*this.style.bottomRadius)),perPositionHeight:!t})}),asynchronous:!1},a=t?new A.GroundPrimitive(o):new A.Primitive(o);a.appearance=new A.EllipsoidSurfaceAppearance({material:A.Material.fromType(A.Material.CircleRingType,{color:this._style.color||A.Color.ORANGE})});var s=t?new A.GroundPrimitive(o):new A.Primitive(o);s.appearance=new A.EllipsoidSurfaceAppearance({material:A.Material.fromType(A.Material.CircleRotateType,{color:this._style.color||A.Color.ORANGE,image:this._getCircleImage()})});var l=new A.Primitive({geometryInstances:this._createCylinderInstance(r,n,this.style.length),appearance:new A.EllipsoidSurfaceAppearance({material:A.Material.fromType(A.Material.CylinderFadeType,{color:this._style.color||A.Color.ORANGE})}),asynchronous:!1});this._delegate.push(a),this._delegate.push(s),this._delegate.push(l);A.Resource.fetchImage({url:this.style.particleImage||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAEACAYAAADSoXR2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjExQTg0NDEyMDEzQjExRUFBNDhBRjhGMUMzOUUyNTU0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjExQTg0NDEzMDEzQjExRUFBNDhBRjhGMUMzOUUyNTU0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTFBODQ0MTAwMTNCMTFFQUE0OEFGOEYxQzM5RTI1NTQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTFBODQ0MTEwMTNCMTFFQUE0OEFGOEYxQzM5RTI1NTQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz41vRwAAAAE90lEQVR42uydyW4UMRCG3T2dgYSAEGs4sp44cCJBcGUJbwCvALwWPAI8ABwAiUVwgLBdkEikJEiAGMhkZqhfU1aa1sy0g+yaJPyWSupOpPjz0uVyucrJer2eG2fJ3ZgLAQhAgC0PgN8XIlkqgGLE75oih0WmRVZEvop0rHog18rnRe6IzInsthyCXFt+TuSKyGmRXZZDgK5eFrkv8l7kiUhrxN/JSo3pigSvcNmI1bCh3b5LK2+NqHyvyEF9x3z5HgqRRViOAXhW5JrCoNdei/y20gMYxhmRSyIXRY6JTMT4DENLW+SdyD19x/NajDmwmYIW79Hnn+MA4GJEAAIQgABJbMJB+n5Sl9zWZvR9DABUfkJkVt8fi3zUldAEoKl24Y2S1fPZEmBdZFHkkb4vxTLRQ5djbyUf0ncYrD/UADUB8MZno2Q19yx7gIqIAAQgAAEIQIAtYZT+85LvRnjQCoPKR3rQUgN4Y3ZeK30g8qps0qeeAzDn4TWD9+ySG+BBS90DaGnVg9a2tgnR4il9/jkOACoiAhCAAASIZpAAFl6yulO0JACo/IDrn6CedP1zxOciv6wAYNnAP3RVBeWtJQCWzG8iL/X9g4vkqNzMctzUXtintt2KM/aS+bmQaY90rb8CF6tSKiICEIAABCAAAQiwbfcFIWVCbUcc9bZDLKiYAKj4uOv7Bb+ILLj+8W7PCgC7Jhzv44Qdh9yrru8V61jPgd645gD2io+15RiC5ZA5ENNPmGmDmtrta9YAVEQE2FlrQUM/J6efU8cSAD87ojodBaccS6kgiiErGiq/qe93XT+3oGU5BJnbyKrIUs6BQZoQUEcrQ7CYagiGqeKiMgnXLXsg5uJUm/RQJKy8fGS7PMw6SgVQPrJFGZr0kCfUL/7IFjIzrLGpemBQ0kPbehL6I9vMjUh6oEVEAAIQgAAEIAABdpyj0qcK71YrqGUJANNrv+sHOcAiRpDDM1cTY1BEHk7kqyP/2Ac5vLEEQEG8aDnIoTb5ObZRWg5ywG5o1dX4ClNYxT7IISgJPsXGpLut9MCWU0S5bqkmdAa3LQEwcZDAfkZ3tthQfkwNkVeeD6kiuaUabcp6DpS9YyalrAdQ8bT1EFQVUabarND9fNuyB2gREYAABCAAAQhAAAIQoM770UgBXARCIr/koDogVlzgrWuxemBKd0m4JnBed0+5ZQ9gn3BK5LK+P4y5ewoB8DFiKO91COLFfwVuTCZV1hSoYw1APZCsFIkbN1Haaa87wwiKQe6eT27AEX6esPVVd8/kOOdAz/oz9FE0p+uGIKUeqE5C8xgSKiICEIAABCAAAQhAAAIQgAAEIAABCECA6AA+sbkREyDUUYlKD6ggZwzRkr8tewBhusisv+0in5qE/hFchoZTE0TL4p8sTbtIpyahQ4Ag5fKpSVBmfdDECvQTZjoM0U9N6KgkwH9xY7PXpPiCmq5yuaLVldHIO7jgNi5XfOEhCqNh9udHV/RnC5YAUDTftdV4/ivvwEoRVS9XXPWa1FIT5ird8jpSB+BDN3rO8AaGMnGy0I0QRYTvdk6NkOsucuhGCMAgI8Q0isaHbmAevNMhiD4P6iZhstANGiQE2PEGCRo2NcgAsQDwKnxWFdlT17/duWU1BJmuHz6A5bwbEsCScgh+qAHit3Jr1oooOPExdRBLbeJjSpuwuy30AAH+CDAAPH5ltESNYl4AAAAASUVORK5CYII="}).then((function(t){var n=new A.Primitive({geometryInstances:e._createCylinderInstance(r,i,e.style.length),appearance:new A.EllipsoidSurfaceAppearance({material:A.Material.fromType(A.Material.CylinderParticlesType,{color:e._style.color||A.Color.ORANGE,image:e._getParticlesImage(t)})}),asynchronous:!1});e._delegate.push(n),e._delegate.forEach((function(t){e._layer.primitiveCollection.add(t)}))}))}}]),r}(Po);Po.registerType("lightCylinderPrimitive");var pa=da;function ya(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var ma=function(e){d()(r,e);var t=ya(r);function r(e){var n;return c()(this,r),(n=t.call(this,e))._type=Bn.getGraphicType("road"),n}return f()(r,[{key:"_organizeGeometry",value:function(){var e=this,t={positions:te.transformWGS84ArrayToCartesianArray(this._positions)};["width","height","extrudedHeight","cornerType","vertexFormat","ellipsoid","granularity"].forEach((function(r){A.defined(e.style[r])&&(t[r]=e.style[r])}));var r=new A.CorridorGeometry(t),n=(A.CorridorGeometry.createGeometry(r),{ellipsoid:r._ellipsoid,positions:r._positions,width:r._width,cornerType:r._cornerType,granularity:r._granularity,saveAttributes:!0});A.CorridorGeometryLibrary.computePositions(n);return r}}]),r}(wo);Bn.registerType("road");var va=ma;function ga(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Aa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var _a=function(e){d()(r,e);var t=Aa(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n)).headHeightFactor=.18,e.headWidthFactor=.3,e.neckHeightFactor=.85,e.neckWidthFactor=.15,e.headTailFactor=.8,e._type=Bn.getGraphicType("attackArrow"),e._state=E.INITIALIZED,e}return f()(r,[{key:"_computeHierarchy",value:function(){var e=se.parsePolygonCoordToArray(this.positions)[0],t=e[0],r=e[1];$.isClockWise(e[0],e[1],e[2])&&(t=e[1],r=e[0]);var n=[$.mid(t,r)].concat(e.slice(2)),i=this._getArrowHeadPoints(n,t,r),o=i[0],a=i[4],s=$.distance(t,r)/$.getBaseLength(n),l=this._getArrowBodyPoints(n,o,a,s),c=l.length,u=[t].concat(l.slice(0,c/2));u.push(o);var f=[r].concat(l.slice(c/2,c));return f.push(a),u=$.getQBSplinePoints(u),f=$.getQBSplinePoints(f),new A.PolygonHierarchy(te.transformWGS84ArrayToCartesianArray(se.parsePositions(u.concat(i,f.reverse()))))}},{key:"_getArrowHeadPoints",value:function(e,t,r){var n=Math.PI/2,i=$.getBaseLength(e),o=i*this.headHeightFactor,a=e[e.length-1];i=$.distance(a,e[e.length-2]);var s=$.distance(t,r);o>s*this.headTailFactor&&(o=s*this.headTailFactor);var l=o*this.headWidthFactor,c=o*this.neckWidthFactor,u=(o=o>i?i:o)*this.neckHeightFactor,f=$.getThirdPoint(e[e.length-2],a,0,o,!0),h=$.getThirdPoint(e[e.length-2],a,0,u,!0),d=$.getThirdPoint(a,f,n,l,!1),p=$.getThirdPoint(a,f,n,l,!0);return[$.getThirdPoint(a,h,n,c,!1),d,a,p,$.getThirdPoint(a,h,n,c,!0)]}},{key:"_getArrowBodyPoints",value:function(e,t,r,n){for(var i=$.wholeDistance(e),o=$.getBaseLength(e)*n,a=(o-$.distance(t,r))/2,s=0,l=[],c=[],u=1;u<e.length-1;u++){var f=$.getAngleOfThreePoints(e[u-1],e[u],e[u+1])/2,h=(o/2-(s+=$.distance(e[u-1],e[u]))/i*a)/Math.sin(f),d=$.getThirdPoint(e[u-1],e[u],Math.PI-f,h,!0),p=$.getThirdPoint(e[u-1],e[u],f,h,!1);l.push(d),c.push(p)}return l.concat(c)}}],[{key:"fromEntity",value:function(e){var t,n=void 0,i=A.JulianDate.now();e.polygon&&((n=new r({positions:te.transformCartesianArrayToWGS84Array(e.polygon.hierarchy.getValue(i).positions)})).attr=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ga(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ga(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},null==e||null===(t=e.properties)||void 0===t?void 0:t.getValue(i)));return n}}]),r}(ji);Bn.registerType("attackArrow");var Ca=_a;function Ea(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Ba=Math.PI/2,Ta=function(e){d()(r,e);var t=xa(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n)).headHeightFactor=.25,e.headWidthFactor=.3,e.neckHeightFactor=.85,e.neckWidthFactor=.15,e._type=Bn.getGraphicType("doubleArrow"),e._state=E.INITIALIZED,e}return f()(r,[{key:"_computeHierarchy",value:function(){var e,t,r=this.positions.length,n=void 0,i=void 0,o=se.parsePolygonCoordToArray(this.positions)[0],a=o[0],s=o[1],l=o[2];n=3===r?this._getTempPoint4(a,s,l):o[3],i=3===r||4===r?$.mid(a,s):o[4],$.isClockWise(a,s,l)?(e=this._getArrowPoints(a,i,n,!1),t=this._getArrowPoints(i,s,l,!0)):(e=this._getArrowPoints(s,i,l,!1),t=this._getArrowPoints(i,a,n,!0));var c=e.length,u=(c-5)/2,f=e.slice(0,u),h=e.slice(u,u+5),d=e.slice(u+5,c),p=t.slice(0,u),y=t.slice(u,u+5),m=t.slice(u+5,c);p=$.getBezierPoints(p);var v=$.getBezierPoints(m.concat(f.slice(1)));return d=$.getBezierPoints(d),new A.PolygonHierarchy(te.transformWGS84ArrayToCartesianArray(se.parsePositions(p.concat(y,v,h,d))))}},{key:"_getArrowPoints",value:function(e,t,r,n){var i=$.mid(e,t),o=$.distance(i,r),a=$.getThirdPoint(r,i,0,.3*o,!0),s=$.getThirdPoint(r,i,0,.5*o,!0),l=[i,a=$.getThirdPoint(i,a,Ba,o/5,n),s=$.getThirdPoint(i,s,Ba,o/4,n),r],c=this._getArrowHeadPoints(l),u=c[0],f=c[4],h=$.distance(e,t)/$.getBaseLength(l)/2,d=this._getArrowBodyPoints(l,u,f,h),p=d.length,y=d.slice(0,p/2),m=d.slice(p/2,p);return y.push(u),m.push(f),(y=y.reverse()).push(t),(m=m.reverse()).push(e),y.reverse().concat(c,m)}},{key:"_getArrowHeadPoints",value:function(e){var t=$.getBaseLength(e)*this.headHeightFactor,r=e[e.length-1],n=t*this.headWidthFactor,i=t*this.neckWidthFactor,o=t*this.neckHeightFactor,a=$.getThirdPoint(e[e.length-2],r,0,t,!0),s=$.getThirdPoint(e[e.length-2],r,0,o,!0),l=$.getThirdPoint(r,a,Ba,n,!1),c=$.getThirdPoint(r,a,Ba,n,!0);return[$.getThirdPoint(r,s,Ba,i,!1),l,r,c,$.getThirdPoint(r,s,Ba,i,!0)]}},{key:"_getArrowBodyPoints",value:function(e,t,r,n){for(var i=$.wholeDistance(e),o=$.getBaseLength(e)*n,a=(o-$.distance(t,r))/2,s=0,l=[],c=[],u=1;u<e.length-1;u++){var f=$.getAngleOfThreePoints(e[u-1],e[u],e[u+1])/2,h=(o/2-(s+=$.distance(e[u-1],e[u]))/i*a)/Math.sin(f),d=$.getThirdPoint(e[u-1],e[u],Math.PI-f,h,!0),p=$.getThirdPoint(e[u-1],e[u],f,h,!1);l.push(d),c.push(p)}return l.concat(c)}},{key:"_getTempPoint4",value:function(e,t,r){var n,i,o,a,s=$.mid(e,t),l=$.distance(s,r),c=$.getAngleOfThreePoints(e,s,r);return c<Ba?(i=l*Math.sin(c),o=l*Math.cos(c),a=$.getThirdPoint(e,s,Ba,i,!1),n=$.getThirdPoint(s,a,Ba,o,!0)):c>=Ba&&c<Math.PI?(i=l*Math.sin(Math.PI-c),o=l*Math.cos(Math.PI-c),a=$.getThirdPoint(e,s,Ba,i,!1),n=$.getThirdPoint(s,a,Ba,o,!1)):c>=Math.PI&&c<1.5*Math.PI?(i=l*Math.sin(c-Math.PI),o=l*Math.cos(c-Math.PI),a=$.getThirdPoint(e,s,Ba,i,!0),n=$.getThirdPoint(s,a,Ba,o,!0)):(i=l*Math.sin(2*Math.PI-c),o=l*Math.cos(2*Math.PI-c),a=$.getThirdPoint(e,s,Ba,i,!0),n=$.getThirdPoint(s,a,Ba,o,!1)),n}}],[{key:"fromEntity",value:function(e){var t,n=void 0,i=A.JulianDate.now();e.polygon&&((n=new r({positions:te.transformCartesianArrayToWGS84Array(e.polygon.hierarchy.getValue(i).positions)})).attr=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ea(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ea(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},null==e||null===(t=e.properties)||void 0===t?void 0:t.getValue(i)));return n}}]),r}(ji);Bn.registerType("doubleArrow");var ba=Ta;function Pa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ma(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var wa=function(e){d()(r,e);var t=Ma(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n)).tailWidthFactor=.15,e.neckWidthFactor=.2,e.headWidthFactor=.25,e.headAngle=Math.PI/8.5,e.neckAngle=Math.PI/13,e._type=Bn.getGraphicType("fineArrow"),e._state=E.INITIALIZED,e}return f()(r,[{key:"_computeHierarchy",value:function(){var e=Math.PI/2,t=se.parsePolygonCoordToArray(this.positions)[0],r=t[0],n=t[1],i=$.getBaseLength(t),o=i*this.tailWidthFactor,a=i*this.neckWidthFactor,s=i*this.headWidthFactor,l=$.getThirdPoint(n,r,e,o,!0),c=$.getThirdPoint(n,r,e,o,!1),u=$.getThirdPoint(r,n,this.headAngle,s,!1),f=$.getThirdPoint(r,n,this.headAngle,s,!0),h=$.getThirdPoint(r,n,this.neckAngle,a,!1),d=$.getThirdPoint(r,n,this.neckAngle,a,!0);return new A.PolygonHierarchy(te.transformWGS84ArrayToCartesianArray(se.parsePositions([l,h,u,n,f,d,c])))}}],[{key:"fromEntity",value:function(e){var t,n=void 0,i=A.JulianDate.now();e.polygon&&((n=new r({positions:te.transformCartesianArrayToWGS84Array(e.polygon.hierarchy.getValue(i).positions)})).attr=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pa(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},null==e||null===(t=e.properties)||void 0===t?void 0:t.getValue(i)));return n}}]),r}(ji);Bn.registerType("fineArrow");var Ia=wa;function Da(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Oa=Math.PI/2,Ra=function(e){d()(r,e);var t=Sa(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n)).t=.4,e._type=Bn.getGraphicType("gatheringPlace"),e._state=E.INITIALIZED,e}return f()(r,[{key:"_computeHierarchy",value:function(){var e=se.parsePolygonCoordToArray(this.positions)[0];if(2===this.positions.length){var t=$.mid(e[0],e[1]),r=$.distance(e[0],t)/.9,n=$.getThirdPoint(e[0],t,Oa,r,!0);e=[e[0],n,e[1]]}var i=$.mid(e[0],e[2]);e.push(i,e[0],e[1]);for(var o=[],a=0;a<e.length-2;a++){var s=e[a],l=e[a+1],c=e[a+2],u=$.getBisectorNormals(this.t,s,l,c);o=o.concat(u)}var f=o.length;o=[o[f-1]].concat(o.slice(0,f-1));for(var h=[],d=0;d<e.length-2;d++){var p=e[d],y=e[d+1];h.push(p);for(var m=0;m<=100;m++){var v=$.getCubicValue(m/100,p,o[2*d],o[2*d+1],y);h.push(v)}h.push(y)}return new A.PolygonHierarchy(te.transformWGS84ArrayToCartesianArray(se.parsePositions(h)))}}],[{key:"fromEntity",value:function(e){var t,n=void 0,i=A.JulianDate.now();e.polygon&&((n=new r({positions:te.transformCartesianArrayToWGS84Array(e.polygon.hierarchy.getValue(i).positions)})).attr=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Da(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Da(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},null==e||null===(t=e.properties)||void 0===t?void 0:t.getValue(i)));return n}}]),r}(ji);Bn.registerType("gatheringPlace");var La=Ra;function ka(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Fa=function(e){d()(r,e);var t=ka(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n)).headHeightFactor=.18,e.headWidthFactor=.3,e.neckHeightFactor=.85,e.neckWidthFactor=.15,e.tailWidthFactor=.1,e.headTailFactor=.8,e.swallowTailFactor=1,e._type=Bn.getGraphicType("tailedAttackArrow"),e._state=E.INITIALIZED,e}return f()(r,[{key:"_computeHierarchy",value:function(){var e=se.parsePolygonCoordToArray(this.positions)[0],t=e[0],r=e[1];$.isClockWise(e[0],e[1],e[2])&&(t=e[1],r=e[0]);var n=[$.mid(t,r)].concat(e.slice(2)),i=this._getArrowHeadPoints(n,t,r),o=i[0],a=i[4],s=$.distance(t,r),l=$.getBaseLength(n),c=l*this.tailWidthFactor*this.swallowTailFactor,u=$.getThirdPoint(n[1],n[0],0,c,!0),f=s/l,h=this._getArrowBodyPoints(n,o,a,f),d=h.length,p=[t].concat(h.slice(0,d/2));p.push(o);var y=[r].concat(h.slice(d/2,d));return y.push(a),p=$.getQBSplinePoints(p),y=$.getQBSplinePoints(y),new A.PolygonHierarchy(te.transformWGS84ArrayToCartesianArray(se.parsePositions(p.concat(i,y.reverse(),[u,p[0]]))))}}]),r}(Ca);Bn.registerType("tailedAttackArrow");var Ga=Fa;function Na(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function za(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Ua=function(e){d()(r,e);var t=za(r);function r(e){var n,i,o;return c()(this,r),(o=t.call(this,e))._gravity=null!==(n=e.gravity)&&void 0!==n?n:0,o._target=null!==(i=e.target)&&void 0!==i?i:void 0,o._maxHeight=e.maxHeight||5e3,o.emitterModelMatrix=new A.Matrix4,o._translation=e.translation||A.Cartesian3.ZERO,o.rotation=new A.Quaternion,o.hpr=new A.HeadingPitchRoll,o.trs=new A.TranslationRotationScale,o._type=Bn.getGraphicType("particleSystem"),o}return f()(r,[{key:"position",get:function(){return this._position},set:function(e){return this._position=se.parsePosition(e),this._delegate_label&&(this._delegate_label.position=te.transformWGS84ToCartesian(this._position)),this}},{key:"gravity",get:function(){return this._gravity},set:function(e){this._gravity=e}},{key:"target",get:function(){return this._target},set:function(e){this._target=e}},{key:"translation",get:function(){return this._translation},set:function(e){this._translation=e}},{key:"_mountedHook",value:function(){var e=this;bn()(v()(r.prototype),"_mountedHook",this).call(this);var t=this._computeModelMatrix(A.JulianDate.now()),n=new A.ParticleSystem(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Na(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Na(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({modelMatrix:t,emitterModelMatrix:this._computeEmitterModelMatrix(),updateCallback:function(t,r){var n=t.position,i=new A.Cartesian3;A.Cartesian3.normalize(n,i),A.Cartesian3.multiplyByScalar(i,e._gravity*r,i),e._target&&A.Cartesian3.add(i,e._target,i),t.velocity=A.Cartesian3.add(t.velocity,i,t.velocity)}},this._style));this._delegate=this._layer.primitiveCollection.add(n),this.bindUpdateEvent(),this._camera_changedHandler()}},{key:"_camera_changedHandler",value:function(){var e=this;this._removeCameraUpdateEvent=this._layer._viewer.sceneEvent.on(I,(function(){if(e.show){var t=e._layer._viewer.cameraPosition;e._delegate.show=t.alt<e._maxHeight}}),this)}},{key:"_removedHook",value:function(){this._removeCameraUpdateEvent&&this._removeCameraUpdateEvent(),this._removeCameraUpdateEvent=null,this._layer.primitiveCollection.remove(this._delegate),this._delegate=null}},{key:"_computeModelMatrix",value:function(e){var t=A.Matrix4.IDENTITY;return this._position?this.updateModelMatrix():t="function"==typeof this._modelMatrix?this._modelMatrix(e):this.modelMatrix,t}},{key:"_computeEmitterModelMatrix",value:function(){return this.hpr=A.HeadingPitchRoll.fromDegrees(this.heading,this.pitch,this.roll,this.hpr),this.trs.translation=this._translation,this.trs.rotation=A.Quaternion.fromHeadingPitchRoll(this.hpr,this.rotation),A.Matrix4.fromTranslationRotationScale(this.trs,this.emitterModelMatrix)}},{key:"updatePosition",value:function(e,t){this._delegate.emitterModelMatrix=this._computeEmitterModelMatrix(),this._delegate.modelMatrix=this._computeModelMatrix(t)}}]),r}(Po);Bn.registerType("particleSystem");var Va=Ua;function Wa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var ja=function(e){d()(r,e);var t=Wa(r);function r(e){var n;return c()(this,r),(n=t.call(this,e))._instances=e.instances||[],n}return f()(r,[{key:"instances",get:function(){return this._instances},set:function(e){this._instances=e}},{key:"createPickId",value:function(e){return this.id+"#"+e}},{key:"getPickedObject",value:function(e){var t=Number(e.split("#")[1]);return this._instances[t]}},{key:"_organizeGeometryInstance",value:function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i,o,a,s,l,c=new A.GeometryInstance({geometry:e[r],id:this.createPickId(r)}),u={};if(null!==(i=this._instances[r].style)&&void 0!==i&&i.color)c.attributes={color:A.ColorGeometryInstanceAttribute.fromColor(null===(l=this._instances[r].style)||void 0===l?void 0:l.color)};null!==(o=this._instances[r].style)&&void 0!==o&&o.distanceDisplayCondition&&(u.distanceDisplayCondition=new A.DistanceDisplayConditionGeometryInstanceAttribute(null===(a=this._instances[r].style)||void 0===a?void 0:a.distanceDisplayCondition.near,null===(s=this._instances[r].style)||void 0===s?void 0:s.distanceDisplayCondition.far)),Object.keys(u).length>0&&(c.attributes=u),this.options.attributes&&(c.attributes=this.options.attributes),t.push(c)}return t}},{key:"setColorStyle",value:function(e,t){if(void 0!==t)this._setItemColorStyle(e,t);else for(var r=0;r<this._instances.length;r++)this._setItemColorStyle(e,r)}},{key:"_setItemColorStyle",value:function(e,t){this._delegate.getGeometryInstanceAttributes(this.createPickId(t)).color=A.ColorGeometryInstanceAttribute.toValue(e)}}]),r}(Mn);function Ha(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Za=function(e){d()(r,e);var t=Ha(r);function r(e){var n;return c()(this,r),(n=t.call(this,e))._type=Bn.getGraphicType("polylineCombine"),n}return f()(r,[{key:"_organizeGeometry",value:function(){for(var e=this,t=[],r=["width","colors","colorsPerVertex","granularity","vertexFormat","arcType"],n=function(n,i){var o=e._instances[n],a={positions:te.transformWGS84ArrayToCartesianArray(se.parsePositions(o.positions))};o.style&&r.forEach((function(e){A.defined(o.style[e])&&(a[e]=o.style[e])})),t.push(new A.PolylineGeometry(a))},i=0,o=this._instances.length;i<o;i++)n(i);return t}},{key:"_organizeAppearance",value:function(){var e=this,t={};return["flat","faceForward","translucent","closed","materialSupport","vertexShaderSource","fragmentShaderSource","renderState"].forEach((function(r){A.defined(e.options[r])&&(t[r]=e.options[r])})),this.options.appearance?this.options.appearance:this.style.material?(t.material=this.style.material,new A.PolylineMaterialAppearance(t)):new A.PolylineColorAppearance(t)}}]),r}(ja);Bn.registerType("polylineCombine");var Ya=Za;function Ja(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Ka=function(e){d()(r,e);var t=Ja(r);function r(e){var n;return c()(this,r),(n=t.call(this,e))._type=Bn.getGraphicType("polygonCombine"),n}return f()(r,[{key:"_organizeGeometry",value:function(){for(var e=this,t=[],r=["height","extrudedHeight","stRotation","ellipsoid","granularity","vertexFormat","perPositionHeight","closeTop","closeBottom","arcType","textureCoordinates"],n=function(n,i){var o=e._instances[n],a={positions:te.transformWGS84ArrayToCartesianArray(se.parsePositions(o.positions))};o.style&&r.forEach((function(e){A.defined(o.style[e])&&(a[e]=o.style[e])})),t.push(A.PolygonGeometry.fromPositions(a))},i=0,o=this._instances.length;i<o;i++)n(i);return t}},{key:"_organizeAppearance",value:function(){var e=this,t={};return["flat","faceForward","translucent","closed","materialSupport","vertexShaderSource","fragmentShaderSource","renderState"].forEach((function(r){A.defined(e.options[r])&&(t[r]=e.options[r])})),this.options.appearance?this.options.appearance:this.style.material?(t.material=this.style.material,new A.MaterialAppearance(t)):new A.PerInstanceColorAppearance(t)}}]),r}(ja);Bn.registerType("polygonCombine");var Xa=Ka;function Qa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var qa=function(e){d()(r,e);var t=Qa(r);function r(e){var n;return c()(this,r),(n=t.call(this,e))._def_style={width:20,height:30,moveHeight:50,moveDuration:2,color:new A.Color(.8,.8,0,.8),rotationAngle:3,animate:!0},n._command=void 0,n.allowPicking=!0,n._setInterval=void 0,n._type=Po.getGraphicType("tetrahedron"),n}return f()(r,[{key:"_mountedHook",value:function(){bn()(v()(r.prototype),"_mountedHook",this).call(this),this.updateModelMatrix(),this._delegate=this._layer.primitiveCollection.add(this),this.style.animate&&this.startAnimate()}},{key:"updateModelMatrix",value:function(){bn()(v()(r.prototype),"updateModelMatrix",this).call(this);var e=A.Matrix4.fromScale(new A.Cartesian3(this.style.width,this.style.width,this.style.height));this.modelMatrix=A.Matrix4.multiply(this.modelMatrix,e,this.modelMatrix)}},{key:"createVertexArray",value:function(e){var t=this.createPositionsAndIndices(),r=new A.Geometry({attributes:{position:new A.GeometryAttribute({componentDatatype:A.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:t.positions}),textureCoordinates:new A.GeometryAttribute({componentDatatype:A.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:t.sts})},indices:t.indices,primitiveType:A.PrimitiveType.TRIANGLES,boundingSphere:A.BoundingSphere.fromVertices(t.positions)}),n=A.GeometryPipeline.computeNormal(r);return A.VertexArray.fromGeometry({context:e,geometry:n,attributeLocations:{position:0,textureCoordinates:1},bufferUsage:A.BufferUsage.STATIC_DRAW})}},{key:"createPositionsAndIndices",value:function(){var e=new Float64Array(15);e[0]=0,e[1]=1,e[2]=0,e[3]=-1,e[4]=0,e[5]=0,e[6]=0,e[7]=-1,e[8]=0,e[9]=1,e[10]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=-1;var t=new Uint16Array(18);return t[0]=4,t[1]=2,t[2]=3,t[3]=4,t[4]=3,t[5]=0,t[6]=4,t[7]=0,t[8]=1,t[9]=4,t[10]=1,t[11]=2,t[12]=1,t[13]=2,t[14]=3,t[15]=1,t[16]=3,t[17]=0,{indices:t,positions:e,sts:new Float32Array([0,0,1,0,1,1,0,1,.5,.5])}}},{key:"_createCommand",value:function(e){var t=this,r=A.Appearance.getDefaultRenderState(!1,!0,void 0),n=A.RenderState.fromCache(r),i=new A.ShaderSource({sources:["\n    attribute vec3 position;\n    attribute vec3 normal;\n    attribute vec2 st;\n    attribute float batchId;\n    varying vec3 v_positionEC;\n    varying vec3 v_normalEC;\n    varying vec2 v_st;\n    varying vec4 v_pickColor;\n    void main()\n    {\n        v_positionEC = (czm_modelView * vec4(position, 1.0)).xyz;       // position in eye coordinates\n        v_normalEC = czm_normal * normal;                               // normal in eye coordinates\n        v_st = st;\n        //v_pickColor = czm_batchTable_pickColor(batchId);\n        gl_Position = czm_modelViewProjection * vec4(position, 1.0);\n    }\n    "]}),o=new A.ShaderSource({sources:["\n  varying vec3 v_positionEC;\n  varying vec3 v_normalEC;\n  varying vec2 v_st;\n  varying vec4 v_pickColor;\n  uniform vec4 color;\n\n  void main()\n  {\n    vec3 positionToEyeEC = -v_positionEC;\n    vec3 normalEC = normalize(v_normalEC);\n    #ifdef FACE_FORWARD\n      normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n    #endif\n      czm_materialInput materialInput;\n      materialInput.normalEC = normalEC;\n      materialInput.positionToEyeEC = positionToEyeEC;\n      materialInput.st = v_st;\n\n      vec2 st = materialInput.st;\n      czm_material material = czm_getDefaultMaterial(materialInput);\n\n      float dt_a11 = fract(czm_frameNumber / 100.0) * 3.14159265 * 2.0;\n      float dt_a12 = sin(dt_a11);\n      float vst=smoothstep(0.7, 1.0, dt_a12)+0.4;\n\n      material.alpha = mix(0.1,1.0,clamp((1.0-st.t) * color.a,0.0,1.0)) +(1.0-sign(st.t-czm_frameNumber*0.001))*0.2+0.4;\n      material.diffuse = vec3(1.0,0.0,0.0)+color.rgb*vec3(1.0,1.0,0);\n    #ifdef FLAT\n      gl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n    #else\n      gl_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n    #endif\n  }\n    "]}),a={color:function(){return t.style.color}},s=A.ShaderProgram.fromCache({context:e,vertexShaderSource:i,fragmentShaderSource:o,attributeLocations:{position:0,textureCoordinates:1}});return new A.DrawCommand({vertexArray:this.createVertexArray(e),primitiveType:A.PrimitiveType.TRIANGLES,renderState:n,shaderProgram:s,uniformMap:a,owner:this,pass:A.Pass.TRANSLUCENT,modelMatrix:this.modelMatrix,boundingVolume:new A.BoundingSphere(this.cartesian,this.style.height)})}},{key:"update",value:function(e){this.show&&(A.defined(this._command)||(this._command=this._createCommand(e.context),this._command.pickId="v_pickColor"),A.defined(this._command)&&e.commandList.push(this._command))}},{key:"destroy",value:function(){return A.defined(this._command)&&(this._command.shaderProgram=this._command.shaderProgram&&this._command.shaderProgram.destroy()),A.destroyObject(this)}},{key:"isDestroyed",value:function(){return!1}},{key:"startAnimate",value:function(){this.style.animate=!0;var e=this;this._setInterval=setInterval((function(){var i=++r>t?new A.Cartesian3(0,0,-1*n):new A.Cartesian3(0,0,n);r===2*t&&(r=0),A.Matrix4.multiplyByTranslation(e._modelMatrix,i,e._modelMatrix);var o=A.Matrix4.fromRotationTranslation(A.Matrix3.fromRotationZ(A.Math.toRadians(e.style.rotationAngle)));A.Matrix4.multiply(e._modelMatrix,o,e._modelMatrix)}),1e3/60);var t=60*this.style.moveDuration,r=0,n=e.style.moveHeight/t/this.style.height}},{key:"closeAnimate",value:function(){this.style.animate&&clearInterval(this._setInterval),this.style.animate=!1,this._setInterval=null}}]),r}(Po);Po.registerType("tetrahedron");var $a=qa;function es(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var ts=A.BoundingSphere,rs=A.Cartesian3,ns=A.Color,is=A.combine,os=A.ComponentDatatype,as=A.defaultValue,ss=A.defined,ls=A.DeveloperError,cs=A.Matrix4,us=A.PrimitiveType,fs=A.Buffer,hs=A.BufferUsage,ds=A.DrawCommand,ps=A.Pass,ys=A.RenderState,ms=A.ShaderProgram,vs=A.ShaderSource,gs=A.VertexArray,As=A.BlendingState,_s=A.CullFace,Cs=A.Material,Es=A.SceneMode,xs=A.VertexFormat,Bs=A.Math,Ts=A.Matrix3,bs=A.JulianDate,Ps=Math.sin,Ms=Math.cos,ws=Math.tan,Is=Math.atan,Ds={position:0,normal:1},Ss=new Ts,Os=new rs,Rs=function(e){d()(r,e);var t=es(r);function r(e){var n;c()(this,r),(n=t.call(this,e))._type=Po.getGraphicType("rectangularSensorPrimitive"),n.slice=as(e.style.slice,32),n._computedModelMatrix=new cs,n._computedScanPlaneModelMatrix=new cs,n.radius=as(e.style.radius,Number.POSITIVE_INFINITY),n._radius=void 0,n.xHalfAngle=as(e.style.xHalfAngle,A.Math.toRadians(30)),n._xHalfAngle=void 0,n.yHalfAngle=as(e.style.yHalfAngle,A.Math.toRadians(60)),n._yHalfAngle=void 0,n.lineColor=as(e.style.lineColor,ns.WHITE),n.showSectorLines=as(e.style.showSectorLines,!0),n.showSectorSegmentLines=as(e.style.showSectorSegmentLines,!0),n.showLateralSurfaces=as(e.style.showLateralSurfaces,!0),n.material=ss(e.style.material)?e.style.material:Cs.fromType(Cs.ColorType),n._material=void 0,n._translucent=void 0,n.lateralSurfaceMaterial=ss(e.style.lateralSurfaceMaterial)?e.style.lateralSurfaceMaterial:Cs.fromType(Cs.ColorType),n._lateralSurfaceMaterial=void 0,n._lateralSurfaceTranslucent=void 0,n.showDomeSurfaces=as(e.style.showDomeSurfaces,!0),n.domeSurfaceMaterial=ss(e.style.domeSurfaceMaterial)?e.style.domeSurfaceMaterial:Cs.fromType(Cs.ColorType),n._domeSurfaceMaterial=void 0,n.showDomeLines=as(e.style.showDomeLines,!0),n.showIntersection=as(e.style.showIntersection,!0),n.intersectionColor=as(e.style.intersectionColor,ns.WHITE),n.intersectionWidth=as(e.style.intersectionWidth,1),n.depthTest=as(e.style.depthTest,!0),n._depthTest=void 0,n.showScanPlane=as(e.style.showScanPlane,!0),n.scanPlaneColor=as(e.style.scanPlaneColor,ns.WHITE),n.scanPlaneMode=as(e.style.scanPlaneMode,"horizontal"),n.scanPlaneRate=as(e.style.scanPlaneRate,10),n._scanPlaneXHalfAngle=0,n._scanPlaneYHalfAngle=0,n._time=bs.now(),n._boundingSphere=new ts,n._boundingSphereWC=new ts,n._sectorFrontCommand=new ds({owner:z()(n),primitiveType:us.TRIANGLES,boundingVolume:n._boundingSphereWC}),n._sectorBackCommand=new ds({owner:z()(n),primitiveType:us.TRIANGLES,boundingVolume:n._boundingSphereWC}),n._sectorVA=void 0,n._sectorLineCommand=new ds({owner:z()(n),primitiveType:us.LINES,boundingVolume:n._boundingSphereWC}),n._sectorLineVA=void 0,n._sectorSegmentLineCommand=new ds({owner:z()(n),primitiveType:us.LINES,boundingVolume:n._boundingSphereWC}),n._sectorSegmentLineVA=void 0,n._domeFrontCommand=new ds({owner:z()(n),primitiveType:us.TRIANGLES,boundingVolume:n._boundingSphereWC}),n._domeBackCommand=new ds({owner:z()(n),primitiveType:us.TRIANGLES,boundingVolume:n._boundingSphereWC}),n._domeVA=void 0,n._domeLineCommand=new ds({owner:z()(n),primitiveType:us.LINES,boundingVolume:n._boundingSphereWC}),n._domeLineVA=void 0,n._scanPlaneFrontCommand=new ds({owner:z()(n),primitiveType:us.TRIANGLES,boundingVolume:n._boundingSphereWC}),n._scanPlaneBackCommand=new ds({owner:z()(n),primitiveType:us.TRIANGLES,boundingVolume:n._boundingSphereWC}),n._scanRadialCommand=void 0,n._colorCommands=[],n._frontFaceRS=void 0,n._backFaceRS=void 0,n._sp=void 0;var i=z()(n);return n._uniforms={u_type:function(){return 0},u_xHalfAngle:function(){return i.xHalfAngle},u_yHalfAngle:function(){return i.yHalfAngle},u_radius:function(){return i.radius},u_showThroughEllipsoid:function(){return i.depthTest},u_showIntersection:function(){return i.showIntersection},u_intersectionColor:function(){return i.intersectionColor},u_intersectionWidth:function(){return i.intersectionWidth},u_normalDirection:function(){return 1},u_lineColor:function(){return i.lineColor}},n._scanUniforms={u_xHalfAngle:function(){return i._scanPlaneXHalfAngle},u_yHalfAngle:function(){return i._scanPlaneYHalfAngle},u_radius:function(){return i.radius},u_color:function(){return i.scanPlaneColor},u_showThroughEllipsoid:function(){return i.showThroughEllipsoid},u_showIntersection:function(){return i.showIntersection},u_intersectionColor:function(){return i.intersectionColor},u_intersectionWidth:function(){return i.intersectionWidth},u_normalDirection:function(){return 1},u_lineColor:function(){return i.lineColor}},n}return f()(r,[{key:"modelMatrix",get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=e,this._modelMatrixChanged=!0}},{key:"_mountedHook",value:function(){bn()(v()(r.prototype),"_mountedHook",this).call(this),this.position=this._position,this._delegate=this._layer.primitiveCollection.add(this)}},{key:"update",value:function(e){var t=e.mode;if(this.show&&t===Es.SCENE3D){var r=!1,n=!1,i=!1,o=!1,a=this.xHalfAngle,s=this.yHalfAngle;if(a<0||s<0)throw new ls("halfAngle must be greater than or equal to zero.");if(0!=a&&0!=s){this._xHalfAngle===a&&this._yHalfAngle===s||(this._xHalfAngle=a,this._yHalfAngle=s,r=!0);var l=this.radius;if(l<0)throw new ls("this.radius must be greater than or equal to zero.");var c=!1;this._radius!==l&&(c=!0,this._radius=l,this._boundingSphere=new ts(rs.ZERO,this.radius)),(this._modelMatrixChanged||c)&&(cs.multiplyByUniformScale(this.modelMatrix,this.radius,this._computedModelMatrix),ts.transform(this._boundingSphere,this.modelMatrix,this._boundingSphereWC),o=!0);var u=this.depthTest;this._depthTest!==this.depthTest&&(this._depthTest=u,n=!0);var f=this.material;this._material!==f&&(this._material=f,n=!0,i=!0);var h=f.isTranslucent();if(this._translucent!==h&&(this._translucent=h,n=!0),this.showScanPlane){var d=e.time,p=bs.secondsDifference(d,this._time);p<0&&(this._time=bs.clone(d,this._time));var y,m=Math.max(p%this.scanPlaneRate/this.scanPlaneRate,0);if("horizontal"==this.scanPlaneMode){var v=Ms(y=2*s*m-s),g=ws(a),_=Is(v*g);this._scanPlaneXHalfAngle=_,this._scanPlaneYHalfAngle=y,A.Matrix3.fromRotationX(this._scanPlaneYHalfAngle,Ss)}else{y=2*a*m-a;var C=ws(s),E=Ms(y),x=Is(E*C);this._scanPlaneXHalfAngle=y,this._scanPlaneYHalfAngle=x,A.Matrix3.fromRotationY(this._scanPlaneXHalfAngle,Ss)}A.Matrix4.multiplyByMatrix3(this.modelMatrix,Ss,this._computedScanPlaneModelMatrix),cs.multiplyByUniformScale(this._computedScanPlaneModelMatrix,this.radius,this._computedScanPlaneModelMatrix)}r&&this.createVertexArray(this,e),n&&this.createRenderState(this,u,h),i&&this.createShaderProgram(this,e,f),(n||o)&&this.createCommands(this,h);var B=e.commandList,T=e.passes,b=this._colorCommands;if(T.render)for(var P=0,M=b.length;P<M;P++){var w=b[P];B.push(w)}this._modelMatrixChanged=!1}}}},{key:"destroy",value:function(){return A.defined(this._sp)&&this._sp.destroy(),A.destroyObject(this)}},{key:"isDestroyed",value:function(){return!1}},{key:"createVertexArray",value:function(e,t){var r=t.context,n=function(e,t){var r=e.xHalfAngle,n=e.yHalfAngle,i=t.zoy,o=t.zox,a=[],s=Ts.fromRotationY(r,Ss);return a.push(i.map((function(e){return Ts.multiplyByVector(s,e,new A.Cartesian3)}))),s=Ts.fromRotationX(-n,Ss),a.push(o.map((function(e){return Ts.multiplyByVector(s,e,new A.Cartesian3)})).reverse()),s=Ts.fromRotationY(-r,Ss),a.push(i.map((function(e){return Ts.multiplyByVector(s,e,new A.Cartesian3)})).reverse()),s=Ts.fromRotationX(n,Ss),a.push(o.map((function(e){return Ts.multiplyByVector(s,e,new A.Cartesian3)}))),a}(e,Ns(e,e.xHalfAngle,e.yHalfAngle));if(e.showLateralSurfaces&&(e._sectorVA=function(e,t){for(var r=Array.prototype.concat.apply([],t).length-t.length,n=new Float32Array(18*r),i=0,o=0,a=t.length;o<a;o++)for(var s=t[o],l=rs.normalize(rs.cross(s[0],s[s.length-1],Os),Os),c=0,u=s.length-1;c<u;c++)n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=-l.x,n[i++]=-l.y,n[i++]=-l.z,n[i++]=s[c].x,n[i++]=s[c].y,n[i++]=s[c].z,n[i++]=-l.x,n[i++]=-l.y,n[i++]=-l.z,n[i++]=s[c+1].x,n[i++]=s[c+1].y,n[i++]=s[c+1].z,n[i++]=-l.x,n[i++]=-l.y,n[i++]=-l.z;var f=fs.createVertexBuffer({context:e,typedArray:n,usage:hs.STATIC_DRAW}),h=6*Float32Array.BYTES_PER_ELEMENT,d=[{index:Ds.position,vertexBuffer:f,componentsPerAttribute:3,componentDatatype:os.FLOAT,offsetInBytes:0,strideInBytes:h},{index:Ds.normal,vertexBuffer:f,componentsPerAttribute:3,componentDatatype:os.FLOAT,offsetInBytes:3*Float32Array.BYTES_PER_ELEMENT,strideInBytes:h}];return new gs({context:e,attributes:d})}(r,n)),e.showSectorLines&&(e._sectorLineVA=function(e,t){for(var r=t.length,n=new Float32Array(9*r),i=0,o=0,a=t.length;o<a;o++){var s=t[o];n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=s[0].x,n[i++]=s[0].y,n[i++]=s[0].z}var l=fs.createVertexBuffer({context:e,typedArray:n,usage:hs.STATIC_DRAW}),c=3*Float32Array.BYTES_PER_ELEMENT,u=[{index:Ds.position,vertexBuffer:l,componentsPerAttribute:3,componentDatatype:os.FLOAT,offsetInBytes:0,strideInBytes:c}];return new gs({context:e,attributes:u})}(r,n)),e.showSectorSegmentLines&&(e._sectorSegmentLineVA=function(e,t){for(var r=Array.prototype.concat.apply([],t).length-t.length,n=new Float32Array(9*r),i=0,o=0,a=t.length;o<a;o++)for(var s=t[o],l=0,c=s.length-1;l<c;l++)n[i++]=s[l].x,n[i++]=s[l].y,n[i++]=s[l].z,n[i++]=s[l+1].x,n[i++]=s[l+1].y,n[i++]=s[l+1].z;var u=fs.createVertexBuffer({context:e,typedArray:n,usage:hs.STATIC_DRAW}),f=3*Float32Array.BYTES_PER_ELEMENT,h=[{index:Ds.position,vertexBuffer:u,componentsPerAttribute:3,componentDatatype:os.FLOAT,offsetInBytes:0,strideInBytes:f}];return new gs({context:e,attributes:h})}(r,n)),e.showDomeSurfaces&&(e._domeVA=function(e){var t=A.EllipsoidGeometry.createGeometry(new A.EllipsoidGeometry({vertexFormat:xs.POSITION_ONLY,stackPartitions:32,slicePartitions:32}));return gs.fromGeometry({context:e,geometry:t,attributeLocations:Ds,bufferUsage:hs.STATIC_DRAW,interleave:!1})}(r)),e.showDomeLines&&(e._domeLineVA=function(e){var t=A.EllipsoidOutlineGeometry.createGeometry(new A.EllipsoidOutlineGeometry({vertexFormat:xs.POSITION_ONLY,stackPartitions:32,slicePartitions:32}));return gs.fromGeometry({context:e,geometry:t,attributeLocations:Ds,bufferUsage:hs.STATIC_DRAW,interleave:!1})}(r)),e.showScanPlane)if("horizontal"==e.scanPlaneMode){var i=Ns(e,Bs.PI_OVER_TWO,0);e._scanPlaneVA=zs(r,i.zox)}else{var o=Ns(e,0,Bs.PI_OVER_TWO);e._scanPlaneVA=zs(r,o.zoy)}}},{key:"createRenderState",value:function(e,t,r){r?(e._frontFaceRS=ys.fromCache({depthTest:{enabled:t},depthMask:!1,blending:As.ALPHA_BLEND,cull:{enabled:!0,face:_s.BACK}}),e._backFaceRS=ys.fromCache({depthTest:{enabled:t},depthMask:!1,blending:As.ALPHA_BLEND,cull:{enabled:!0,face:_s.FRONT}}),e._pickRS=ys.fromCache({depthTest:{enabled:!t},depthMask:!1,blending:As.ALPHA_BLEND})):(e._frontFaceRS=ys.fromCache({depthTest:{enabled:t},depthMask:!0}),e._pickRS=ys.fromCache({depthTest:{enabled:!0},depthMask:!0}))}},{key:"createShaderProgram",value:function(e,t,r){!function(e,t,r){var n=t.context,i=Ls,o=new vs({sources:[Fs,r.shaderSource,ks]});e._sp=ms.replaceCache({context:n,shaderProgram:e._sp,vertexShaderSource:i,fragmentShaderSource:o,attributeLocations:Ds});var a=new vs({sources:[Fs,r.shaderSource,ks],pickColorQualifier:"uniform"});e._pickSP=ms.replaceCache({context:n,shaderProgram:e._pickSP,vertexShaderSource:i,fragmentShaderSource:a,attributeLocations:Ds})}(e,t,r),e.showScanPlane&&function(e,t,r){var n=t.context,i=new vs({sources:[Fs,r.shaderSource,'\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n\nuniform bool u_showIntersection;\nuniform bool u_showThroughEllipsoid;\n\nuniform float u_radius;\nuniform float u_xHalfAngle;\nuniform float u_yHalfAngle;\nuniform float u_normalDirection;\nuniform vec4 u_color;\n\nvarying vec3 v_position;\nvarying vec3 v_positionWC;\nvarying vec3 v_positionEC;\nvarying vec3 v_normalEC;\n\nvec4 getColor(float sensorRadius, vec3 pointEC)\n{\n    czm_materialInput materialInput;\n\n    vec3 pointMC = (czm_inverseModelView * vec4(pointEC, 1.0)).xyz;\n    materialInput.st = sensor2dTextureCoordinates(sensorRadius, pointMC);\n    materialInput.str = pointMC / sensorRadius;\n\n    vec3 positionToEyeEC = -v_positionEC;\n    materialInput.positionToEyeEC = positionToEyeEC;\n\n    vec3 normalEC = normalize(v_normalEC);\n    materialInput.normalEC = u_normalDirection * normalEC;\n\n    czm_material material = czm_getMaterial(materialInput);\n\n    material.diffuse = u_color.rgb;\n    material.alpha = u_color.a;\n\n    return mix(czm_phong(normalize(positionToEyeEC), material,czm_lightDirectionEC), vec4(material.diffuse, material.alpha), 0.4);\n\n}\n\nbool isOnBoundary(float value, float epsilon)\n{\n    float width = getIntersectionWidth();\n    float tolerance = width * epsilon;\n\n#ifdef GL_OES_standard_derivatives\n    float delta = max(abs(dFdx(value)), abs(dFdy(value)));\n    float pixels = width * delta;\n    float temp = abs(value);\n    // There are a couple things going on here.\n    // First we test the value at the current fragment to see if it is within the tolerance.\n    // We also want to check if the value of an adjacent pixel is within the tolerance,\n    // but we don\'t want to admit points that are obviously not on the surface.\n    // For example, if we are looking for "value" to be close to 0, but value is 1 and the adjacent value is 2,\n    // then the delta would be 1 and "temp - delta" would be "1 - 1" which is zero even though neither of\n    // the points is close to zero.\n    return temp < tolerance && temp < pixels || (delta < 10.0 * tolerance && temp - delta < tolerance && temp < pixels);\n#else\n    return abs(value) < tolerance;\n#endif\n}\n\nvec4 shade(bool isOnBoundary)\n{\n    if (u_showIntersection && isOnBoundary)\n    {\n        return getIntersectionColor();\n    }\n    return getColor(u_radius, v_positionEC);\n}\n\nfloat ellipsoidSurfaceFunction(vec3 point)\n{\n    vec3 scaled = czm_ellipsoidInverseRadii * point;\n    return dot(scaled, scaled) - 1.0;\n}\n\nvoid main()\n{\n    vec3 sensorVertexWC = czm_model[3].xyz;      // (0.0, 0.0, 0.0) in model coordinates\n    vec3 sensorVertexEC = czm_modelView[3].xyz;  // (0.0, 0.0, 0.0) in model coordinates\n\n    //vec3 pixDir = normalize(v_position);\n    float positionX = v_position.x;\n    float positionY = v_position.y;\n    float positionZ = v_position.z;\n\n    vec3 zDir = vec3(0.0, 0.0, 1.0);\n    vec3 lineX = vec3(positionX, 0 ,positionZ);\n    vec3 lineY = vec3(0, positionY, positionZ);\n    float resX = dot(normalize(lineX), zDir);\n    if(resX < cos(u_xHalfAngle) - 0.0001){\n        discard;\n    }\n    float resY = dot(normalize(lineY), zDir);\n    if(resY < cos(u_yHalfAngle)- 0.0001){\n        discard;\n    }\n\n    float ellipsoidValue = ellipsoidSurfaceFunction(v_positionWC);\n\n    // Occluded by the ellipsoid?\n   if (!u_showThroughEllipsoid)\n  {\n   // Discard if in the ellipsoid\n    // PERFORMANCE_IDEA: A coarse check for ellipsoid intersection could be done on the CPU first.\n    if (ellipsoidValue < 0.0)\n    {\n            discard;\n    }\n\n    // Discard if in the sensor\'s shadow\n    if (inSensorShadow(sensorVertexWC, v_positionWC))\n    {\n        discard;\n    }\n    }\n\n    // Notes: Each surface functions should have an associated tolerance based on the floating point error.\n    bool isOnEllipsoid = isOnBoundary(ellipsoidValue, czm_epsilon3);\n    gl_FragColor = shade(isOnEllipsoid);\n\n}']});e._scanPlaneSP=ms.replaceCache({context:n,shaderProgram:e._scanPlaneSP,vertexShaderSource:"\nattribute vec4 position;\nattribute vec3 normal;\n\nvarying vec3 v_position;\nvarying vec3 v_positionWC;\nvarying vec3 v_positionEC;\nvarying vec3 v_normalEC;\n\nvoid main()\n{\n    gl_Position = czm_modelViewProjection * position;\n    v_position = vec3(position);\n    v_positionWC = (czm_model * position).xyz;\n    v_positionEC = (czm_modelView * position).xyz;\n    v_normalEC = czm_normal * normal;\n}",fragmentShaderSource:i,attributeLocations:Ds})}(e,t,r)}},{key:"createCommands",value:function(e,t){e._colorCommands.length=0;var r=t?ps.TRANSLUCENT:ps.OPAQUE;e.showLateralSurfaces&&Gs(e,e._sectorFrontCommand,e._sectorBackCommand,e._frontFaceRS,e._backFaceRS,e._sp,e._sectorVA,e._uniforms,e._computedModelMatrix,t,r),e.showSectorLines&&Gs(e,e._sectorLineCommand,void 0,e._frontFaceRS,e._backFaceRS,e._sp,e._sectorLineVA,e._uniforms,e._computedModelMatrix,t,r,!0),e.showSectorSegmentLines&&Gs(e,e._sectorSegmentLineCommand,void 0,e._frontFaceRS,e._backFaceRS,e._sp,e._sectorSegmentLineVA,e._uniforms,e._computedModelMatrix,t,r,!0),e.showDomeSurfaces&&Gs(e,e._domeFrontCommand,e._domeBackCommand,e._frontFaceRS,e._backFaceRS,e._sp,e._domeVA,e._uniforms,e._computedModelMatrix,t,r),e.showDomeLines&&Gs(e,e._domeLineCommand,void 0,e._frontFaceRS,e._backFaceRS,e._sp,e._domeLineVA,e._uniforms,e._computedModelMatrix,t,r,!0),e.showScanPlane&&Gs(e,e._scanPlaneFrontCommand,e._scanPlaneBackCommand,e._frontFaceRS,e._backFaceRS,e._scanPlaneSP,e._scanPlaneVA,e._scanUniforms,e._computedScanPlaneModelMatrix,t,r)}}]),r}(Po);Po.registerType("rectangularSensorPrimitive");var Ls="\nattribute vec4 position;\nattribute vec3 normal;\n\nvarying vec3 v_position;\nvarying vec3 v_positionWC;\nvarying vec3 v_positionEC;\nvarying vec3 v_normalEC;\n\nvoid main()\n{\n    gl_Position = czm_modelViewProjection * position;\n    v_position = vec3(position);\n    v_positionWC = (czm_model * position).xyz;\n    v_positionEC = (czm_modelView * position).xyz;\n    v_normalEC = czm_normal * normal;\n}",ks='\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n\nuniform bool u_showIntersection;\nuniform bool u_showThroughEllipsoid;\n\nuniform float u_radius;\nuniform float u_xHalfAngle;\nuniform float u_yHalfAngle;\nuniform float u_normalDirection;\nuniform float u_type;\n\nvarying vec3 v_position;\nvarying vec3 v_positionWC;\nvarying vec3 v_positionEC;\nvarying vec3 v_normalEC;\n\nvec4 getColor(float sensorRadius, vec3 pointEC)\n{\n    czm_materialInput materialInput;\n\n    vec3 pointMC = (czm_inverseModelView * vec4(pointEC, 1.0)).xyz;\n    materialInput.st = sensor2dTextureCoordinates(sensorRadius, pointMC);\n    materialInput.str = pointMC / sensorRadius;\n\n    vec3 positionToEyeEC = -v_positionEC;\n    materialInput.positionToEyeEC = positionToEyeEC;\n\n    vec3 normalEC = normalize(v_normalEC);\n    materialInput.normalEC = u_normalDirection * normalEC;\n\n    czm_material material = czm_getMaterial(materialInput);\n\n    return mix(czm_phong(normalize(positionToEyeEC), material,czm_lightDirectionEC), vec4(material.diffuse, material.alpha), 0.4);\n\n}\n\nbool isOnBoundary(float value, float epsilon)\n{\n    float width = getIntersectionWidth();\n    float tolerance = width * epsilon;\n\n#ifdef GL_OES_standard_derivatives\n    float delta = max(abs(dFdx(value)), abs(dFdy(value)));\n    float pixels = width * delta;\n    float temp = abs(value);\n    // There are a couple things going on here.\n    // First we test the value at the current fragment to see if it is within the tolerance.\n    // We also want to check if the value of an adjacent pixel is within the tolerance,\n    // but we don\'t want to admit points that are obviously not on the surface.\n    // For example, if we are looking for "value" to be close to 0, but value is 1 and the adjacent value is 2,\n    // then the delta would be 1 and "temp - delta" would be "1 - 1" which is zero even though neither of\n    // the points is close to zero.\n    return temp < tolerance && temp < pixels || (delta < 10.0 * tolerance && temp - delta < tolerance && temp < pixels);\n#else\n    return abs(value) < tolerance;\n#endif\n}\n\nvec4 shade(bool isOnBoundary)\n{\n    if (u_showIntersection && isOnBoundary)\n    {\n        return getIntersectionColor();\n    }\n    if(u_type == 1.0){\n        return getLineColor();\n    }\n    return getColor(u_radius, v_positionEC);\n}\n\nfloat ellipsoidSurfaceFunction(vec3 point)\n{\n    vec3 scaled = czm_ellipsoidInverseRadii * point;\n    return dot(scaled, scaled) - 1.0;\n}\n\nvoid main()\n{\n    vec3 sensorVertexWC = czm_model[3].xyz;      // (0.0, 0.0, 0.0) in model coordinates\n    vec3 sensorVertexEC = czm_modelView[3].xyz;  // (0.0, 0.0, 0.0) in model coordinates\n\n    //vec3 pixDir = normalize(v_position);\n    float positionX = v_position.x;\n    float positionY = v_position.y;\n    float positionZ = v_position.z;\n\n    vec3 zDir = vec3(0.0, 0.0, 1.0);\n    vec3 lineX = vec3(positionX, 0 ,positionZ);\n    vec3 lineY = vec3(0, positionY, positionZ);\n    float resX = dot(normalize(lineX), zDir);\n    if(resX < cos(u_xHalfAngle)-0.00001){\n        discard;\n    }\n    float resY = dot(normalize(lineY), zDir);\n    if(resY < cos(u_yHalfAngle)-0.00001){\n        discard;\n    }\n\n    float ellipsoidValue = ellipsoidSurfaceFunction(v_positionWC);\n\n    // Occluded by the ellipsoid?\n   if (!u_showThroughEllipsoid)\n   {\n    // Discard if in the ellipsoid\n    // PERFORMANCE_IDEA: A coarse check for ellipsoid intersection could be done on the CPU first.\n    if (ellipsoidValue < 0.0)\n    {\n            discard;\n    }\n\n    // Discard if in the sensor\'s shadow\n    if (inSensorShadow(sensorVertexWC, v_positionWC))\n    {\n        discard;\n    }\n    }\n\n    // Notes: Each surface functions should have an associated tolerance based on the floating point error.\n    bool isOnEllipsoid = isOnBoundary(ellipsoidValue, czm_epsilon3);\n    //isOnEllipsoid = false;\n    //if((resX >= 0.8 && resX <= 0.81)||(resY >= 0.8 && resY <= 0.81)){\n    /*if(false){\n        gl_FragColor = vec4(1.0,0.0,0.0,1.0);\n    }else{\n        gl_FragColor = shade(isOnEllipsoid);\n    }\n   */\n    gl_FragColor = shade(isOnEllipsoid);\n\n}',Fs="\nuniform vec4 u_intersectionColor;\nuniform float u_intersectionWidth;\nuniform vec4 u_lineColor;\n\nbool inSensorShadow(vec3 coneVertexWC, vec3 pointWC)\n{\n    // Diagonal matrix from the unscaled ellipsoid space to the scaled space.\n    vec3 D = czm_ellipsoidInverseRadii;\n\n    // Sensor vertex in the scaled ellipsoid space\n    vec3 q = D * coneVertexWC;\n    float qMagnitudeSquared = dot(q, q);\n    float test = qMagnitudeSquared - 1.0;\n\n    // Sensor vertex to fragment vector in the ellipsoid's scaled space\n    vec3 temp = D * pointWC - q;\n    float d = dot(temp, q);\n\n    // Behind silhouette plane and inside silhouette cone\n    return (d < -test) && (d / length(temp) < -sqrt(test));\n}\n\n///////////////////////////////////////////////////////////////////////////////\n\nvec4 getLineColor()\n{\n    return u_lineColor;\n}\n\nvec4 getIntersectionColor()\n{\n    return u_intersectionColor;\n}\n\nfloat getIntersectionWidth()\n{\n    return u_intersectionWidth;\n}\n\nvec2 sensor2dTextureCoordinates(float sensorRadius, vec3 pointMC)\n{\n    // (s, t) both in the range [0, 1]\n    float t = pointMC.z / sensorRadius;\n    float s = 1.0 + (atan(pointMC.y, pointMC.x) / czm_twoPi);\n    s = s - floor(s);\n\n    return vec2(s, t);\n}\n";function Gs(e,t,r,n,i,o,a,s,l,c,u,f){c&&r&&(r.vertexArray=a,r.renderState=i,r.shaderProgram=o,r.uniformMap=is(s,e._material._uniforms),r.uniformMap.u_normalDirection=function(){return-1},r.pass=u,r.modelMatrix=l,e._colorCommands.push(r)),t.vertexArray=a,t.renderState=n,t.shaderProgram=o,t.uniformMap=is(s,e._material._uniforms),f&&(t.uniformMap.u_type=function(){return 1}),t.pass=u,t.modelMatrix=l,e._colorCommands.push(t)}function Ns(e,t,r){for(var n=e.slice,i=Ms(r),o=ws(r),a=Ms(t),s=ws(t),l=Is(a*o),c=Is(i*s),u=[],f=0;f<n;f++){var h=2*l*f/(n-1)-l;u.push(new rs(0,Ps(h),Ms(h)))}for(var d=[],p=0;p<n;p++){var y=2*c*p/(n-1)-c;d.push(new rs(Ps(y),0,Ms(y)))}return{zoy:u,zox:d}}function zs(e,t){for(var r=t.length-1,n=new Float32Array(9*r),i=0,o=0;o<r;o++)n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=t[o].x,n[i++]=t[o].y,n[i++]=t[o].z,n[i++]=t[o+1].x,n[i++]=t[o+1].y,n[i++]=t[o+1].z;var a=fs.createVertexBuffer({context:e,typedArray:n,usage:hs.STATIC_DRAW}),s=3*Float32Array.BYTES_PER_ELEMENT,l=[{index:Ds.position,vertexBuffer:a,componentsPerAttribute:3,componentDatatype:os.FLOAT,offsetInBytes:0,strideInBytes:s}];return new gs({context:e,attributes:l})}var Us=new Map;Object.keys(i).forEach((function(e){Bn.getGraphicType(e)&&Us.set(Bn.getGraphicType(e),i[e])}));var Vs={};function Ws(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function js(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ws(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ws(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Hs=function(){function e(t){var r;c()(this,e);var n=X.uuid(),i={uuid:n,id:n,groupId:-1};this.options=js(js({},i),t),this.name=this.options.name||"未命名",this._layerId=this.options.id,this._groupId=this.options.groupId,this._viewer=void 0,this._state=void 0,this._show=null===(r=t.show)||void 0===r||r,this.type=void 0,this._layerEvent=new j,this._layerEvent.on(R.ADD,this._onAdd,this),this._layerEvent.on(R.REMOVE,this._onRemove,this)}return f()(e,[{key:"layerId",get:function(){return this._layerId}},{key:"id",get:function(){return this._layerId}},{key:"groupId",get:function(){return this._groupId},set:function(e){this._groupId=e}},{key:"delegate",get:function(){return this._delegate}},{key:"show",get:function(){return this._show},set:function(e){var t=this;this._show=e,this._delegate&&!(this._delegate instanceof Array)&&(this._delegate.show=this._show)||this._delegate&&this._delegate instanceof Array&&this._delegate.forEach((function(e){e.show=t._show}))}},{key:"state",get:function(){return this._state}},{key:"layerEvent",get:function(){return this._layerEvent}},{key:"_addedHook",value:function(){this.show=this._show}},{key:"_removedHook",value:function(){}},{key:"_onAdd",value:function(e){this._viewer=e,this._delegate&&(this._delegate instanceof A.PrimitiveCollection?this._viewer.scene.primitives.add(this._delegate):this._viewer.dataSources.add(this._delegate),this._addedHook&&this._addedHook(),this._state=E.ADDED)}},{key:"_onRemove",value:function(){}},{key:"clear",value:function(){}},{key:"remove",value:function(){this._viewer&&this._viewer.removeLayer(this)}},{key:"addTo",value:function(e){return e&&e.addLayer&&e.addLayer(this),this}},{key:"equal",value:function(e){return this.layerId===e.layerId}},{key:"on",value:function(e,t,r){return this._layerEvent.on(e,t,r)}},{key:"once",value:function(e,t,r){var n=this._layerEvent.on(e,t,r);n&&n()}},{key:"off",value:function(e,t,r){return this._layerEvent.off(e,t,r)}}],[{key:"registerType",value:function(e){e&&(Vs[e.toLocaleUpperCase()]=e.toLocaleLowerCase())}},{key:"getLayerType",value:function(e){return Vs[e.toLocaleUpperCase()]||void 0}}]),e}();function Zs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Ys=function(e){d()(r,e);var t=Zs(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._cache=new A.AssociativeArray,e}return f()(r,[{key:"length",get:function(){return this._cache.length}},{key:"_onAddc",value:function(e){e instanceof A.PrimitiveCollection?this._viewer.scene.primitives.add(e):this._viewer.dataSources.add(e)}},{key:"_onAdd",value:function(e){var t=this;this._viewer=e,this._mountedHook&&this._mountedHook(),this._delegate&&(this._delegate instanceof Array?this._delegate.forEach((function(e){t._onAddc(e)})):this._onAddc(this._delegate),this._addedHook&&this._addedHook(),this._state=E.ADDED)}},{key:"_onRemovec",value:function(e){e instanceof A.PrimitiveCollection?(e.removeAll(),this._viewer.scene.primitives.remove(e)):this._delegate.then?(e.then((function(e){e.entities.removeAll()})),this._viewer.dataSources.remove(e)):(e.entities&&e.entities.removeAll(),this._viewer.dataSources.remove(e))}},{key:"_onRemove",value:function(){var e=this;this._delegate&&this._viewer&&(this.removeAllGraphic(),this._delegate instanceof Array?this._delegate.forEach((function(t){e._onRemovec(t)})):this._onRemovec(this._delegate),this._removedHook&&this._removedHook(),this._state=E.REMOVED)}},{key:"_addGraphic",value:function(e){e&&e.graphicEvent&&!this.hasGraphic(e)&&(this._cache.set(e.id,e),this._delegate&&e.graphicEvent.fire(O.ADD,this),this.layerEvent.fire(R.ADD_GRAPHIC,e),this._state===E.CLEARED&&(this._state=E.ADDED))}},{key:"_removeGraphic",value:function(e){e&&e.graphicEvent&&this.hasGraphic(e)&&(this._delegate&&e.graphicEvent.fire(O.REMOVE,this),this.layerEvent.fire(R.REMOVE_GRAPHIC,e),this._cache.remove(e.id))}},{key:"addGraphic",value:function(e){return this._addGraphic(e),this}},{key:"addGraphics",value:function(e){var t=this;return Array.isArray(e)&&e.forEach((function(e){t._addGraphic(e)})),this}},{key:"removeGraphic",value:function(e){return this._removeGraphic(e),this}},{key:"removeGraphics",value:function(e){var t=this;return(e=[].concat(e)).forEach((function(e){t.removeGraphic(e)})),this}},{key:"removeAllGraphic",value:function(){var e=this;return[].concat(this.getGraphics()).forEach((function(t){e.removeGraphic(t)})),this}},{key:"hasGraphic",value:function(e){return e&&this._cache.contains(e.id)}},{key:"getGraphic",value:function(e){return void 0!==e?this._cache.get(e):void 0}},{key:"getGraphicsByAttr",value:function(e,t){var r=[];return this.eachGraphic((function(n){n.attr[e]===t&&r.push(n)}),this),r}},{key:"eachGraphic",value:function(e,t){var r=this;return this.getGraphics().forEach((function(n,i){e&&e.call(t||r,n,i)})),this}},{key:"getGraphics",value:function(){return this._cache.values}},{key:"setStyle",value:function(e){}},{key:"flyTo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.delegate)return this._viewer.flyTo(this.delegate,e)}}]),r}(Hs);Ys.registerType("layer_group");A.Color.DEEPSKYBLUE,A.Color.GREEN,A.Color.ORANGE,A.Color.RED,A.Color.BLACK;Ys.registerType("cluster");Ys.registerType("geojson");Ys.registerType("czml");Ys.registerType("gpx");Ys.registerType("kml");r(72);var Js=r(73),Ks=r(74);r(75);Ys.registerType("graphic");Ys.registerType("html");Ys.registerType("primitive");Ys.registerType("tileset");var Xs=Object.freeze({UNLOADED:0,LOADING:1,PARSING:2,READY:3,FAILED:4}),Qs=r(11),qs=r.n(Qs),$s=function e(t,n,i){function o(s,l){if(!n[s]){if(!t[s]){if(!l&&r(76))return(void 0)(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,(function(e){var r=t[s][1][e];return o(r||e)}),u,u.exports,e,t,n,i)}return n[s].exports}for(var a=!1,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,r){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!==qs()(r))throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){var t,r,n,i,o,a;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;for(a=new Uint8Array(n),i=0,t=0,r=e.length;t<r;t++)o=e[t],a.set(o,i),i+=o.length;return a}},o={arraySet:function(e,t,r,n,i){for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(n)},{}],2:[function(e,t,r){var n=e("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var a=new n.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function l(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var r="",a=0;a<t;a++)r+=String.fromCharCode(e[a]);return r}a[254]=a[254]=1,r.string2buf=function(e){var t,r,i,o,a,s=e.length,l=0;for(o=0;o<s;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new n.Buf8(l),a=0,o=0;a<l;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|63&r):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t},r.buf2binstring=function(e){return l(e,e.length)},r.binstring2buf=function(e){for(var t=new n.Buf8(e.length),r=0,i=t.length;r<i;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){var r,n,i,o,s=t||e.length,c=new Array(2*s);for(n=0,r=0;r<s;)if((i=e[r++])<128)c[n++]=i;else if((o=a[i])>4)c[n++]=65533,r+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&r<s;)i=i<<6|63&e[r++],o--;o>1?c[n++]=65533:i<65536?c[n++]=i:(i-=65536,c[n++]=55296|i>>10&1023,c[n++]=56320|1023&i)}return l(c,n)},r.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+a[e[r]]>t?r:t}},{"./common":1}],3:[function(e,t,r){t.exports=function(e,t,r,n){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==r;){r-=a=r>2e3?2e3:r;do{o=o+(i=i+t[n++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}},{}],4:[function(e,t,r){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],5:[function(e,t,r){var n=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t,r,i){var o=n,a=i+r;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}},{}],6:[function(e,t,r){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],7:[function(e,t,r){t.exports=function(e,t){var r,n,i,o,a,s,l,c,u,f,h,d,p,y,m,v,g,A,_,C,E,x,B,T,b;r=e.state,n=e.next_in,T=e.input,i=n+(e.avail_in-5),o=e.next_out,b=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),l=r.dmax,c=r.wsize,u=r.whave,f=r.wnext,h=r.window,d=r.hold,p=r.bits,y=r.lencode,m=r.distcode,v=(1<<r.lenbits)-1,g=(1<<r.distbits)-1;e:do{p<15&&(d+=T[n++]<<p,p+=8,d+=T[n++]<<p,p+=8),A=y[d&v];t:for(;;){if(d>>>=_=A>>>24,p-=_,0==(_=A>>>16&255))b[o++]=65535&A;else{if(!(16&_)){if(0==(64&_)){A=y[(65535&A)+(d&(1<<_)-1)];continue t}if(32&_){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}C=65535&A,(_&=15)&&(p<_&&(d+=T[n++]<<p,p+=8),C+=d&(1<<_)-1,d>>>=_,p-=_),p<15&&(d+=T[n++]<<p,p+=8,d+=T[n++]<<p,p+=8),A=m[d&g];r:for(;;){if(d>>>=_=A>>>24,p-=_,!(16&(_=A>>>16&255))){if(0==(64&_)){A=m[(65535&A)+(d&(1<<_)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(E=65535&A,p<(_&=15)&&(d+=T[n++]<<p,(p+=8)<_&&(d+=T[n++]<<p,p+=8)),(E+=d&(1<<_)-1)>l){e.msg="invalid distance too far back",r.mode=30;break e}if(d>>>=_,p-=_,E>(_=o-a)){if((_=E-_)>u&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(x=0,B=h,0===f){if(x+=c-_,_<C){C-=_;do{b[o++]=h[x++]}while(--_);x=o-E,B=b}}else if(f<_){if(x+=c+f-_,(_-=f)<C){C-=_;do{b[o++]=h[x++]}while(--_);if(x=0,f<C){C-=_=f;do{b[o++]=h[x++]}while(--_);x=o-E,B=b}}}else if(x+=f-_,_<C){C-=_;do{b[o++]=h[x++]}while(--_);x=o-E,B=b}for(;C>2;)b[o++]=B[x++],b[o++]=B[x++],b[o++]=B[x++],C-=3;C&&(b[o++]=B[x++],C>1&&(b[o++]=B[x++]))}else{x=o-E;do{b[o++]=b[x++],b[o++]=b[x++],b[o++]=b[x++],C-=3}while(C>2);C&&(b[o++]=b[x++],C>1&&(b[o++]=b[x++]))}break}}break}}while(n<i&&o<s);n-=C=p>>3,d&=(1<<(p-=C<<3))-1,e.next_in=n,e.next_out=o,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=o<s?s-o+257:257-(o-s),r.hold=d,r.bits=p}},{}],8:[function(e,t,r){var n=e("../utils/common"),i=e("./adler32"),o=e("./crc32"),a=e("./inffast"),s=e("./inftrees");function l(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function c(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function u(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(852),t.distcode=t.distdyn=new n.Buf32(592),t.sane=1,t.back=-1,0):-2}function f(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,u(e)):-2}function h(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?-2:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,f(e))):-2}function d(e,t){var r,n;return e?(n=new c,e.state=n,n.window=null,0!==(r=h(e,t))&&(e.state=null),r):-2}var p,y,m=!0;function v(e){if(m){var t;for(p=new n.Buf32(512),y=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(1,e.lens,0,288,p,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(2,e.lens,0,32,y,0,e.work,{bits:5}),m=!1}e.lencode=p,e.lenbits=9,e.distcode=y,e.distbits=5}function g(e,t,r,i){var o,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new n.Buf8(a.wsize)),i>=a.wsize?(n.arraySet(a.window,t,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>i&&(o=i),n.arraySet(a.window,t,r-i,o,a.wnext),(i-=o)?(n.arraySet(a.window,t,r-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}r.inflateReset=f,r.inflateReset2=h,r.inflateResetKeep=u,r.inflateInit=function(e){return d(e,15)},r.inflateInit2=d,r.inflate=function(e,t){var r,c,u,f,h,d,p,y,m,A,_,C,E,x,B,T,b,P,M,w,I,D,S,O,R=0,L=new n.Buf8(4),k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;12===(r=e.state).mode&&(r.mode=13),h=e.next_out,u=e.output,p=e.avail_out,f=e.next_in,c=e.input,d=e.avail_in,y=r.hold,m=r.bits,A=d,_=p,D=0;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;m<16;){if(0===d)break e;d--,y+=c[f++]<<m,m+=8}if(2&r.wrap&&35615===y){r.check=0,L[0]=255&y,L[1]=y>>>8&255,r.check=o(r.check,L,2,0),y=0,m=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&y)<<8)+(y>>8))%31){e.msg="incorrect header check",r.mode=30;break}if(8!=(15&y)){e.msg="unknown compression method",r.mode=30;break}if(m-=4,I=8+(15&(y>>>=4)),0===r.wbits)r.wbits=I;else if(I>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<I,e.adler=r.check=1,r.mode=512&y?10:12,y=0,m=0;break;case 2:for(;m<16;){if(0===d)break e;d--,y+=c[f++]<<m,m+=8}if(r.flags=y,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=y>>8&1),512&r.flags&&(L[0]=255&y,L[1]=y>>>8&255,r.check=o(r.check,L,2,0)),y=0,m=0,r.mode=3;case 3:for(;m<32;){if(0===d)break e;d--,y+=c[f++]<<m,m+=8}r.head&&(r.head.time=y),512&r.flags&&(L[0]=255&y,L[1]=y>>>8&255,L[2]=y>>>16&255,L[3]=y>>>24&255,r.check=o(r.check,L,4,0)),y=0,m=0,r.mode=4;case 4:for(;m<16;){if(0===d)break e;d--,y+=c[f++]<<m,m+=8}r.head&&(r.head.xflags=255&y,r.head.os=y>>8),512&r.flags&&(L[0]=255&y,L[1]=y>>>8&255,r.check=o(r.check,L,2,0)),y=0,m=0,r.mode=5;case 5:if(1024&r.flags){for(;m<16;){if(0===d)break e;d--,y+=c[f++]<<m,m+=8}r.length=y,r.head&&(r.head.extra_len=y),512&r.flags&&(L[0]=255&y,L[1]=y>>>8&255,r.check=o(r.check,L,2,0)),y=0,m=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((C=r.length)>d&&(C=d),C&&(r.head&&(I=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,c,f,C,I)),512&r.flags&&(r.check=o(r.check,c,C,f)),d-=C,f+=C,r.length-=C),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===d)break e;C=0;do{I=c[f+C++],r.head&&I&&r.length<65536&&(r.head.name+=String.fromCharCode(I))}while(I&&C<d);if(512&r.flags&&(r.check=o(r.check,c,C,f)),d-=C,f+=C,I)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===d)break e;C=0;do{I=c[f+C++],r.head&&I&&r.length<65536&&(r.head.comment+=String.fromCharCode(I))}while(I&&C<d);if(512&r.flags&&(r.check=o(r.check,c,C,f)),d-=C,f+=C,I)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;m<16;){if(0===d)break e;d--,y+=c[f++]<<m,m+=8}if(y!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}y=0,m=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;m<32;){if(0===d)break e;d--,y+=c[f++]<<m,m+=8}e.adler=r.check=l(y),y=0,m=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=h,e.avail_out=p,e.next_in=f,e.avail_in=d,r.hold=y,r.bits=m,2;e.adler=r.check=1,r.mode=12;case 12:if(5===t||6===t)break e;case 13:if(r.last){y>>>=7&m,m-=7&m,r.mode=27;break}for(;m<3;){if(0===d)break e;d--,y+=c[f++]<<m,m+=8}switch(r.last=1&y,m-=1,3&(y>>>=1)){case 0:r.mode=14;break;case 1:if(v(r),r.mode=20,6===t){y>>>=2,m-=2;break e}break;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}y>>>=2,m-=2;break;case 14:for(y>>>=7&m,m-=7&m;m<32;){if(0===d)break e;d--,y+=c[f++]<<m,m+=8}if((65535&y)!=(y>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&y,y=0,m=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(C=r.length){if(C>d&&(C=d),C>p&&(C=p),0===C)break e;n.arraySet(u,c,f,C,h),d-=C,f+=C,p-=C,h+=C,r.length-=C;break}r.mode=12;break;case 17:for(;m<14;){if(0===d)break e;d--,y+=c[f++]<<m,m+=8}if(r.nlen=257+(31&y),y>>>=5,m-=5,r.ndist=1+(31&y),y>>>=5,m-=5,r.ncode=4+(15&y),y>>>=4,m-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;m<3;){if(0===d)break e;d--,y+=c[f++]<<m,m+=8}r.lens[k[r.have++]]=7&y,y>>>=3,m-=3}for(;r.have<19;)r.lens[k[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,S={bits:r.lenbits},D=s(0,r.lens,0,19,r.lencode,0,r.work,S),r.lenbits=S.bits,D){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;T=(R=r.lencode[y&(1<<r.lenbits)-1])>>>16&255,b=65535&R,!((B=R>>>24)<=m);){if(0===d)break e;d--,y+=c[f++]<<m,m+=8}if(b<16)y>>>=B,m-=B,r.lens[r.have++]=b;else{if(16===b){for(O=B+2;m<O;){if(0===d)break e;d--,y+=c[f++]<<m,m+=8}if(y>>>=B,m-=B,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}I=r.lens[r.have-1],C=3+(3&y),y>>>=2,m-=2}else if(17===b){for(O=B+3;m<O;){if(0===d)break e;d--,y+=c[f++]<<m,m+=8}m-=B,I=0,C=3+(7&(y>>>=B)),y>>>=3,m-=3}else{for(O=B+7;m<O;){if(0===d)break e;d--,y+=c[f++]<<m,m+=8}m-=B,I=0,C=11+(127&(y>>>=B)),y>>>=7,m-=7}if(r.have+C>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;C--;)r.lens[r.have++]=I}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,S={bits:r.lenbits},D=s(1,r.lens,0,r.nlen,r.lencode,0,r.work,S),r.lenbits=S.bits,D){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,S={bits:r.distbits},D=s(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,S),r.distbits=S.bits,D){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(d>=6&&p>=258){e.next_out=h,e.avail_out=p,e.next_in=f,e.avail_in=d,r.hold=y,r.bits=m,a(e,_),h=e.next_out,u=e.output,p=e.avail_out,f=e.next_in,c=e.input,d=e.avail_in,y=r.hold,m=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;T=(R=r.lencode[y&(1<<r.lenbits)-1])>>>16&255,b=65535&R,!((B=R>>>24)<=m);){if(0===d)break e;d--,y+=c[f++]<<m,m+=8}if(T&&0==(240&T)){for(P=B,M=T,w=b;T=(R=r.lencode[w+((y&(1<<P+M)-1)>>P)])>>>16&255,b=65535&R,!(P+(B=R>>>24)<=m);){if(0===d)break e;d--,y+=c[f++]<<m,m+=8}y>>>=P,m-=P,r.back+=P}if(y>>>=B,m-=B,r.back+=B,r.length=b,0===T){r.mode=26;break}if(32&T){r.back=-1,r.mode=12;break}if(64&T){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&T,r.mode=22;case 22:if(r.extra){for(O=r.extra;m<O;){if(0===d)break e;d--,y+=c[f++]<<m,m+=8}r.length+=y&(1<<r.extra)-1,y>>>=r.extra,m-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;T=(R=r.distcode[y&(1<<r.distbits)-1])>>>16&255,b=65535&R,!((B=R>>>24)<=m);){if(0===d)break e;d--,y+=c[f++]<<m,m+=8}if(0==(240&T)){for(P=B,M=T,w=b;T=(R=r.distcode[w+((y&(1<<P+M)-1)>>P)])>>>16&255,b=65535&R,!(P+(B=R>>>24)<=m);){if(0===d)break e;d--,y+=c[f++]<<m,m+=8}y>>>=P,m-=P,r.back+=P}if(y>>>=B,m-=B,r.back+=B,64&T){e.msg="invalid distance code",r.mode=30;break}r.offset=b,r.extra=15&T,r.mode=24;case 24:if(r.extra){for(O=r.extra;m<O;){if(0===d)break e;d--,y+=c[f++]<<m,m+=8}r.offset+=y&(1<<r.extra)-1,y>>>=r.extra,m-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===p)break e;if(C=_-p,r.offset>C){if((C=r.offset-C)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}C>r.wnext?(C-=r.wnext,E=r.wsize-C):E=r.wnext-C,C>r.length&&(C=r.length),x=r.window}else x=u,E=h-r.offset,C=r.length;C>p&&(C=p),p-=C,r.length-=C;do{u[h++]=x[E++]}while(--C);0===r.length&&(r.mode=21);break;case 26:if(0===p)break e;u[h++]=r.length,p--,r.mode=21;break;case 27:if(r.wrap){for(;m<32;){if(0===d)break e;d--,y|=c[f++]<<m,m+=8}if(_-=p,e.total_out+=_,r.total+=_,_&&(e.adler=r.check=r.flags?o(r.check,u,_,h-_):i(r.check,u,_,h-_)),_=p,(r.flags?y:l(y))!==r.check){e.msg="incorrect data check",r.mode=30;break}y=0,m=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;m<32;){if(0===d)break e;d--,y+=c[f++]<<m,m+=8}if(y!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}y=0,m=0}r.mode=29;case 29:D=1;break e;case 30:D=-3;break e;case 31:return-4;case 32:default:return-2}return e.next_out=h,e.avail_out=p,e.next_in=f,e.avail_in=d,r.hold=y,r.bits=m,(r.wsize||_!==e.avail_out&&r.mode<30&&(r.mode<27||4!==t))&&g(e,e.output,e.next_out,_-e.avail_out)?(r.mode=31,-4):(A-=e.avail_in,_-=e.avail_out,e.total_in+=A,e.total_out+=_,r.total+=_,r.wrap&&_&&(e.adler=r.check=r.flags?o(r.check,u,_,e.next_out-_):i(r.check,u,_,e.next_out-_)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0===A&&0===_||4===t)&&0===D&&(D=-5),D)},r.inflateEnd=function(e){if(!e||!e.state)return-2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},r.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?-2:(r.head=t,t.done=!1,0):-2},r.inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?-2:11===r.mode&&i(1,t,n,0)!==r.check?-3:g(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,0):-2},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(e,t,r){var n=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,l,c,u,f,h){var d,p,y,m,v,g,A,_,C,E=h.bits,x=0,B=0,T=0,b=0,P=0,M=0,w=0,I=0,D=0,S=0,O=null,R=0,L=new n.Buf16(16),k=new n.Buf16(16),F=null,G=0;for(x=0;x<=15;x++)L[x]=0;for(B=0;B<l;B++)L[t[r+B]]++;for(P=E,b=15;b>=1&&0===L[b];b--);if(P>b&&(P=b),0===b)return c[u++]=20971520,c[u++]=20971520,h.bits=1,0;for(T=1;T<b&&0===L[T];T++);for(P<T&&(P=T),I=1,x=1;x<=15;x++)if(I<<=1,(I-=L[x])<0)return-1;if(I>0&&(0===e||1!==b))return-1;for(k[1]=0,x=1;x<15;x++)k[x+1]=k[x]+L[x];for(B=0;B<l;B++)0!==t[r+B]&&(f[k[t[r+B]]++]=B);if(0===e?(O=F=f,g=19):1===e?(O=i,R-=257,F=o,G-=257,g=256):(O=a,F=s,g=-1),S=0,B=0,x=T,v=u,M=P,w=0,y=-1,m=(D=1<<P)-1,1===e&&D>852||2===e&&D>592)return 1;for(;;){A=x-w,f[B]<g?(_=0,C=f[B]):f[B]>g?(_=F[G+f[B]],C=O[R+f[B]]):(_=96,C=0),d=1<<x-w,T=p=1<<M;do{c[v+(S>>w)+(p-=d)]=A<<24|_<<16|C|0}while(0!==p);for(d=1<<x-1;S&d;)d>>=1;if(0!==d?(S&=d-1,S+=d):S=0,B++,0==--L[x]){if(x===b)break;x=t[r+f[B]]}if(x>P&&(S&m)!==y){for(0===w&&(w=P),v+=T,I=1<<(M=x-w);M+w<b&&!((I-=L[M+w])<=0);)M++,I<<=1;if(D+=1<<M,1===e&&D>852||2===e&&D>592)return 1;c[y=S&m]=P<<24|M<<16|v-u|0}}return 0!==S&&(c[v+S]=x-w<<24|64<<16|0),h.bits=P,0}},{"../utils/common":1}],10:[function(e,t,r){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(e,t,r){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/lib/inflate.js":[function(e,t,r){var n=e("./zlib/inflate"),i=e("./utils/common"),o=e("./utils/strings"),a=e("./zlib/constants"),s=e("./zlib/messages"),l=e("./zlib/zstream"),c=e("./zlib/gzheader"),u=Object.prototype.toString;function f(e){if(!(this instanceof f))return new f(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,t.windowBits);if(r!==a.Z_OK)throw new Error(s[r]);this.header=new c,n.inflateGetHeader(this.strm,this.header)}function h(e,t){var r=new f(t);if(r.push(e,!0),r.err)throw r.msg||s[r.err];return r.result}f.prototype.push=function(e,t){var r,s,l,c,f,h,d=this.strm,p=this.options.chunkSize,y=this.options.dictionary,m=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?d.input=o.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?d.input=new Uint8Array(e):d.input=e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new i.Buf8(p),d.next_out=0,d.avail_out=p),(r=n.inflate(d,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&y&&(h="string"==typeof y?o.string2buf(y):"[object ArrayBuffer]"===u.call(y)?new Uint8Array(y):y,r=n.inflateSetDictionary(this.strm,h)),r===a.Z_BUF_ERROR&&!0===m&&(r=a.Z_OK,m=!1),r!==a.Z_STREAM_END&&r!==a.Z_OK)return this.onEnd(r),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&r!==a.Z_STREAM_END&&(0!==d.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(d.output,d.next_out),c=d.next_out-l,f=o.buf2string(d.output,l),d.next_out=c,d.avail_out=p-c,c&&i.arraySet(d.output,d.output,l,c,0),this.onData(f)):this.onData(i.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(m=!0)}while((d.avail_in>0||0===d.avail_out)&&r!==a.Z_STREAM_END);return r===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),d.avail_out=0,!0)},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=f,r.inflate=h,r.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},r.ungzip=h},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js");function el(e,t,r,n){var i=e|t<<8,o=i>>11&31,a=i>>5&63,s=31&i;return r[n+0]=o<<3|o>>2,r[n+1]=a<<2|a>>4,r[n+2]=s<<3|s>>2,r[n+3]=255,i}function tl(e,t,r,n){var i=0;0!=(6&n)&&(i=8),function(e,t,r,n){for(var i=new Uint8Array(16),o=el(t[r+0],t[r+1],i,0),a=el(t[r+2],t[r+3],i,4),s=0;s<3;s++){var l=i[s],c=i[4+s];n&&o<=a?(i[8+s]=(l+c)/2,i[12+s]=0):(i[8+s]=(2*l+c)/3,i[12+s]=(l+2*c)/3)}i[11]=255,i[15]=n&&o<=a?0:255;var u=new Uint8Array(16);for(s=0;s<4;++s){var f=t[r+4+s];u[4*s+0]=3&f,u[4*s+1]=f>>2&3,u[4*s+2]=f>>4&3,u[4*s+3]=f>>6&3}for(s=0;s<16;++s)for(var h=4*u[s],d=0;d<4;++d)e[4*s+d]=i[h+d]}(e,t,r+i,0!=(1&n)),0!=(2&n)?function(e,t,r){for(var n=0;n<8;++n){var i=bytes[r+n],o=15&i,a=240&i;e[8*n+3]=o|o<<4,e[8*n+7]=a|a>>4}}(e,0,r):0!=(4&n)&&function(e,t,r){var n=t[r+0],i=t[r+1],o=new Uint8Array(8);if(o[0]=n,o[1]=i,n<=i){for(var a=1;a<5;++a)o[1+a]=((5-a)*n+a*i)/5;o[6]=0,o[7]=255}else for(a=1;a<7;++a)o[1+a]=((7-a)*n+a*i)/7;var s=new Uint8Array(16),l=(r=r+2,0);for(a=0;a<2;++a){for(var c=0,u=0;u<3;++u){c|=t[r++]<<8*u}for(u=0;u<8;++u){var f=c>>3*u&7;s[l++]=f}}for(a=0;a<16;++a)e[4*a+3]=o[s[a]]}(e,t,r)}function rl(e){}rl.decode=function(e,t,r,n,i){if(null!=e&&null!=n&&0!=r&&0!=t){var o=0;1&(o=i>11||5===i?4:33)&&32&o?function(e,t,r,n){for(var i=new Uint16Array(4),o=e,a=0,s=0,l=0,c=0,u=0,f=0,h=0,d=0,p=0,y=t/4,m=r/4,v=0;v<m;v++)for(var g=0;g<y;g++)l=4*((m-v)*y+g),i[0]=n[l],i[1]=n[l+1],c=31&i[0],u=2016&i[0],f=63488&i[0],h=31&i[1],d=2016&i[1],p=63488&i[1],i[2]=5*c+3*h>>3|5*u+3*d>>3&2016|5*f+3*p>>3&63488,i[3]=5*h+3*c>>3|5*d+3*u>>3&2016|5*p+3*f>>3&63488,a=n[l+2],o[s=4*v*t+4*g]=i[3&a],o[s+1]=i[a>>2&3],o[s+2]=i[a>>4&3],o[s+3]=i[a>>6&3],o[s+=t]=i[a>>8&3],o[s+1]=i[a>>10&3],o[s+2]=i[a>>12&3],o[s+3]=i[a>>14],a=n[l+3],o[s+=t]=i[3&a],o[s+1]=i[a>>2&3],o[s+2]=i[a>>4&3],o[s+3]=i[a>>6&3],o[s+=t]=i[a>>8&3],o[s+1]=i[a>>10&3],o[s+2]=i[a>>12&3],o[s+3]=i[a>>14]}
/*! @brief Decompresses an image in memory.

 @param rgba		Storage for the decompressed pixels.
 @param width	The width of the source image.
 @param height	The height of the source image.
 @param blocks	The compressed DXT blocks.
 @param flags	Compression flags.

 The decompressed pixels will be written as a contiguous array of width*height
 16 rgba values, with each component as 1 byte each. In memory this is:

 { r1, g1, b1, a1, .... , rn, gn, bn, an } for n = width*height

 The flags parameter should specify either kDxt1, kDxt3 or kDxt5 compression,
 however, DXT1 will be used by default if none is specified. All other flags
 are ignored.

 Internally this function calls squish::Decompress for each block.
 */(e,t,r,n):function(e,t,r,n,i){for(var o=0!=(1&i)?8:16,a=0,s=0;s<r;s+=4)for(var l=0;l<t;l+=4){var c=new Uint8Array(64);tl(c,n,a,i);for(var u=0,f=0;f<4;++f)for(var h=0;h<4;++h){var d=l+h,p=s+f;if(d<t&&p<r)for(var y=4*(t*(r-p)+d),m=0;m<4;++m)e[y++]=c[u++];else u+=4}a+=o}}(e,t,r,n,o)}};var nl=rl,il=function(){var e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if("object"!==("undefined"==typeof WebAssembly?"undefined":qs()(WebAssembly)))return{supported:!1};var r,n="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";WebAssembly.validate(e)&&(n="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");var i=WebAssembly.instantiate(function(e){for(var r=new Uint8Array(e.length),n=0;n<e.length;++n){var i=e.charCodeAt(n);r[n]=i>96?i-71:i>64?i-65:i>47?i+4:i>46?63:62}var o=0;for(n=0;n<e.length;++n)r[o++]=r[n]<60?t[r[n]]:64*(r[n]-60)+r[++n];return r.buffer.slice(0,o)}(n),{}).then((function(e){(r=e.instance).exports.__wasm_call_ctors()}));function o(e,t,n,i,o,a){var s=r.exports.sbrk,l=n+3&-4,c=s(l*i),u=s(o.length),f=new Uint8Array(r.exports.memory.buffer);f.set(o,u);var h=e(c,n,i,u,o.length);if(0==h&&a&&a(c,l,i),t.set(f.subarray(c,c+n*i)),s(c-s(0)),0!=h)throw new Error("Malformed buffer data: "+h)}var a={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},s={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:i,supported:!0,decodeVertexBuffer:function(e,t,n,i,s){o(r.exports.meshopt_decodeVertexBuffer,e,t,n,i,r.exports[a[s]])},decodeIndexBuffer:function(e,t,n,i){o(r.exports.meshopt_decodeIndexBuffer,e,t,n,i)},decodeIndexSequence:function(e,t,n,i){o(r.exports.meshopt_decodeIndexSequence,e,t,n,i)},decodeGltfBuffer:function(e,t,n,i,l,c){o(r.exports[s[l]],e,t,n,i,r.exports[a[c]])}}}();function ol(){}ol.s3tc=!0,ol.pvrtc=!1,ol.etc1=!1;var al=1,sl=2,ll=3,cl=0,ul=1,fl=2,hl={0:Uint32Array.BYTES_PER_ELEMENT,1:Float32Array.BYTES_PER_ELEMENT,2:Float64Array.BYTES_PER_ELEMENT},dl=10,pl=11,yl=1,ml=2,vl=16,gl=32,Al=1,_l=4,Cl=16,El=32,xl=64,Bl=128,Tl=512,bl=1024;function Pl(e,t,r){r=e.byteLength;return e=e.subarray(0,0+r),new TextDecoder("utf-8").decode(e)}function Ml(e,t,r){var n=t.getUint32(r,!0);return r+=Uint32Array.BYTES_PER_ELEMENT,{string:Pl(new Uint8Array(e,r,n)),bytesOffset:r+=n,length:n}}function wl(e,t,r,n){for(var i={},o=[],a=new Array(16),s=0;s<16;s++)a[s]=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT;i.matrix=a,i.skeletonNames=o;var l=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;for(var c=0;c<l;c++){var u=Ml(e,t,r);o.push(u.string),r=u.bytesOffset}return n.push(i),r}function Il(e,t,r,n,i){var o={};o.rangeList=t.getFloat32(r,!0),r+=Float32Array.BYTES_PER_ELEMENT,o.rangeMode=t.getUint16(r,!0),r+=Uint16Array.BYTES_PER_ELEMENT;var a={};a.x=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,a.y=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,a.z=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT;var s=t.getFloat64(r,!0);if(r+=Float64Array.BYTES_PER_ELEMENT,o.boundingSphere={center:a,radius:s},3===i){var l={};l.x=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,l.y=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,l.z=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT;var c={};c.x=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,c.y=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,c.z=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT;var u={};u.x=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,u.y=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,u.z=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT;var f={};f.x=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,f.y=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,f.z=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,o.obb={xExtent:c,yExtent:u,zExtent:f,obbCenter:l}}var h=Ml(e,t,r),d=h.string;r=h.bytesOffset;var p=d.indexOf("Geometry");if(-1!==p){var y=d.substring(p);d=d.replace(y,"")}o.childTile=d,o.geodes=[];var m=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;for(var v=0;v<m;v++)r=wl(e,t,r,o.geodes);(n.push(o),3===i)&&(r=Ml(e,t,r).bytesOffset);return r}function Dl(e,t,r,n){var i=t.getUint32(r,!0);if(n.verticesCount=i,(r+=Uint32Array.BYTES_PER_ELEMENT)<=0)return r;var o=t.getUint16(r,!0);r+=Uint16Array.BYTES_PER_ELEMENT;var a=t.getUint16(r,!0);a=o*Float32Array.BYTES_PER_ELEMENT,r+=Uint16Array.BYTES_PER_ELEMENT;var s=i*o*Float32Array.BYTES_PER_ELEMENT,l=new Uint8Array(e,r,s);r+=s;var c=n.vertexAttributes,u=n.attrLocation;return u.aPosition=c.length,c.push({index:u.aPosition,typedArray:l,componentsPerAttribute:o,componentDatatype:5126,offsetInBytes:0,strideInBytes:a,normalize:!1}),r}function Sl(e,t,r,n){var i=t.getUint32(r,!0);if(r+=Uint32Array.BYTES_PER_ELEMENT,i<=0)return r;var o=t.getUint16(r,!0);r+=Uint16Array.BYTES_PER_ELEMENT;var a=t.getUint16(r,!0);r+=Uint16Array.BYTES_PER_ELEMENT;var s=i*o*Float32Array.BYTES_PER_ELEMENT,l=new Uint8Array(e,r,s);r+=s;var c=n.vertexAttributes,u=n.attrLocation;return u.aNormal=c.length,c.push({index:u.aNormal,typedArray:l,componentsPerAttribute:o,componentDatatype:5126,offsetInBytes:0,strideInBytes:a,normalize:!1}),r}function Ol(e,t,r,n){var i=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var o,a=n.verticesCount;if(i>0){t.getUint16(r,!0);r+=Uint16Array.BYTES_PER_ELEMENT,r+=2*Uint8Array.BYTES_PER_ELEMENT;var s=i*Uint8Array.BYTES_PER_ELEMENT*4;o=new Uint8Array(e,r,s).slice(0,s),r+=s}else{o=new Uint8Array(4*a);for(var l=0;l<a;l++)o[4*l]=255,o[4*l+1]=255,o[4*l+2]=255,o[4*l+3]=255}var c=n.vertexAttributes,u=n.attrLocation;return u.aColor=c.length,c.push({index:u.aColor,typedArray:o,componentsPerAttribute:4,componentDatatype:5121,offsetInBytes:0,strideInBytes:4,normalize:!0}),n.vertexColor=o,r}function Rl(e,t,r,n){var i=t.getUint32(r,!0);if(r+=Uint32Array.BYTES_PER_ELEMENT,i<=0)return r;t.getUint16(r,!0);r+=Uint16Array.BYTES_PER_ELEMENT,r+=2*Uint8Array.BYTES_PER_ELEMENT;var o=i*Uint8Array.BYTES_PER_ELEMENT*4,a=new Uint8Array(e,r,o);r+=o;var s=n.vertexAttributes,l=n.attrLocation;return l.aSecondColor=s.length,s.push({index:l.aSecondColor,typedArray:a,componentsPerAttribute:4,componentDatatype:5121,offsetInBytes:0,strideInBytes:4,normalize:!0}),r}function Ll(e,t,r,n){var i=t.getUint16(r,!0);r+=Uint16Array.BYTES_PER_ELEMENT,r+=Uint16Array.BYTES_PER_ELEMENT;for(var o=0;o<i;o++){var a=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var s=t.getUint16(r,!0);r+=Uint16Array.BYTES_PER_ELEMENT;t.getUint16(r,!0);r+=Uint16Array.BYTES_PER_ELEMENT;var l=a*s*Float32Array.BYTES_PER_ELEMENT,c=new Uint8Array(e,r,l);r+=l;var u="aTexCoord"+o,f=n.vertexAttributes,h=n.attrLocation;h[u]=f.length,f.push({index:h[u],typedArray:c,componentsPerAttribute:s,componentDatatype:5126,offsetInBytes:0,strideInBytes:s*Float32Array.BYTES_PER_ELEMENT,normalize:!1})}return r}function kl(e,t,r,n){var i=t.getUint16(r,!0);r+=Uint16Array.BYTES_PER_ELEMENT,r+=Uint16Array.BYTES_PER_ELEMENT;for(var o=n.vertexAttributes,a=n.attrLocation,s=0;s<i;s++){var l=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var c=t.getUint16(r,!0);r+=Uint16Array.BYTES_PER_ELEMENT;t.getUint16(r,!0);r+=Uint16Array.BYTES_PER_ELEMENT;var u=l*c*Float32Array.BYTES_PER_ELEMENT;if(17===c||29===c){var f=new Uint8Array(e,r,u);n.instanceCount=l,n.instanceMode=c,n.instanceBuffer=f,n.instanceIndex=1;var h=c*l*4,d=f.slice(0,h);n.vertexColorInstance=d;var p=void 0;17===c?(p=17*Float32Array.BYTES_PER_ELEMENT,a.uv2=o.length,o.push({index:a.uv2,componentsPerAttribute:4,componentDatatype:5126,normalize:!1,offsetInBytes:0,strideInBytes:p,instanceDivisor:1}),a.uv3=o.length,o.push({index:a.uv3,componentsPerAttribute:4,componentDatatype:5126,normalize:!1,offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:p,instanceDivisor:1}),a.uv4=o.length,o.push({index:a.uv4,componentsPerAttribute:4,componentDatatype:5126,normalize:!1,offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:p,instanceDivisor:1}),a.secondary_colour=o.length,o.push({index:a.secondary_colour,componentsPerAttribute:4,componentDatatype:5126,normalize:!1,offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:p,instanceDivisor:1}),a.uv6=o.length,o.push({index:a.uv6,componentsPerAttribute:4,componentDatatype:5121,normalize:!0,offsetInBytes:16*Float32Array.BYTES_PER_ELEMENT,strideInBytes:p,instanceDivisor:1})):29===c&&(p=29*Float32Array.BYTES_PER_ELEMENT,a.uv1=o.length,o.push({index:a.uv1,componentsPerAttribute:4,componentDatatype:5126,normalize:!1,offsetInBytes:0,strideInBytes:p,instanceDivisor:1,byteLength:u}),a.uv2=o.length,o.push({index:a.uv2,componentsPerAttribute:4,componentDatatype:5126,normalize:!1,offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:p,instanceDivisor:1}),a.uv3=o.length,o.push({index:a.uv3,componentsPerAttribute:4,componentDatatype:5126,normalize:!1,offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:p,instanceDivisor:1}),a.uv4=o.length,o.push({index:a.uv4,componentsPerAttribute:4,componentDatatype:5126,normalize:!1,offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:p,instanceDivisor:1}),a.uv5=o.length,o.push({index:a.uv5,componentsPerAttribute:4,componentDatatype:5126,normalize:!1,offsetInBytes:16*Float32Array.BYTES_PER_ELEMENT,strideInBytes:p,instanceDivisor:1}),a.uv6=o.length,o.push({index:a.uv6,componentsPerAttribute:4,componentDatatype:5126,normalize:!1,offsetInBytes:20*Float32Array.BYTES_PER_ELEMENT,strideInBytes:p,instanceDivisor:1}),a.uv7=o.length,o.push({index:a.uv7,componentsPerAttribute:3,componentDatatype:5126,normalize:!1,offsetInBytes:24*Float32Array.BYTES_PER_ELEMENT,strideInBytes:p,instanceDivisor:1}),a.secondary_colour=o.length,o.push({index:a.secondary_colour,componentsPerAttribute:4,componentDatatype:5121,normalize:!0,offsetInBytes:27*Float32Array.BYTES_PER_ELEMENT,strideInBytes:p,instanceDivisor:1}),a.uv9=o.length,o.push({index:a.uv9,componentsPerAttribute:4,componentDatatype:5121,normalize:!0,offsetInBytes:28*Float32Array.BYTES_PER_ELEMENT,strideInBytes:p,instanceDivisor:1}))}else{var y=l*c;n.instanceBounds=new Float32Array(y);for(var m=0;m<y;m++)n.instanceBounds[m]=t.getFloat32(r+m*Float32Array.BYTES_PER_ELEMENT,!0)}r+=u}return r}function Fl(e,t,r,n,i){if(3===i){t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT}if(r=Ol(e,t,r=Sl(e,t,r=Dl(e,t,r,n),n),n),3!==i&&(r=Rl(e,t,r,n)),r=kl(e,t,r=Ll(e,t,r,n),n),3===i){r=function(e,t,r,n){var i=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;for(var o=0;o<i;o++){var a=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var s=t.getUint16(r,!0);r+=Uint16Array.BYTES_PER_ELEMENT;var l=t.getUint16(r,!0);r+=Uint16Array.BYTES_PER_ELEMENT;var c=a*s*hl[l],u=new Uint8Array(e,r,c);r+=c;var f=n.vertexAttributes,h=n.attrLocation,d="aCustom"+o;h[d]=f.length,f.push({index:h[d],typedArray:u,componentsPerAttribute:s,componentDatatype:5126,offsetInBytes:0,strideInBytes:0,normalize:!1})}return r}(e,t,r,n);var o=Ml(e,t,r);r=o.bytesOffset,n.customVertexAttribute=JSON.parse(o.string);var a="aCustom"+n.customVertexAttribute.TextureCoordMatrix,s="aCustom"+n.customVertexAttribute.VertexWeight;void 0!==n.attrLocation[a]&&(n.attrLocation.aTextureCoordMatrix=n.attrLocation[a],delete n.attrLocation[a]),void 0!==n.attrLocation[s]&&(n.attrLocation.aVertexWeight=n.attrLocation[s],delete n.attrLocation[s]);var l=r%4;l&&(l=4-l),r=function(e,t,r,n){var i=t.getUint32(r,!0);if(r+=Uint32Array.BYTES_PER_ELEMENT,i<=0)return r;var o=t.getUint16(r,!0);return r+=Uint16Array.BYTES_PER_ELEMENT,t.getUint16(r,!0),r+=Uint16Array.BYTES_PER_ELEMENT,r+=i*o*Float32Array.BYTES_PER_ELEMENT}(0,t,r+=l)}return r}function Gl(e,t,r,n,i,o){var a,s,l,c=0,u=i.vertexAttributes,f=i.attrLocation;switch(t){case _l:case Cl:case El:c=2*Uint16Array.BYTES_PER_ELEMENT,0!=(16&o)||t!==Cl&&t!==El||(c=2*Float32Array.BYTES_PER_ELEMENT),a=new Uint8Array(e*c);break;case xl:case Bl:c=4*Uint8Array.BYTES_PER_ELEMENT,a=new Uint8Array(4*e);break;case Tl:case bl:c=Float32Array.BYTES_PER_ELEMENT*r,a=new Uint8Array(e*r*4);break;default:c=4*Uint16Array.BYTES_PER_ELEMENT,a=new Uint8Array(e*c)}switch(il.decodeVertexBuffer(a,e,c,n,n.length),t){case Al:f.aPosition=u.length,u.push({index:f.aPosition,typedArray:new Uint16Array(a.buffer,0,a.length/2),componentsPerAttribute:4,componentDatatype:5122,offsetInBytes:0,strideInBytes:0,normalize:!1}),i.verticesCount=e;break;case _l:f.aNormal=u.length,u.push({index:f.aNormal,typedArray:new Int16Array(a.buffer,0,a.length/2),componentsPerAttribute:2,componentDatatype:5122,offsetInBytes:0,strideInBytes:0,normalize:!1});break;case Cl:0==(16&o)?(l=5126,Float32Array,s=new Float32Array(a.buffer,0,a.length/4)):(l=5122,Uint16Array,s=new Uint16Array(a.buffer,0,a.length/2)),f.aTexCoord0=u.length,u.push({index:f.aTexCoord0,typedArray:s,componentsPerAttribute:2,componentDatatype:l,offsetInBytes:0,strideInBytes:0,normalize:!1});break;case El:0==(16&o)?(l=5126,Float32Array,s=new Float32Array(a.buffer,0,a.length/4)):(l=5122,Uint16Array,s=new Uint16Array(a.buffer,0,a.length/2)),f.aTexCoord1=u.length,u.push({index:f.aTexCoord1,typedArray:s,componentsPerAttribute:2,componentDatatype:l,offsetInBytes:0,strideInBytes:0,normalize:!1});break;case xl:f.aColor=u.length,u.push({index:f.aColor,typedArray:a,componentsPerAttribute:4,componentDatatype:5121,offsetInBytes:0,strideInBytes:0,normalize:!0});break;case Bl:f.aSecondColor=u.length,u.push({index:f.aSecondColor,typedArray:a,componentsPerAttribute:4,componentDatatype:5120,offsetInBytes:0,strideInBytes:0,normalize:!1});break;case Tl:f.aCustom0=u.length,u.push({index:f.aCustom0,typedArray:new Float32Array(a.buffer,0,a.length/4),componentsPerAttribute:r,componentDatatype:5126,offsetInBytes:0,strideInBytes:0,normalize:!1});break;case bl:f.aCustom1=u.length,u.push({index:f.aCustom1,typedArray:new Float32Array(a.buffer,0,a.length/4),componentsPerAttribute:r,componentDatatype:5126,offsetInBytes:0,strideInBytes:0,normalize:!1})}}function Nl(e,t,r,n,i){var o=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT,n.compressOptions=o;var a=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT,n.minVerticesValue={x:0,y:0,z:0,w:0},n.minTexCoordValue=[{x:0,y:0},{x:0,y:0}],n.texCoordCompressConstant=[{x:0,y:0,z:0},{x:0,y:0,z:0}];for(var s=0;s<a;s++){var l=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT,n.vertCompressConstant=t.getFloat32(r,!0),r+=Float32Array.BYTES_PER_ELEMENT,n.minVerticesValue.x=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,n.minVerticesValue.y=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,n.minVerticesValue.z=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT;var c=t.getFloat64(r,!0);r+=Float64Array.BYTES_PER_ELEMENT;var u=t.getFloat64(r,!0);r+=Float64Array.BYTES_PER_ELEMENT;var f=t.getFloat64(r,!0);r+=Float64Array.BYTES_PER_ELEMENT;var h=t.getFloat64(r,!0);r+=Float64Array.BYTES_PER_ELEMENT;var d=t.getFloat64(r,!0);r+=Float64Array.BYTES_PER_ELEMENT;var p=t.getFloat64(r,!0);r+=Float64Array.BYTES_PER_ELEMENT;var y=t.getFloat64(r,!0);r+=Float64Array.BYTES_PER_ELEMENT;var m=t.getFloat64(r,!0);r+=Float64Array.BYTES_PER_ELEMENT,n.minTexCoordValue[0].x=f,n.minTexCoordValue[0].y=h,n.minTexCoordValue[1].x=y,n.minTexCoordValue[1].y=m,n.texCoordCompressConstant[0].x=c,n.texCoordCompressConstant[0].y=u,n.texCoordCompressConstant[1].x=d,n.texCoordCompressConstant[1].y=p;var v=t.getInt32(r,!0);r+=Int32Array.BYTES_PER_ELEMENT;for(var g=0;g<v;g++){var A=t.getInt32(r,!0);r+=Int32Array.BYTES_PER_ELEMENT;var _=0;A!==Tl&&A!==bl||(_=t.getInt32(r,!0),r+=Int32Array.BYTES_PER_ELEMENT);var C=t.getInt32(r,!0);r+=Int32Array.BYTES_PER_ELEMENT;var E=new Uint8Array(e,r,C),x=(r+=Uint8Array.BYTES_PER_ELEMENT*C)%4;x&&(x=4-x),r+=x,Gl(l,A,_,E,n,o)}var B=Ml(e,t,r);r=B.bytesOffset,n.customVertexAttribute=JSON.parse(B.string);var T="aCustom"+n.customVertexAttribute.TextureCoordMatrix,b="aCustom"+n.customVertexAttribute.VertexWeight;void 0!==n.attrLocation[T]&&(n.attrLocation.aTextureCoordMatrix=n.attrLocation[T],s===a-1&&delete n.attrLocation[T]),void 0!==n.attrLocation[b]&&(n.attrLocation.aVertexWeight=n.attrLocation[b],s===a-1&&delete n.attrLocation[b]);var P=r%4;P&&(P=4-P),r+=P}return r}function zl(e,t,r,n,i){var o=t.getInt32(r,!0);r+=Int32Array.BYTES_PER_ELEMENT;for(var a=0;a<o;a++){var s={},l=t.getInt32(r,!0);if(r+=Int32Array.BYTES_PER_ELEMENT,!(l<1)){var c=t.getInt8(r,!0);r+=Int8Array.BYTES_PER_ELEMENT;t.getInt8(r,!0);r+=Int8Array.BYTES_PER_ELEMENT;var u=t.getInt8(r,!0);r+=Int8Array.BYTES_PER_ELEMENT;t.getInt8(r,!0);r+=Int8Array.BYTES_PER_ELEMENT;var f=t.getInt32(r,!0);r+=Int32Array.BYTES_PER_ELEMENT;var h=void 0;13!==u?(h=new Uint8Array(e,r,f),r+=Uint8Array.BYTES_PER_ELEMENT*f):(h=new Uint32Array(e,r,f),r+=Uint32Array.BYTES_PER_ELEMENT*f);var d=r%4;d&&(d=4-d),r+=d;var p=void 0;13!==u?(p=new Uint8Array(l*Uint32Array.BYTES_PER_ELEMENT),il.decodeIndexBuffer(p,l,Uint32Array.BYTES_PER_ELEMENT,h)):p=h;var y=t.getInt32(r,!0);r+=Int32Array.BYTES_PER_ELEMENT,s.indexType=c;var m=0===c?new Uint16Array(l):new Uint32Array(l);s.indicesCount=l;var v=new Uint32Array(p.buffer,p.byteOffset,p.byteLength/4);m.set(v,0),s.indicesTypedArray=m,s.primitiveType=u;for(var g=0;g<y;g++){var A=Ml(e,t,r);r=A.bytesOffset,s.materialCode=A.string}n.push(s),(d=r%4)&&(d=4-d),r+=d}}return r}function Ul(e,t,r,n){var i=t.getUint32(r,!0);return n.compressOptions=i,r+=Uint32Array.BYTES_PER_ELEMENT,r=(i&yl)===yl?function(e,t,r,n){var i=t.getUint32(r,!0);if(n.verticesCount=i,(r+=Uint32Array.BYTES_PER_ELEMENT)<=0)return r;var o=t.getUint16(r,!0);r+=Uint16Array.BYTES_PER_ELEMENT;var a=t.getUint16(r,!0);a=o*Int16Array.BYTES_PER_ELEMENT,r+=Uint16Array.BYTES_PER_ELEMENT;var s=t.getFloat32(r,!0);r+=Float32Array.BYTES_PER_ELEMENT;var l={};l.x=t.getFloat32(r,!0),r+=Float32Array.BYTES_PER_ELEMENT,l.y=t.getFloat32(r,!0),r+=Float32Array.BYTES_PER_ELEMENT,l.z=t.getFloat32(r,!0),r+=Float32Array.BYTES_PER_ELEMENT,l.w=t.getFloat32(r,!0),r+=Float32Array.BYTES_PER_ELEMENT,n.vertCompressConstant=s,n.minVerticesValue=l;var c=i*o*Int16Array.BYTES_PER_ELEMENT,u=new Uint8Array(e,r,c);r+=c;var f=n.vertexAttributes,h=n.attrLocation;return h.aPosition=f.length,f.push({index:h.aPosition,typedArray:u,componentsPerAttribute:o,componentDatatype:5122,offsetInBytes:0,strideInBytes:a,normalize:!1}),r}(e,t,r,n):Dl(e,t,r,n),r=(i&ml)===ml?function(e,t,r,n){var i=t.getUint32(r,!0);if(r+=Uint32Array.BYTES_PER_ELEMENT,i<=0)return r;t.getUint16(r,!0),r+=Uint16Array.BYTES_PER_ELEMENT;var o=t.getUint16(r,!0);r+=Uint16Array.BYTES_PER_ELEMENT;var a=2*i*Int16Array.BYTES_PER_ELEMENT,s=new Uint8Array(e,r,a);r+=a;var l=n.vertexAttributes,c=n.attrLocation;return c.aNormal=l.length,l.push({index:c.aNormal,typedArray:s,componentsPerAttribute:2,componentDatatype:5122,offsetInBytes:0,strideInBytes:o,normalize:!1}),r}(e,t,r,n):Sl(e,t,r,n),r=Rl(e,t,r=Ol(e,t,r,n),n),r=(i&vl)===vl?function(e,t,r,n){n.texCoordCompressConstant=[],n.minTexCoordValue=[];var i=t.getUint16(r,!0);r+=Uint16Array.BYTES_PER_ELEMENT,r+=Uint16Array.BYTES_PER_ELEMENT;for(var o=0;o<i;o++){var a=t.getUint8(r,!0);r+=Uint8Array.BYTES_PER_ELEMENT,r+=3*Uint8Array.BYTES_PER_ELEMENT;var s=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var l=t.getUint16(r,!0);r+=Uint16Array.BYTES_PER_ELEMENT;t.getUint16(r,!0);r+=Uint16Array.BYTES_PER_ELEMENT;var c=t.getFloat32(r,!0);r+=Float32Array.BYTES_PER_ELEMENT,n.texCoordCompressConstant.push(c);var u={};u.x=t.getFloat32(r,!0),r+=Float32Array.BYTES_PER_ELEMENT,u.y=t.getFloat32(r,!0),r+=Float32Array.BYTES_PER_ELEMENT,u.z=t.getFloat32(r,!0),r+=Float32Array.BYTES_PER_ELEMENT,u.w=t.getFloat32(r,!0),r+=Float32Array.BYTES_PER_ELEMENT,n.minTexCoordValue.push(u);var f=s*l*Int16Array.BYTES_PER_ELEMENT,h=new Uint8Array(e,r,f),d=(r+=f)%4;0!==d&&(r+=4-d);var p="aTexCoord"+o,y=n.vertexAttributes,m=n.attrLocation;if(m[p]=y.length,y.push({index:m[p],typedArray:h,componentsPerAttribute:l,componentDatatype:5122,offsetInBytes:0,strideInBytes:l*Int16Array.BYTES_PER_ELEMENT,normalize:!1}),a){f=s*Float32Array.BYTES_PER_ELEMENT;var v=new Uint8Array(e,r,f);r+=f,n.texCoordZMatrix=!0,m[p="aTexCoordZ"+o]=y.length,y.push({index:m[p],typedArray:v,componentsPerAttribute:1,componentDatatype:5126,offsetInBytes:0,strideInBytes:Float32Array.BYTES_PER_ELEMENT,normalize:!1})}}return r}(e,t,r,n):Ll(e,t,r,n),(i&gl)===gl&&(n.textureCoordIsW=!0),r=kl(e,t,r,n)}function Vl(e,t,r,n,i){var o=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;for(var a=0;a<o;a++){var s={};if(3===i){t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT}var l=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var c=t.getUint8(r,!0);r+=Uint8Array.BYTES_PER_ELEMENT;t.getUint8(r,!0);r+=Uint8Array.BYTES_PER_ELEMENT;var u=t.getUint8(r,!0);if(r+=Uint8Array.BYTES_PER_ELEMENT,r+=Uint8Array.BYTES_PER_ELEMENT,l>0){var f=null,h=void 0;1===c||3===c?(h=l*Uint32Array.BYTES_PER_ELEMENT,f=new Uint8Array(e,r,h)):(h=l*Uint16Array.BYTES_PER_ELEMENT,f=new Uint8Array(e,r,h),l%2!=0&&(h+=2)),s.indicesTypedArray=f,r+=h}s.indicesCount=l,s.indexType=c,s.primitiveType=u;var d=[],p=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;for(var y=0;y<p;y++){var m=Ml(e,t,r),v=m.string;r=m.bytesOffset,d.push(v),s.materialCode=v}if(0!==r%4)r+=4-r%4;n.push(s)}return r}var Wl={red:0,green:0,blue:0,alpha:0};function jl(e,t,r){var n=e.vertexAttributes,i=e.attrLocation,o=n.length;i[1===r?"instanceId":"batchId"]=o,n.push({index:o,typedArray:t,componentsPerAttribute:1,componentDatatype:5126,offsetInBytes:0,strideInBytes:0,instanceDivisor:r})}ol.parseBuffer=function(e){var t=0,r={version:void 0,groupNode:void 0,geoPackage:{},matrials:void 0,texturePackage:{}},n=new DataView(e);if(r.version=n.getFloat32(t,!0),t+=Float32Array.BYTES_PER_ELEMENT,r.version>=2){n.getUint32(t,!0);t+=Uint32Array.BYTES_PER_ELEMENT}r.version>=3&&(n.getUint32(t,!0),t+=Uint32Array.BYTES_PER_ELEMENT);n.getUint32(t,!0);var i=function(e,t){var r=new Uint8Array(e,t);return $s.inflate(r).buffer}(e,t+=Uint32Array.BYTES_PER_ELEMENT);t=0;var o=(n=new DataView(i)).getUint32(t,!0);return t=function(e,t,r,n){var i={},o=[];t.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT;var a=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;for(var s=0;s<a;s++)r=Il(e,t,r,o,n.version);i.pageLods=o;var l=r%4;return 0!==l&&(r+=4-l),n.groupNode=i,r}(i,n,t+=Uint32Array.BYTES_PER_ELEMENT,r),t=function(e,t,r,n,i){t.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT;var o=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;for(var a=0;a<o;a++){if(3===i){t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT}var s=Ml(e,t,r),l=s.string;r=s.bytesOffset;var c=s.length%4;0!==c&&(r+=4-c);var u=t.getUint32(r,!0);if(r+=Int32Array.BYTES_PER_ELEMENT,3===i)switch(u){case cl:u=al;break;case ul:u=ll;break;case fl:u=sl}var f={vertexAttributes:[],attrLocation:{},instanceCount:0,instanceMode:0,instanceIndex:-1};u===al?r=Fl(e,t,r,f,i):u===sl&&3===i?r=Nl(e,t,r,f):u===sl&&(r=Ul(e,t,r,f));var h=[];r=u===sl&&3===i?zl(e,t,r,h):Vl(e,t,r,h,i);var d=void 0;if(2===h.length&&13===h[1].primitiveType&&h[1].indicesCount>=3&&(d=S3MEdgeProcessor.createEdgeDataByIndices(f,h[1])),n[l]={vertexPackage:f,arrIndexPackage:h,edgeGeometry:d},3===i){var p={};p.x=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,p.y=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,p.z=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT;var y={};y.x=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,y.y=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,y.z=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT;var m={};m.x=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,m.y=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,m.z=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT;var v={};v.x=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,v.y=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,v.z=t.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT}}return 3!==i&&(r+=t.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT),r}(i,n,t,r.geoPackage,r.version),t=function(e,t,r,n){t.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT;var i=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;for(var o=0;o<i;o++){var a=Ml(e,t,r),s=a.string;r=a.bytesOffset;var l=a.length%4;0!==l&&(r+=4-l);t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var c=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var u=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var f=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var h=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var d=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var p=new Uint8Array(e,r,h);r+=h;var y=d===dl||d===pl?33776:33779;if(22===f&&(y=36196),!ol.s3tc&&(33776===y||33779===y)){var m=new Uint8Array(c*u*4);nl.decode(m,c,u,p,d),p=m,f=0,y=d===dl||d===dl?273:4369}n[s]={id:s,width:c,height:u,compressType:f,nFormat:d,internalFormat:y,arrayBufferView:p}}return r}(i,n,t,r.texturePackage),t=function(e,t,r,n){var i=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var o=Pl(new Uint8Array(e,r,i));return r+=i,n.materials=JSON.parse(o),r}(i,n,t,r),function(e,t,r,n,i,o){if(3===o&&(n=t.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT),1==(1&n)){t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var a=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;for(var s=0;s<a;s++){var l=Ml(e,t,r),c=l.string;r=l.bytesOffset;var u=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var f={};if(i[c].pickInfo=f,-1==i[c].vertexPackage.instanceIndex){for(var h=new Float32Array(i[c].vertexPackage.verticesCount),d=0;d<u;d++){var p=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var y=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;for(var m=[],v=0;v<y;v++){var g=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var _=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT,h.fill(d,g,g+_),m.push({vertexColorOffset:g,vertexColorCount:_,batchId:d})}f[p]=m}jl(i[c].vertexPackage,h,void 0)}else{for(var C=i[c].vertexPackage.instanceCount,E=i[c].vertexPackage.instanceBuffer,x=i[c].vertexPackage.instanceMode,B=new Float32Array(C),T=[],b=0;b<u;b++){var P=t.getUint32(r,!0);T.push(P),r+=Uint32Array.BYTES_PER_ELEMENT;var M=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;for(var w=0;w<M;w++){t.getUint32(r,!0);if(r+=Uint32Array.BYTES_PER_ELEMENT,3===o){t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT}}}var I=17===x?16:28;I*=Float32Array.BYTES_PER_ELEMENT;for(var D=0;D<C;D++){B[D]=D;var S=D*x*Float32Array.BYTES_PER_ELEMENT+I;A.Color.unpack(E,S,Wl);var O=2===o?T[D]:Wl.red+256*Wl.green+65536*Wl.blue;void 0===f[O]&&(f[O]={vertexColorCount:1,instanceIds:[],vertexColorOffset:D}),f[O].instanceIds.push(D)}jl(i[c].vertexPackage,B,1)}}}}(i,n,t,o,r.geoPackage,r.version),r};var Hl=ol;function Zl(e,t,r){var n=e._gl;this.contextId=e.id,this.textureId=t,this.layerId=r.layerId,this.rootName=r.rootName,this.context=e,this.width=r.width,this.height=r.height,this.compressType=r.compressType,this.internalFormat=r.internalFormat,this.pixelFormat=r.pixelFormat,this.arrayBufferView=r.arrayBufferView,this.wrapS=A.defaultValue(r.wrapS,A.TextureWrap.CLAMP_TO_EDGE),this.wrapT=A.defaultValue(r.wrapT,A.TextureWrap.CLAMP_TO_EDGE),this._target=n.TEXTURE_2D,this._texture=void 0,this.refCount=1,this.arrayBufferView&&this.init()}Zl.prototype.init=function(){var e=this.context._gl;this._texture||(this._texture=e.createTexture()),e.bindTexture(e.TEXTURE_2D,this._texture);var t=this.internalFormat;6410!==t&&4369!==t||e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0);var r=0,n=0,i=this.width,o=this.height,a=function(e,t,r,n){var i=e.length,o=r,a=n,s=0;for(;;){var l=A.PixelFormat.compressedTextureSizeInBytes(t,o,a);if(s+=l,a>>=1,0===(o>>=1)&&0===a)break;o=Math.max(o,1),a=Math.max(a,1)}return s===i}(this.arrayBufferView,t,i,o);do{var s=A.PixelFormat.compressedTextureSizeInBytes(t,i,o),l=new Uint8Array(this.arrayBufferView.buffer,this.arrayBufferView.byteOffset+n,s);4369===t?e.texImage2D(e.TEXTURE_2D,r++,e.RGBA,i,o,0,e.RGBA,e.UNSIGNED_BYTE,l):e.compressedTexImage2D(e.TEXTURE_2D,r++,t,i,o,0,l),i=Math.max(i>>1,1),o=Math.max(o>>1,1),n+=s}while(n<this.arrayBufferView.byteLength&&a);r>1?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,this.wrapS),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,this.wrapT),e.texParameteri(this._target,this.context._textureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,1),e.bindTexture(e.TEXTURE_2D,null),this.arrayBufferView=void 0,this.ready=!0},Zl.prototype.isDestroyed=function(){return!1},Zl.prototype.destroy=function(){this.context._gl.deleteTexture(this._texture),this._texture=null,this.id=0,A.destroyObject(this)};var Yl=Zl;function Jl(){this.ambientColor=new A.Color,this.diffuseColor=new A.Color,this.specularColor=new A.Color(0,0,0,0),this.shininess=50,this.bTransparentSorting=!1,this.texMatrix=A.Matrix4.clone(A.Matrix4.IDENTITY,new A.Matrix4),this.textures=[]}Jl.prototype.isDestroyed=function(){return!1},Jl.prototype.destroy=function(){for(var e=this.textures.length,t=0;t<e;t++){this.textures[t].destroy()}return this.textures.length=0,this.ambientColor=void 0,this.diffuseColor=void 0,this.specularColor=void 0,A.destroyObject(this)};var Kl=Jl;function Xl(){this.context=void 0,this.model=void 0,this.index=void 0}Xl.prototype.set=function(e,t,r){this.context=e,this.model=t,this.index=r},Xl.prototype.execute=function(){var e=this.context,t=this.index,r=this.model.vertexPackage,n=r.vertexAttributes[t];if(!A.defined(n))throw new A.DeveloperError("attribute is null");if(-1!==r.instanceIndex&&!A.defined(this.model.instanceBuffer)){if(!A.defined(r.instanceBuffer))throw new A.DeveloperError("instance buffer is null");this.model.instanceBuffer=A.Buffer.createVertexBuffer({context:e,typedArray:r.instanceBuffer,usage:A.BufferUsage.STATIC_DRAW})}1!==n.instanceDivisor||A.defined(n.typedArray)?A.defined(n.vertexBuffer)||(n.vertexBuffer=A.Buffer.createVertexBuffer({context:e,typedArray:n.typedArray,usage:A.BufferUsage.STATIC_DRAW}),n.typedArray=null,delete n.typedArray):n.vertexBuffer=this.model.instanceBuffer};var Ql=Xl;function ql(){this.model=void 0,this.context=void 0,this.index=0}ql.prototype.set=function(e,t,r){this.model=t,this.context=e,this.index=r},ql.prototype.execute=function(){var e=this.context,t=this.model.arrIndexPackage[this.index],r=this.model.vertexPackage.verticesCount;if(!A.defined(t))throw new A.DeveloperError("index package is null");if(!A.defined(t.indexBuffer)){if(!A.defined(t.indicesTypedArray))throw new A.DeveloperError("index buffer is null");var n=A.IndexDatatype.UNSIGNED_SHORT;(1===t.indexType||r>=A.Math.SIXTY_FOUR_KILOBYTES)&&e.elementIndexUint&&(n=A.IndexDatatype.UNSIGNED_INT),A.defined(t.indexBuffer)||(t.indexBuffer=A.Buffer.createIndexBuffer({context:e,typedArray:t.indicesTypedArray,usage:A.BufferUsage.STATIC_DRAW,indexDatatype:n})),t.indicesTypedArray=null,delete t.indicesTypedArray}};var $l=ql,ec=Object.freeze({VertexNormal:"VertexNormal",VertexColor:"VertexColor",TexCoord:"TexCoord",TexCoord2:"TexCoord2",Instance:"Instance",COMPRESS_VERTEX:"COMPRESS_VERTEX",COMPRESS_NORMAL:"COMPRESS_NORMAL",COMPRESS_COLOR:"COMPRESS_COLOR",COMPRESS_TEXCOORD:"COMPRESS_TEXCOORD",UseLineColor:"USE_LINECOLOR",InstanceBim:"InstanceBim",InstancePipe:"InstancePipe",COMPUTE_TEXCOORD:"COMPUTE_TEXCOORD"}),tc=Object.freeze({SVC_Vertex:1,SVC_Normal:2,SVC_VertexColor:4,SVC_SecondColor:8,SVC_TexutreCoord:16,SVC_TexutreCoordIsW:32}),rc=Object.freeze({BIM:17,PIPELINE:29});function nc(){this.model=void 0,this.context=void 0}nc.prototype.set=function(e,t){this.model=t,this.context=e},nc.prototype.execute=function(){var e=this.context,t=this.model,r=t.layer,n=t.vs,i=t.fs,o=t.attributeLocations,a=t.material,s=t.vertexPackage,l=t.batchTable?t.batchTable.getVertexShaderCallback()(n):n;void 0===e.texturelod&&(e.texturelod=A.defaultValue(function(e,t){for(var r=t.length,n=0;n<r;++n){var i=e.getExtension(t[n]);if(i)return i}}(e._gl,["EXT_shader_texture_lod"]),!1));var c=new A.ShaderSource({sources:[l]}),u=new A.ShaderSource({sources:[i]});if(A.defined(o.aNormal)&&(c.defines.push(ec.VertexNormal),u.defines.push(ec.VertexNormal)),A.defined(o.aColor)&&c.defines.push(ec.VertexColor),a&&a.textures.length>0&&(c.defines.push(ec.COMPUTE_TEXCOORD),u.defines.push(ec.COMPUTE_TEXCOORD)),a&&2===a.textures.length&&(c.defines.push(ec.TexCoord2),u.defines.push(ec.TexCoord2)),A.defined(o.aTexCoord0)&&(c.defines.push("TexCoord"),u.defines.push("TexCoord")),s.instanceIndex>-1&&c.defines.push(ec.Instance),s.instanceMode===rc.BIM&&c.defines.push(ec.InstanceBim),s.instanceMode===rc.PIPELINE&&c.defines.push(ec.InstancePipe),A.defined(s.compressOptions)){var f=s.compressOptions;(f&tc.SVC_Vertex)===tc.SVC_Vertex&&c.defines.push(ec.COMPRESS_VERTEX),(f&tc.SVC_Normal)===tc.SVC_Normal&&c.defines.push(ec.COMPRESS_NORMAL),(f&tc.SVC_VertexColor)===tc.SVC_VertexColor&&c.defines.push(ec.COMPRESS_COLOR),(f&tc.SVC_TexutreCoord)===tc.SVC_TexutreCoord&&c.defines.push(ec.COMPRESS_TEXCOORD)}A.defined(t.arrIndexPackage)&&t.arrIndexPackage.length>0&&2===t.arrIndexPackage[0].primitiveType&&u.defines.push(ec.UseLineColor),A.defined(s.customVertexAttribute)&&A.defined(s.customVertexAttribute.TextureCoordMatrix)&&c.defines.push("USE_TextureCoordMatrix"),A.defined(s.customVertexAttribute)&&A.defined(s.customVertexAttribute.VertexWeight)&&c.defines.push("USE_VertexWeight"),"MESHOPT"===r._vertexCompressionType&&c.defines.push("MeshOPT_Compress"),t.shaderProgram=A.ShaderProgram.fromCache({context:e,vertexShaderSource:c,fragmentShaderSource:u,attributeLocations:o})};var ic=nc;function oc(e){var t,r;for(this.layer=e.layer,this.vertexPackage=e.vertexPackage,this.arrIndexPackage=e.arrIndexPackage,this.vertexBufferToCreate=new A.Queue,this.indexBufferToCreate=new A.Queue,this.shaderProgramToCreate=new A.Queue,t=0,r=this.vertexPackage.vertexAttributes.length;t<r;t++)this.vertexBufferToCreate.enqueue(t);for(t=0,r=this.arrIndexPackage.length;t<r;t++)this.indexBufferToCreate.enqueue(t);this.shaderProgramToCreate.enqueue(0),this.boundingVolume=e.boundingVolume,this.material=A.defaultValue(e.material,new Kl),this.geoName=e.geoName,this.modelMatrix=e.modelMatrix,this.geoMatrix=e.geoMatrix,this.invGeoMatrix=A.Matrix4.inverse(this.geoMatrix,new A.Matrix4),this.instanceCount=e.vertexPackage.instanceCount,this.attributeLocations=e.vertexPackage.attrLocation,this.shaderProgram=void 0,this.vertexArray=void 0,this.colorCommand=void 0,this.pickInfo=A.defaultValue(e.pickInfo,{}),this.selectionInfoMap=new A.AssociativeArray,this.batchTable=void 0,this.batchTableDirty=!1,this.idsOperationMap=new A.AssociativeArray,this.pickColorIdentifier="vSecondColor",this.createBoundingBoxForInstance(),this.ready=!1}var ac=new Ql,sc=new $l,lc=new ic;oc.prototype.createBuffers=function(e){!function(e,t){for(var r=e.layer.context,n=e.vertexBufferToCreate;n.length;){var i=n.peek();if(ac.set(r,e,i),!t.jobScheduler.execute(ac,A.JobType.BUFFER))break;n.dequeue()}}(this,e),function(e,t){for(var r=e.layer.context,n=e.indexBufferToCreate;n.length;){var i=n.peek();if(sc.set(r,e,i),!t.jobScheduler.execute(sc,A.JobType.BUFFER))break;n.dequeue()}}(this,e)},oc.prototype.createShaderProgram=function(e){!function(e,t){for(var r=e.layer.context,n=e.shaderProgramToCreate;n.length;){n.peek();if(lc.set(r,e),!t.jobScheduler.execute(lc,A.JobType.PROGRAM))break;n.dequeue()}}(this,e)},oc.prototype.createBatchTable=function(e){!function(e,t){if(!A.defined(e.batchTable)&&e.pickInfo){var r=e.layer.context,n=[];n.push({functionName:"batchTable_operation",componentDatatype:A.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:4},{functionName:"batchTable_pickColor",componentDatatype:A.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:4,normalize:!0});var i=e.pickInfo,o=Object.keys(i),a=e.instanceCount>0?e.instanceCount:o.length;e.batchTable=new A.BatchTable(r,n,a)}}(this)};var cc=new A.Cartesian3;oc.prototype.createBoundingBoxForInstance=function(){var e=this.vertexPackage;if(A.defined(e)&&-1!==e.instanceIndex&&A.defined(e.instanceBounds)){var t=e.instanceBounds,r=new A.Cartesian3(t[0],t[1],t[2]),n=new A.Cartesian3(t[3],t[4],t[5]),i=A.Cartesian3.lerp(r,n,.5,cc),o=A.Cartesian3.distance(i,r),a=new A.Cartesian3;A.Matrix4.multiplyByPoint(this.modelMatrix,i,a),this.boundingVolume.center=a,this.boundingVolume.radius=o,e.instanceBounds=void 0}},oc.prototype.initLayerSetting=function(e){Object.keys(e._objsOperationList).length>0&&this.updateObjsOperation(e._objsOperationList)};var uc=new A.Cartesian4;oc.prototype.createPickIds=function(){var e=this.layer,t=e.context,r=this.pickInfo;if(A.defined(r)){for(var n in r)r.hasOwnProperty(n)&&this.selectionInfoMap.set(n,r[n]);var i=this.batchTable,o=this.selectionInfoMap,a=o._hash;for(var s in a)if(a.hasOwnProperty(s)){var l=o.get(s),c=void 0;A.defined(c)||(c=t.createPickId({primitive:e,id:s}));var u=c.color;uc.x=A.Color.floatToByte(u.red),uc.y=A.Color.floatToByte(u.green),uc.z=A.Color.floatToByte(u.blue),uc.w=A.Color.floatToByte(u.alpha);var f=l.instanceIds;if(this.instanceCount>0)f.map((function(e){i.setBatchedAttribute(e,1,uc)}));else{var h=l[0].batchId;i.setBatchedAttribute(h,1,uc)}}this.pickInfo=void 0}},oc.prototype.updateBatchTableAttributes=function(){for(var e=this,t=this,r=this.idsOperationMap,n=function(n,i){var o=r.values[n];if(!o.dirty)return"continue";o.dirty=!1,e.instanceCount>0?Array.isArray(o.instanceIds)&&o.instanceIds.map((function(e){t.batchTable.setBatchedAttribute(e,0,o.operationValue)})):A.defined(o.batchId)&&e.batchTable.setBatchedAttribute(o.batchId,0,o.operationValue)},i=0,o=r.length;i<o;i++)n(i)},oc.prototype.updateObjsOperation=function(e){if(this.ready&&!(this.selectionInfoMap.length<1)){var t=this.selectionInfoMap._hash;for(var r in t)if(t.hasOwnProperty(r)){var n=e[r];if(A.defined(n)){var i=t[r][0],o=i.batchId,a=i.instanceIds,s=this.idsOperationMap.get(r);A.defined(s)||(s={batchId:o,instanceIds:a,operationValue:new A.Cartesian4,dirty:!0}),s.dirty=!0,s.operationValue.x=1&s.operationValue.x|n,this.idsOperationMap.set(r,s),this.batchTableDirty=!0}}}},oc.prototype.createCommand=A.DeveloperError.throwInstantiationError,oc.prototype.update=A.DeveloperError.throwInstantiationError,oc.prototype.isDestroyed=A.DeveloperError.throwInstantiationError,oc.prototype.destroy=A.DeveloperError.throwInstantiationError;var fc=oc;function hc(e){fc.call(this,e),this.vs="\n    attribute vec4 aPosition;\n#ifdef VertexColor\n    attribute vec4 aColor;\n#endif\n#ifdef VertexNormal\n    attribute vec3 aNormal;\n#endif\n#ifdef Instance\n    attribute float instanceId;\n#else\n    attribute float batchId;\n#endif \n\n#ifdef USE_VertexWeight\n    attribute float aVertexWeight;\n#endif\n\n#ifdef USE_TextureCoordMatrix\n    attribute vec2 aTextureCoordMatrix;\n#endif\n\n#ifdef TexCoord\n    attribute vec4 aTexCoord0;\n    varying vec4 vTexCoord;\n    uniform mat4 uTexMatrix;\n#ifdef COMPUTE_TEXCOORD\n    uniform float uTexture0Width;\n    varying vec4 vTexMatrix;\n    varying vec4 vTexCoordTransform;\n    varying vec2 vIsRGBA;\n#endif\n#endif\n\n#ifdef TexCoord2\n    attribute vec4 aTexCoord1;\n    uniform float uTexture1Width;\n    varying vec4 vTexMatrix2;\n#endif\n#ifdef InstanceBim\n    attribute vec4 uv2;\n    attribute vec4 uv3;\n    attribute vec4 uv4;\n    attribute vec4 secondary_colour;\n    attribute vec4 uv6;   \n#endif\n\n#ifdef InstancePipe\n    attribute vec4 uv1;\n    attribute vec4 uv2;\n    attribute vec4 uv3;\n    attribute vec4 uv4;\n    attribute vec4 uv5;\n    attribute vec4 uv6;\n    attribute vec4 uv7;\n    attribute vec4 secondary_colour;\n    attribute vec4 uv9;\n#endif\n    uniform vec4 uFillForeColor;\n    uniform vec4 uSelectedColor;\n    varying vec4 vSecondColor;\n    varying vec4 vPositionMC;\n    varying vec3 vPositionEC;\n#ifdef VertexNormal\n    varying vec3 vNormalEC;\n#endif\n    varying vec4 vColor;\n    \n    const float SHIFT_LEFT8 = 256.0;\n    const float SHIFT_RIGHT8 = 1.0 / 256.0;\n    const float SHIFT_RIGHT4 = 1.0 / 16.0;\n    const float SHIFT_LEFT4 = 16.0;\n    void getTextureMatrixFromZValue(in float nZ, inout float XTran, inout float YTran, inout float scale, inout float isRGBA)\n    {\n        if(nZ <= 0.0)\n        {\n            return;\n        }\n        float nDel8 = floor(nZ * SHIFT_RIGHT8);\n        float nDel16 = floor(nDel8 * SHIFT_RIGHT8);\n        float nDel20 = floor(nDel16 * SHIFT_RIGHT4);\n        isRGBA = floor(nDel20);\n        YTran = nZ - nDel8 * SHIFT_LEFT8;\n        XTran = nDel8 - nDel16 * SHIFT_LEFT8;\n        float nLevel = nDel16 - nDel20 * SHIFT_LEFT4;\n        scale = 1.0 / pow(2.0, nLevel);\n    }\n    \n    void operation(vec4 operationType, vec4 color, vec4 selectedColor, inout vec4 vertexColor)\n    {\n        float right_2 = operationType.x * 0.5;\n        float right_4 = right_2 * 0.5;\n        float right_8 = right_4 * 0.5;\n        float right_16 = right_8 * 0.5;\n        float isSetColor = fract(right_2);\n        if(isSetColor > 0.1)\n        {\n            vertexColor *= color;\n        }\n        float isPicked = fract(floor(right_2)* 0.5);\n        if(isPicked > 0.1)\n        {\n            vertexColor *= selectedColor;\n        }\n        float isHide = fract(floor(right_4)* 0.5);\n        if(isHide > 0.1)\n        {\n            vertexColor.a = 0.0;\n        }\n    }\n    \n#ifdef COMPRESS_TEXCOORD\n#ifdef TexCoord\n    uniform vec2 decode_texCoord0_min;\n#endif\n#ifdef TexCoord2\n    uniform vec2 decode_texCoord1_min;\n#endif\n#ifdef MeshOPT_Compress\n    uniform vec3 decode_texCoord0_vNormConstant;\n    uniform vec3 decode_texCoord1_vNormConstant;\n#else\n    uniform float decode_texCoord0_normConstant;\n    uniform float decode_texCoord1_normConstant;\n#endif\n#endif\n\n#ifdef COMPRESS_VERTEX\n    uniform vec4 decode_position_min;\n    uniform float decode_position_normConstant;\n#endif\n\n#ifdef COMPRESS_NORMAL\n    uniform float normal_rangeConstant;\n#endif\n    void main()\n    {\n    #ifdef COMPRESS_VERTEX\n        vec4 vertexPos = vec4(1.0);\n        vertexPos = decode_position_min + vec4(aPosition.xyz, 1.0) * decode_position_normConstant;\n    #else\n        vec4 vertexPos = aPosition;\n    #endif\n    #ifdef TexCoord\n    \n    #ifdef COMPRESS_TEXCOORD\n    #ifdef MeshOPT_Compress\n        vec2 texCoord0;\n        texCoord0.x = aTexCoord0.x * decode_texCoord0_vNormConstant.x;\n        texCoord0.y = aTexCoord0.y * decode_texCoord0_vNormConstant.y;\n        vTexCoord.xy = decode_texCoord0_min + texCoord0.xy;\n    #else\n        vTexCoord.xy = decode_texCoord0_min.xy + aTexCoord0.xy * decode_texCoord0_normConstant;\n    #endif\n    #else\n        vTexCoord.xy = aTexCoord0.xy;\n    #endif\n    \n    #ifdef COMPUTE_TEXCOORD\n        vTexMatrix = vec4(0.0,0.0,1.0,0.0);\n        vIsRGBA.x = 0.0;\n        vTexCoordTransform.x = aTexCoord0.z;\n    #ifdef USE_TextureCoordMatrix\n        vTexCoordTransform.x = aTextureCoordMatrix.x;\n    #endif\n        if(vTexCoordTransform.x < -90000.0)\n        {\n            vTexMatrix.z = -1.0;\n        }\n        getTextureMatrixFromZValue(floor(vTexCoordTransform.x), vTexMatrix.x, vTexMatrix.y, vTexMatrix.z, vIsRGBA.x);\n        vTexMatrix.w = log2(uTexture0Width * vTexMatrix.z);\n    #endif\n    #endif\n    \n    #ifdef TexCoord2\n    \n    #ifdef COMPRESS_TEXCOORD\n    #ifdef MeshOPT_Compress\n        vec2 texCoord1;\n        texCoord1.x = aTexCoord1.x * decode_texCoord1_vNormConstant.x;\n        texCoord1.y = aTexCoord1.y * decode_texCoord1_vNormConstant.y;\n        vTexCoord.zw = decode_texCoord1_min + texCoord1.xy;\n    #else\n        vTexCoord.zw = decode_texCoord1_min.xy + aTexCoord1.xy * decode_texCoord1_normConstant;\n    #endif\n    #else\n        vTexCoord.zw = aTexCoord1.xy;\n    #endif\n    \n        vTexMatrix2 = vec4(0.0,0.0,1.0,0.0);\n        vIsRGBA.y = 0.0;\n        vTexCoordTransform.y = aTexCoord1.z;\n    #ifdef USE_TextureCoordMatrix\n        vTexCoordTransform.y = aTextureCoordMatrix.y;\n    #endif\n        if(vTexCoordTransform.y < -90000.0)\n        {\n            vTexMatrix2.z = -1.0;\n        }\n        getTextureMatrixFromZValue(floor(vTexCoordTransform.y), vTexMatrix2.x, vTexMatrix2.y, vTexMatrix2.z, vIsRGBA.y);\n        vTexMatrix2.w = log2(uTexture1Width * vTexMatrix.z);\n    #endif\n    \n        vec4 vertexColor = uFillForeColor;\n    #ifdef VertexColor\n        vertexColor *= aColor;\n    #endif\n    #ifdef VertexNormal\n        vec3 normal = aNormal;\n    #ifdef COMPRESS_NORMAL\n    #ifdef MeshOPT_Compress\n        normal.x = aNormal.x / 127.0;\n        normal.y = aNormal.y / 127.0;\n        normal.z = 1.0 - abs(normal.x) - abs(normal.y);\n        normal = normalize(normal);\n    #else\n        normal = czm_octDecode(aNormal.xy, normal_rangeConstant).zxy;\n    #endif\n    #endif\n    #endif\n    #ifdef InstanceBim\n        mat4 worldMatrix;\n        worldMatrix[0] = uv2;\n        worldMatrix[1] = uv3;\n        worldMatrix[2] = uv4;\n        worldMatrix[3] = vec4(0, 0, 0, 1);\n        vertexPos = vec4(vertexPos.xyz,1.0) * worldMatrix;\n        vertexColor *= secondary_colour; \n    #endif\n    #ifdef InstancePipe\n        mat4 worldMatrix;\n        mat4 worldMatrix0;\n        mat4 worldMatrix1;\n        vec4 worldPos0;\n        vec4 worldPos1;\n        worldMatrix0[0] = uv1;\n        worldMatrix0[1] = uv2;\n        worldMatrix0[2] = uv3;\n        worldMatrix0[3] = vec4( 0.0, 0.0, 0.0, 1.0 );\n        worldMatrix1[0] = uv4;\n        worldMatrix1[1] = uv5;\n        worldMatrix1[2] = uv6;\n        worldMatrix1[3] = vec4( 0.0, 0.0, 0.0, 1.0 );\n        vec4 realVertex = vec4(vertexPos.xyz, 1.0);\n        realVertex.x = realVertex.x * uv7.z;\n        worldPos0 = realVertex * worldMatrix0;\n        worldPos1 = realVertex * worldMatrix1;\n        vertexColor *= secondary_colour; \n    #ifdef TexCoord\n        if(aTexCoord0.y > 0.5)\n        {\n            vec4 tex4Vec = uTexMatrix * vec4(uv7.y, aTexCoord0.x, 0.0, 1.0);\n            vTexCoord.xy = tex4Vec.xy;\n            vertexPos = worldPos1;\n            worldMatrix = worldMatrix1;\n        }\n        else\n        {\n            vec4 tex4Vec = uTexMatrix * vec4(uv7.x, aTexCoord0.x, 0.0, 1.0);\n            vTexCoord.xy = tex4Vec.xy;\n            vertexPos = worldPos0;\n            worldMatrix = worldMatrix0;\n        }\n    #endif\n    #ifdef VertexNormal\n        normal.x = normal.x * uv7.z;\n    #endif\n    #endif\n    #ifdef Instance  \n        float index = instanceId;\n    #else\n        float index = batchId;\n    #endif  \n        vec4 operationType = batchTable_operation(index);\n        operation(operationType, vec4(1.0), uSelectedColor, vertexColor);\n        vSecondColor = batchTable_pickColor(index);\n        vec4 positionMC = vec4(vertexPos.xyz, 1.0);\n        vColor = vertexColor;\n    #ifdef VertexNormal\n        vNormalEC = czm_normal * normal;\n    #endif\n        vPositionMC = positionMC;\n        vPositionEC = (czm_modelView * positionMC).xyz;\n        gl_Position = czm_modelViewProjection * vec4(vertexPos.xyz, 1.0);\n    }\n",this.fs="\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n#endif\n    uniform vec4 uDiffuseColor;\n#ifdef TexCoord\n    varying vec4 vTexCoord;\n#ifdef COMPUTE_TEXCOORD\n    uniform sampler2D uTexture;\n    uniform float uTexture0Width;\n    varying vec4 vTexCoordTransform;\n    varying vec4 vTexMatrix;\n    varying vec2 vIsRGBA;\n#endif\n#endif\n\n    varying vec4 vColor;\n    varying vec4 vSecondColor;\n    varying vec4 vPositionMC;\n    varying vec3 vPositionEC;\n#ifdef VertexNormal\n    varying vec3 vNormalEC;\n#endif\n#ifdef TexCoord2\n    uniform sampler2D uTexture2;\n    uniform float uTexture1Width;\n    varying vec4 vTexMatrix2;\n#endif\n#ifdef COMPUTE_TEXCOORD\n    void calculateMipLevel(in vec2 inTexCoord, in float vecTile, in float fMaxMip, inout float mipLevel)\n    {\n        vec2 dx = dFdx(inTexCoord * vecTile);\n        vec2 dy = dFdy(inTexCoord * vecTile);\n        float dotX = dot(dx, dx);\n        float dotY = dot(dy, dy);\n        float dMax = max(dotX, dotY);\n        float dMin = min(dotX, dotY);\n        float offset = (dMax - dMin) / (dMax + dMin);\n        offset = clamp(offset, 0.0, 1.0);\n        float d = dMax * (1.0 - offset) + dMin * offset;\n        mipLevel = 0.5 * log2(d);\n        mipLevel = clamp(mipLevel, 0.0, fMaxMip - 1.62);\n    }\n    \n    void calculateTexCoord(in vec3 inTexCoord, in float scale, in float XTran, in float YTran, in float fTile, in float mipLevel, inout vec2 outTexCoord)\n    {\n        if(inTexCoord.z < -9000.0)\n        {\n            outTexCoord = inTexCoord.xy;\n        }\n        else\n        {\n            vec2 fTexCoord = fract(inTexCoord.xy);\n            float offset = 1.0 * pow(2.0, mipLevel) / fTile;\n            fTexCoord = clamp(fTexCoord, offset, 1.0 - offset);\n            outTexCoord.x = (fTexCoord.x + XTran) * scale;\n            outTexCoord.y = (fTexCoord.y + YTran) * scale;\n        }\n    }\n    \n    vec4 getTexColorForS3M(sampler2D curTexture, vec3 oriTexCoord, float texTileWidth, float fMaxMipLev, float fTexCoordScale, vec2 vecTexCoordTranslate, float isRGBA)\n    {\n        vec4 color = vec4(1.0);\n        float mipLevel = 0.0;\n    #ifdef GL_OES_standard_derivatives\n        calculateMipLevel(oriTexCoord.xy, texTileWidth, fMaxMipLev, mipLevel);\n    #endif\n        vec2 realTexCoord;\n        calculateTexCoord(oriTexCoord, fTexCoordScale, vecTexCoordTranslate.x, vecTexCoordTranslate.y, texTileWidth, mipLevel, realTexCoord);\n        if(isRGBA > 0.5)\n        {\n            vec2 rgbTexCoord;\n            rgbTexCoord.x = (realTexCoord.x + vecTexCoordTranslate.x * fTexCoordScale) * 0.5;\n            rgbTexCoord.y = (realTexCoord.y + vecTexCoordTranslate.y * fTexCoordScale) * 0.5;\n            color = texture2D(curTexture, rgbTexCoord.xy, -10.0);\n            vec2 vecAlphaTexCoord;\n            vecAlphaTexCoord.x = rgbTexCoord.x;\n            vecAlphaTexCoord.y = rgbTexCoord.y + fTexCoordScale * 0.5;\n            color.a = texture2D(curTexture, vecAlphaTexCoord.xy, -10.0).r;\n        }\n        else\n        {\n            if(oriTexCoord.z < -9000.0)\n            {\n                color = texture2D(curTexture, realTexCoord.xy);\n            }\n            else\n            {\n                #ifdef GL_EXT_shader_texture_lod\n                    color = texture2DLodEXT(curTexture, realTexCoord.xy, mipLevel);\n                #else\n                    color = texture2D(curTexture, realTexCoord.xy, mipLevel);\n                #endif\n            }\n        }\n        \n        return color;\n    }\n    \n    vec4 getTextureColor()\n    {\n        if(vTexMatrix.z < 0.0)\n        {\n            return vec4(1.0);\n        }\n        float texTileWidth0 = vTexMatrix.z * uTexture0Width;\n        vec3 realTexCoord = vec3(vTexCoord.xy, vTexCoordTransform.x);\n        vec4 FColor = getTexColorForS3M(uTexture, realTexCoord, texTileWidth0, vTexMatrix.w, vTexMatrix.z, vTexMatrix.xy, vIsRGBA.x);\n    #ifdef TexCoord2\n        float texTileWidth1 = vTexMatrix2.z * uTexture1Width;\n        realTexCoord = vec3(vTexCoord.zw, vTexCoordTransform.y);\n        vec4 SColor = getTexColorForS3M(uTexture2, realTexCoord, texTileWidth1, vTexMatrix2.w, vTexMatrix2.z, vTexMatrix2.xy, vIsRGBA.y);\n        SColor.r = clamp(SColor.r, 0.0, 1.0);\n        SColor.g = clamp(SColor.g, 0.0, 1.0);\n        SColor.b = clamp(SColor.b, 0.0, 1.0);\n        return FColor * SColor;\n    #else\n        return FColor;\n    #endif\n    }\n#endif\n    vec4 SRGBtoLINEAR4(vec4 srgbIn)\n    {\n    #ifndef HDR \n        vec3 linearOut = pow(srgbIn.rgb, vec3(2.2));\n        return vec4(linearOut, srgbIn.a);\n    #else\n        return srgbIn;\n    #endif\n    }\n    vec3 LINEARtoSRGB(vec3 linearIn)\n    {\n    #ifndef HDR \n        return pow(linearIn, vec3(1.0/2.2));\n    #else\n        return linearIn;\n    #endif\n    }\n    vec3 applyTonemapping(vec3 linearIn) \n    {\n    #ifndef HDR\n        return czm_acesTonemapping(linearIn);\n    #else\n        return linearIn;\n    #endif\n    }\n  \n    vec3 computeNormal(in vec3 oriVertex)\n    {\n        vec3 normal = cross(vec3(dFdx(oriVertex.x), dFdx(oriVertex.y), dFdx(oriVertex.z)), vec3(dFdy(oriVertex.x), dFdy(oriVertex.y), dFdy(oriVertex.z)));\n        normal = normalize(normal);\n        return normal;\n    }\n    \n    void main()\n    {\n        if(vColor.a < 0.1)\n        {\n            discard;\n        } \n        vec4 baseColorWithAlpha = vColor;\n    #ifdef COMPUTE_TEXCOORD\n        baseColorWithAlpha *= SRGBtoLINEAR4(getTextureColor());\n    #endif\n    \n        if(baseColorWithAlpha.a < 0.1)\n        {\n            discard;\n        }\n        vec3 normal = vec3(0.0);\n    #ifdef VertexNormal\n        normal = normalize(vNormalEC);\n    #endif\n        normal = length(normal) > 0.1 ? normal : computeNormal(vPositionMC.xyz);\n        vec3 color = baseColorWithAlpha.rgb;\n        vec3 dirVectorEC = normalize(czm_lightDirectionEC);\n        float dotProduct = dot( normal, dirVectorEC );\n        float dirDiffuseWeight = max( dotProduct, 0.0 );\n        dirDiffuseWeight = dirDiffuseWeight * 0.5 + 0.5;\n        color += color * uDiffuseColor.rgb * dirDiffuseWeight;\n    #ifdef TexCoord\n        color = LINEARtoSRGB(color);\n    #endif\n        gl_FragColor = vec4(color, baseColorWithAlpha.a);\n    }\n",this.useLineColor=!1}hc.prototype=Object.create(fc.prototype),hc.prototype.constructor=fc,hc.prototype.createCommand=function(){if(!A.defined(this.colorCommand)&&0===this.vertexBufferToCreate.length&&0===this.indexBufferToCreate.length&&0===this.shaderProgramToCreate.length){var e=this.layer,t=e.context,r=this.vertexPackage,n=this.arrIndexPackage,i=r.vertexAttributes;if(!(n.length<1)){var o=n[0],a=this.material;this.vertexArray=new A.VertexArray({context:t,attributes:i,indexBuffer:o.indexBuffer});var s=A.PrimitiveType.TRIANGLES;switch(o.primitiveType){case 1:s=A.PrimitiveType.POINTS;break;case 2:s=A.PrimitiveType.LINES;break;case 4:s=A.PrimitiveType.TRIANGLES}this.useLineColor=s===A.PrimitiveType.LINES,this.colorCommand=new A.DrawCommand({primitiveType:s,modelMatrix:this.modelMatrix,boundingVolume:A.BoundingSphere.clone(this.boundingVolume),pickId:this.pickColorIdentifier,vertexArray:this.vertexArray,shaderProgram:this.shaderProgram,pass:a.bTransparentSorting?A.Pass.TRANSLUCENT:A.Pass.OPAQUE,renderState:a.bTransparentSorting?A.RenderState.fromCache({cull:{enabled:!0},depthTest:{enabled:!0,func:A.DepthFunction.LESS_OR_EQUAL},blending:A.BlendingState.ALPHA_BLEND}):A.RenderState.fromCache({cull:{enabled:!1},depthTest:{enabled:!0,func:A.DepthFunction.LESS_OR_EQUAL},blending:A.BlendingState.ALPHA_BLEND}),instanceCount:r.instanceCount});var l=function(e,t,r){var n={uGeoMatrix:function(){return r.geoMatrix},uTexMatrix:function(){return e.texMatrix},uFillForeColor:function(){return r.useLineColor?t.style3D.lineColor:t.style3D.fillForeColor},uInverseGeoMatrix:function(){return r.invGeoMatrix},uTexture:function(){return e.textures[0]},uTexture2:function(){return e.textures[1]},uTexture0Width:function(){return e.textures[0].width},uTexture1Width:function(){return e.textures[1].width},uDiffuseColor:function(){return e.diffuseColor},uSelectedColor:function(){return t._selectedColor}},i=r.vertexPackage,o=i.compressOptions;return(o&tc.SVC_Vertex)===tc.SVC_Vertex&&(n.decode_position_min=function(){return i.minVerticesValue},n.decode_position_normConstant=function(){return i.vertCompressConstant}),(o&tc.SVC_Normal)===tc.SVC_Normal&&(n.normal_rangeConstant=function(){return i.normalRangeConstant}),(o&tc.SVC_TexutreCoord)===tc.SVC_TexutreCoord&&(i.texCoordCompressConstant.length>0&&(n.decode_texCoord0_min=function(){return i.minTexCoordValue[0]},n.decode_texCoord0_normConstant=function(){return i.texCoordCompressConstant[0]},n.decode_texCoord0_vNormConstant=function(){return i.texCoordCompressConstant[0]}),i.texCoordCompressConstant.length>1&&(n.decode_texCoord1_min=function(){return i.minTexCoordValue[1]},n.decode_texCoord1_normConstant=function(){return i.texCoordCompressConstant[1]},n.decode_texCoord1_vNormConstant=function(){return i.texCoordCompressConstant[1]}),i.texCoordCompressConstant.length>2&&(n.decode_texCoord2_min=function(){return i.minTexCoordValue[2]},n.decode_texCoord2_normConstant=function(){return i.texCoordCompressConstant[2]}),i.texCoordCompressConstant.length>3&&(n.decode_texCoord3_min=function(){return i.minTexCoordValue[3]},n.decode_texCoord3_normConstant=function(){return i.texCoordCompressConstant[3]}),i.texCoordCompressConstant.length>4&&(n.decode_texCoord4_min=function(){return i.minTexCoordValue[4]},n.decode_texCoord4_normConstant=function(){return i.texCoordCompressConstant[4]}),i.texCoordCompressConstant.length>5&&(n.decode_texCoord5_min=function(){return i.minTexCoordValue[5]},n.decode_texCoord5_normConstant=function(){return i.texCoordCompressConstant[5]}),i.texCoordCompressConstant.length>6&&(n.decode_texCoord6_min=function(){return i.minTexCoordValue[6]},n.decode_texCoord6_normConstant=function(){return i.texCoordCompressConstant[6]}),i.texCoordCompressConstant.length>7&&(n.decode_texCoord7_min=function(){return i.minTexCoordValue[7]},n.decode_texCoord7_normConstant=function(){return i.texCoordCompressConstant[7]})),n}(a,e,this);this.batchTable&&(l=this.batchTable.getUniformMapCallback()(l)),this.colorCommand.uniformMap=l,this.vertexPackage=void 0,this.arrIndexPackage=void 0,this.vs=void 0,this.fs=void 0,this.ready=!0}}},hc.prototype.update=function(e,t){if(!this.ready)return this.createBatchTable(e),this.createPickIds(),this.createBuffers(e),this.createShaderProgram(e),this.createCommand(e),void this.initLayerSetting(t);this.batchTableDirty&&(this.updateBatchTableAttributes(),this.batchTableDirty=!1),this.batchTable&&this.batchTable.update(e),e.commandList.push(this.colorCommand)},hc.prototype.isDestroyed=function(){return!1},hc.prototype.destroy=function(){return this.shaderProgram=this.shaderProgram&&!this.shaderProgram.isDestroyed()&&this.shaderProgram.destroy(),this.vertexArray=this.vertexArray&&!this.vertexArray.isDestroyed()&&this.vertexArray.destroy(),this.material=this.material&&!this.material.isDestroyed()&&this.material.destroy(),this.batchTable=this.batchTable&&!this.batchTable.isDestroyed()&&this.batchTable.destroy(),this.colorCommand=void 0,this.vertexPackage=null,this.arrIndexPackage=null,this.modelMatrix=void 0,this.pickInfo=void 0,this.selectionInfoMap=void 0,this.vs=void 0,this.fs=void 0,A.destroyObject(this)};var dc=hc;function pc(e){fc.call(this,e),this.vs="\n    attribute vec4 aPosition;\n    attribute vec4 aColor;\n#ifdef TexCoord\n    attribute vec4 aTexCoord0;\n    uniform float uTexture0Width;\n    varying vec4 vTexCoord;\n    varying vec4 vTexMatrix;\n    varying vec4 vTexCoordTransform;\n#endif\n    \n#ifdef VertexColor\n    varying vec4 vColor;\n#endif\n    \n    const float SHIFT_LEFT8 = 256.0;\n    const float SHIFT_RIGHT8 = 1.0 / 256.0;\n    const float SHIFT_RIGHT4 = 1.0 / 16.0;\n    const float SHIFT_LEFT4 = 16.0;\n    void getTextureMatrixFromZValue(in float nZ, inout float XTran, inout float YTran, inout float scale)\n    {\n        if(nZ <= 0.0)\n        {\n            return;\n        }\n        float nDel8 = floor(nZ * SHIFT_RIGHT8);\n        float nDel16 = floor(nDel8 * SHIFT_RIGHT8);\n        float nDel20 = floor(nDel16 * SHIFT_RIGHT4);\n        YTran = nZ - nDel8 * SHIFT_LEFT8;\n        XTran = nDel8 - nDel16 * SHIFT_LEFT8;\n        float nLevel = nDel16 - nDel20 * SHIFT_LEFT4;\n        scale = 1.0 / pow(2.0, nLevel);\n    }\n    \n    void main()\n    {\n    #ifdef TexCoord\n        vTexCoord.xy = aTexCoord0.xy;\n        vTexMatrix = vec4(0.0,0.0,1.0,0.0);\n        vTexCoordTransform.x = aTexCoord0.z;\n        if(vTexCoordTransform.x < -90000.0)\n        {\n            vTexMatrix.z = -1.0;\n        }\n        getTextureMatrixFromZValue(floor(vTexCoordTransform.x), vTexMatrix.x, vTexMatrix.y, vTexMatrix.z);\n        vTexMatrix.w = log2(uTexture0Width * vTexMatrix.z);\n    #endif\n    \n        vec4 vertexPos = aPosition;\n\n    #ifdef VertexColor\n         vColor = aColor;\n    #endif\n    \n        gl_Position = czm_modelViewProjection * vec4(vertexPos.xyz, 1.0);\n    }\n",this.fs="\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n#endif\n\n#ifdef TexCoord\n    uniform sampler2D uTexture;\n    uniform float uTexture0Width;\n    varying vec4 vTexCoord;\n    varying vec4 vTexCoordTransform;\n    varying vec4 vTexMatrix;\n#endif\n\n#ifdef VertexColor\n    varying vec4 vColor;\n#endif\n\n#ifdef TexCoord\n    void calculateMipLevel(in vec2 inTexCoord, in float vecTile, in float fMaxMip, inout float mipLevel)\n    {\n        vec2 dx = dFdx(inTexCoord * vecTile);\n        vec2 dy = dFdy(inTexCoord * vecTile);\n        float dotX = dot(dx, dx);\n        float dotY = dot(dy, dy);\n        float dMax = max(dotX, dotY);\n        float dMin = min(dotX, dotY);\n        float offset = (dMax - dMin) / (dMax + dMin);\n        offset = clamp(offset, 0.0, 1.0);\n        float d = dMax * (1.0 - offset) + dMin * offset;\n        mipLevel = 0.5 * log2(d);\n        mipLevel = clamp(mipLevel, 0.0, fMaxMip - 1.62);\n    }\n\n    void calculateTexCoord(in vec3 inTexCoord, in float scale, in float XTran, in float YTran, in float fTile, in float mipLevel, inout vec2 outTexCoord)\n    {\n        if(inTexCoord.z < -9000.0)\n        {\n            outTexCoord = inTexCoord.xy;\n        }\n        else\n        {\n            vec2 fTexCoord = fract(inTexCoord.xy);\n            float offset = 1.0 * pow(2.0, mipLevel) / fTile;\n            fTexCoord = clamp(fTexCoord, offset, 1.0 - offset);\n            outTexCoord.x = (fTexCoord.x + XTran) * scale;\n            outTexCoord.y = (fTexCoord.y + YTran) * scale;\n        }\n    }\n    \n    vec4 getTexColorForS3M(sampler2D curTexture, vec3 oriTexCoord, float texTileWidth, float fMaxMipLev, float fTexCoordScale, vec2 vecTexCoordTranslate)\n    {\n        vec4 color = vec4(1.0);\n        float mipLevel = 0.0;\n    #ifdef GL_OES_standard_derivatives\n        calculateMipLevel(oriTexCoord.xy, texTileWidth, fMaxMipLev, mipLevel);\n    #endif\n        vec2 realTexCoord;\n        calculateTexCoord(oriTexCoord, fTexCoordScale, vecTexCoordTranslate.x, vecTexCoordTranslate.y, texTileWidth, mipLevel, realTexCoord);\n        if(oriTexCoord.z < -9000.0)\n        {\n            color = texture2D(curTexture, realTexCoord.xy);\n        }\n        else\n        {\n            #ifdef GL_EXT_shader_texture_lod\n                color = texture2DLodEXT(curTexture, realTexCoord.xy, mipLevel);\n            #else\n                color = texture2D(curTexture, realTexCoord.xy, mipLevel);\n            #endif\n        }\n        return color;\n    }\n\n    vec4 getTextureColor()\n    {\n        if(vTexMatrix.z < 0.0)\n        {\n            return vec4(1.0);\n        }\n        float texTileWidth0 = vTexMatrix.z * uTexture0Width;\n        vec3 realTexCoord = vec3(vTexCoord.xy, vTexCoordTransform.x);\n        return getTexColorForS3M(uTexture, realTexCoord, texTileWidth0, vTexMatrix.w, vTexMatrix.z, vTexMatrix.xy);\n    }\n#endif\n    \n    void main()\n    {\n        vec4 baseColorWithAlpha = vec4(1.0);\n        \n    #ifdef VertexColor\n        vec4 baseColorWithAlpha = vColor;\n    #endif\n    \n    #ifdef TexCoord\n        baseColorWithAlpha *= getTextureColor();\n    #endif  \n      \n        gl_FragColor = baseColorWithAlpha;\n    }\n"}pc.prototype=Object.create(fc.prototype),pc.prototype.constructor=fc,pc.prototype.createCommand=function(){if(!A.defined(this.colorCommand)&&0===this.vertexBufferToCreate.length&&0===this.indexBufferToCreate.length&&0===this.shaderProgramToCreate.length){var e=this.layer,t=e.context,r=this.vertexPackage,n=this.arrIndexPackage,i=r.vertexAttributes;if(!(n.length<1)){var o=n[0],a=this.material;this.vertexArray=new A.VertexArray({context:t,attributes:i,indexBuffer:o.indexBuffer}),this.colorCommand=new A.DrawCommand({primitiveType:o.primitiveType,modelMatrix:this.modelMatrix,boundingVolume:A.BoundingSphere.clone(this.boundingVolume),vertexArray:this.vertexArray,shaderProgram:this.shaderProgram,pass:a.bTransparentSorting?A.Pass.TRANSLUCENT:A.Pass.OPAQUE,renderState:A.RenderState.fromCache({cull:{enabled:!0},depthTest:{enabled:!0,func:A.DepthFunction.LESS_OR_EQUAL},blending:A.BlendingState.ALPHA_BLEND}),instanceCount:r.instanceCount}),this.colorCommand.uniformMap=function(e,t,r){return{uGeoMatrix:function(){return r.geoMatrix},uInverseGeoMatrix:function(){return r.invGeoMatrix},uTexture:function(){return e.textures[0]},uTexture0Width:function(){return e.textures[0].width}}}(a,0,this),this.vertexPackage=void 0,this.arrIndexPackage=void 0,this.vs=void 0,this.fs=void 0,this.ready=!0}}},pc.prototype.update=function(e,t){if(!this.ready)return this.createBuffers(e),this.createShaderProgram(e),this.createCommand(e),void this.initLayerSetting(t);e.commandList.push(this.colorCommand)},pc.prototype.isDestroyed=function(){return!1},pc.prototype.destroy=function(){return this.shaderProgram=this.shaderProgram&&!this.shaderProgram.isDestroyed()&&this.shaderProgram.destroy(),this.vertexArray=this.vertexArray&&!this.vertexArray.isDestroyed()&&this.vertexArray.destroy(),this.material=this.material&&!this.material.isDestroyed()&&this.material.destroy(),this.colorCommand=void 0,this.vertexPackage=null,this.arrIndexPackage=null,this.modelMatrix=void 0,this.pickInfo=void 0,this.selectionInfoMap=void 0,this.vs=void 0,this.fs=void 0,A.destroyObject(this)};var yc=pc,mc={OSGBFile:function(e){return new yc(e)},OSGBCacheFile:function(e){return new dc(e)}};function vc(){}var gc=new A.Cartesian3;function Ac(e,t){return e.instanceIndex>-1?function(e){var t=new A.BoundingSphere,r=e.instanceBounds;if(!A.defined(r))return t;var n=new A.Cartesian3(r[0],r[1],r[2]),i=new A.Cartesian3(r[3],r[4],r[5]),o=new A.Cartesian3.lerp(n,i,.5,gc),a=new A.Cartesian3.distance(o,n);return t.center=o,t.radius=a,t}(e):function(e,t){var r,n,i=new A.BoundingSphere,o=new A.Cartesian3,a=e.vertexAttributes[0],s=a.componentsPerAttribute,l=A.defined(e.compressOptions)&&(e.compressOptions&tc.SVC_Vertex)===tc.SVC_Vertex,c=1;l?(c=e.vertCompressConstant,r=new A.Cartesian3(e.minVerticesValue.x,e.minVerticesValue.y,e.minVerticesValue.z),n=new Uint16Array(a.typedArray.buffer,a.typedArray.byteOffset,a.typedArray.byteLength/2)):n=new Float32Array(a.typedArray.buffer,a.typedArray.byteOffset,a.typedArray.byteLength/4);for(var u=[],f=0;f<e.verticesCount;f++)A.Cartesian3.fromArray(n,s*f,o),l&&(o=A.Cartesian3.multiplyByScalar(o,c,o),o=A.Cartesian3.add(o,r,o)),u.push(A.Cartesian3.clone(o));return A.BoundingSphere.fromPoints(u,i),A.BoundingSphere.transform(i,t,i),u.length=0,i}(e,t)}var _c=new A.Matrix3;function Cc(e,t,r,n,i){for(var o={},a=n.geodes,s=0,l=a.length;s<l;s++){var c=a[s],u=c.matrix,f=A.Matrix4.multiply(e.modelMatrix,u,new A.Matrix4),h=void 0;if(A.defined(i.boundingVolume))if(i.boundingVolume.sphere)h=new A.BoundingSphere(i.boundingVolume.sphere.center,i.boundingVolume.sphere.radius),A.BoundingSphere.transform(h,e.modelMatrix,h);else if(i.boundingVolume.box){var d=i.boundingVolume.box,p=new A.Cartesian3(d.center.x,d.center.y,d.center.z),y=new A.Cartesian4(d.xExtent.x,d.xExtent.y,d.xExtent.z,0),m=new A.Cartesian4(d.yExtent.x,d.yExtent.y,d.yExtent.z,0),v=new A.Cartesian4(d.zExtent.x,d.zExtent.y,d.zExtent.z,0),g=new A.Matrix3;A.Matrix3.setColumn(g,0,y,g),A.Matrix3.setColumn(g,1,m,g),A.Matrix3.setColumn(g,2,v,g),p=A.Matrix4.multiplyByPoint(e.modelMatrix,p,p);var _=A.Matrix4.getMatrix3(e.modelMatrix,_c);g=A.Matrix3.multiply(_,g,g),h=new A.OrientedBoundingBox(p,g)}for(var C=c.skeletonNames,E=0,x=C.length;E<x;E++){var B=C[E],T=t.geoPackage[B],b=T.vertexPackage,P=T.arrIndexPackage,M=T.pickInfo,w=void 0;P.length>0&&(w=r[P[0].materialCode]);var I=Ac(b,f);o[B]=mc[e.fileType]({layer:e,vertexPackage:b,arrIndexPackage:P,pickInfo:M,modelMatrix:f,geoMatrix:u,boundingVolume:I,material:w,edgeGeometry:T.edgeGeometry,geoName:B})}}if(!(Object.keys(o).length<1)){if(!A.defined(i.boundingVolume)){var D=[];for(var S in o)o.hasOwnProperty(S)&&D.push(o[S].boundingVolume);i.boundingVolume={sphere:A.BoundingSphere.fromBoundingSpheres(D)}}i.geoMap=o}}vc.parse=function(e,t,r){if(A.defined(t))return function(e,t,r){for(var n=t.groupNode,i=[],o=0,a=n.pageLods.length;o<a;o++){var s={},l=n.pageLods[o];if(s.rangeMode=l.rangeMode,s.rangeDataList=l.childTile,s.rangeList=l.rangeList,l.obb)s.boundingVolume={box:{center:l.obb.obbCenter,xExtent:l.obb.xExtent,yExtent:l.obb.yExtent,zExtent:l.obb.zExtent}};else{var c=l.boundingSphere.center,u=l.boundingSphere.radius;""!==s.rangeDataList?s.boundingVolume={sphere:{center:new A.Cartesian3(c.x,c.y,c.z),radius:u}}:s.isLeafTile=!0}Cc(e,t,r,l,s),A.defined(s.geoMap)&&i.push(s)}return i}(e,t,function(e,t,r){for(var n={},i=t.materials.material,o=0,a=i.length;o<a;o++){var s=i[o].material,l=s.id,c=new Kl;n[l]=c;var u=s.ambient;c.ambientColor=new A.Color(u.r,u.g,u.b,u.a);var f=s.diffuse;c.diffuseColor=new A.Color(f.r,f.g,f.b,f.a);var h=s.specular;c.specularColor=new A.Color(h.r,h.g,h.b,h.a),c.shininess=s.shininess,c.bTransparentSorting=s.transparentsorting;for(var d=s.textureunitstates,p=d.length,y=0;y<p;y++){var m=d[y].textureunitstate,v=m.id,g=0===m.addressmode.u?A.TextureWrap.REPEAT:A.TextureWrap.CLAMP_TO_EDGE,_=0===m.addressmode.v?A.TextureWrap.REPEAT:A.TextureWrap.CLAMP_TO_EDGE;c.texMatrix=A.Matrix4.unpack(m.texmodmatrix);var C=t.texturePackage[v];if(A.defined(C)&&C.arrayBufferView.byteLength>0){C.wrapS=g,C.wrapT=_;var E=r.fileName+v,x=e.textureCache.getTexture(E);if(!A.defined(x)){if(A.PixelFormat.isCompressedFormat(C.internalFormat))x=new Yl(e,v,C);else{var B=A.Math.isPowerOfTwo(C.width)&&A.Math.isPowerOfTwo(C.height);x=new A.Texture({context:e,source:{width:C.width,height:C.height,arrayBufferView:C.arrayBufferView},sampler:new A.Sampler({minificationFilter:B?e._gl.LINEAR_MIPMAP_LINEAR:e._gl.LINEAR,wrapS:g,wrapT:_})}),B&&x.generateMipmap(A.MipmapHint.NICEST)}e.textureCache.addTexture(E,x)}c.textures.push(x)}}}return n}(e.context,t,r))};var Ec=vc,xc=Object.freeze({Distance:0,Pixel:1,GeometryError:2});function Bc(e,t,r,n,i,o){this.layer=e,this.parent=t;var a=n.replace(/\\/g,"/");this.fileExtension=A.getExtensionFromUri(n),this.relativePath=function(e,t){e=e.replace(/\+/g,"%2B");var r=t._basePath;if(!(t._basePath.indexOf("realspace")>-1))return e;var n=r.replace(/(.*realspace)/,"");return r.replace(/\/rest\/realspace/g,"").replace(n,"")+"/rest/realspace"+n+"data/path/"+e.replace(/^\.*/,"").replace(/^\//,"").replace(/\/$/,"")}(a,e),this.fileName=n,this.isLeafTile=0===i,this.isRootTile=!1,this.boundingVolume=this.createBoundingVolume(r,e.modelMatrix);var s=A.Resource.createIfNeeded(e._baseResource);if(A.defined(t))this.baseUri=t.baseUri;else{var l=new A.Resource(a);this.baseUri=l.getBaseUri()}this.contentResource=s.getDerivedResource({url:this.relativePath}),this.serverKey=A.RequestScheduler.getServerKey(this.contentResource.getUrlComponent()),this.request=void 0,this.cacheNode=void 0,this.distanceToCamera=0,this.centerZDepth=0,this.pixel=0,this.depth=t?t.depth+1:0,this.visibilityPlaneMask=0,this.visible=!1,this.children=[],this.renderEntities=[],this.lodRangeData=A.defaultValue(i,16),this.lodRangeMode=A.defaultValue(o,xc.Pixel),this.contentState=this.isLeafTile?Xs.READY:Xs.UNLOADED,this.touchedFrame=0,this.requestedFrame=0,this.processFrame=0,this.selectedFrame=0,this.updatedVisibilityFrame=0,this.foveatedFactor=0,this.priority=0,this.priorityHolder=this,this.wasMinPriorityChild=!1,this.shouldSelect=!1,this.selected=!1,this.finalResolution=!0,this.refines=!1}Object.defineProperties(Bc.prototype,{renderable:{get:function(){var e=this.renderEntities,t=e.length;if(0===t)return!1;for(var r=0;r<t;r++)if(!e[r].ready)return!1;return!0}}});var Tc=new A.Cartesian3;var bc=new A.Matrix3;function Pc(e,t){return e.boundingVolume}Bc.prototype.createBoundingVolume=function(e,t){return A.defined(e.sphere)?function(e,t){var r=A.Cartesian3.clone(e.center),n=e.radius;r=A.Matrix4.multiplyByPoint(t,r,r);var i=A.Matrix4.getScale(t,Tc);return n*=A.Cartesian3.maximumComponent(i),new A.TileBoundingSphere(r,n)}(e.sphere,t):A.defined(e.box)?function(e,t){if(A.defined(e.center)){var r=new A.Cartesian3(e.center.x,e.center.y,e.center.z),n=new A.Cartesian4(e.xExtent.x,e.xExtent.y,e.xExtent.z,0),i=new A.Cartesian4(e.yExtent.x,e.yExtent.y,e.yExtent.z,0),o=new A.Cartesian4(e.zExtent.x,e.zExtent.y,e.zExtent.z,0),a=new A.Matrix3;A.Matrix3.setColumn(a,0,n,a),A.Matrix3.setColumn(a,1,i,a),A.Matrix3.setColumn(a,2,o,a),r=A.Matrix4.multiplyByPoint(t,r,r);var s=A.Matrix4.getMatrix3(t,bc);return a=A.Matrix3.multiply(s,a,a),new A.TileOrientedBoundingBox(r,a)}var l=new A.Cartesian3(e.min.x,e.min.y,e.min.z);A.Matrix4.multiplyByPoint(t,l,l);var c=new A.Cartesian3(e.max.x,e.max.y,e.max.z);A.Matrix4.multiplyByPoint(t,c,c);var u=A.BoundingSphere.fromCornerPoints(l,c,new A.BoundingSphere),f=u.center,h=u.radius,d=A.Matrix4.getScale(t,Tc);return h*=A.Cartesian3.maximumComponent(d),new A.TileBoundingSphere(f,h)}(e.box,t):void 0},Bc.prototype.canTraverse=function(){return 0!==this.children.length&&!this.isLeafTile&&(!A.defined(this.lodRangeData)||this.pixel>this.lodRangeData)},Bc.prototype.getPixel=function(e){var t=this.boundingVolume.boundingSphere,r=t.radius,n=t.center,i=A.Cartesian3.distance(e.camera.positionWC,n),o=e.context.drawingBufferHeight,a=.5*e.camera.frustum._fovy;return.5*o/Math.tan(a)*r/i},Bc.prototype.getGeometryError=function(e){var t=e.camera,r=this.layer.context.drawingBufferHeight;return this.lodRangeData*r/(this.boundingVolume.distanceToCamera(e)*t.frustum.sseDenominator)},Bc.prototype.distanceToTile=function(e){return Pc(this).distanceToCamera(e)};var Mc=new A.Cartesian3;Bc.prototype.distanceToTileCenter=function(e){var t=Pc(this).boundingVolume,r=A.Cartesian3.subtract(t.center,e.camera.positionWC,Mc);return A.Cartesian3.dot(e.camera.directionWC,r)},Bc.prototype.visibility=function(e,t){var r=Pc(this);return e.cullingVolume.computeVisibilityWithPlaneMask(r,t)};var wc=new A.Cartesian3;function Ic(e,t,r){e._cache.add(t),Hl.s3tc=e.context.s3tc,Hl.pvrtc=e.context.pvrtc,Hl.etc1=e.context.etc1;var n=Hl.parseBuffer(r);if(!n)return t.contentState=Xs.FAILED,void t.contentReadyPromise.reject();!function(e,t){for(var r=e.layer,n=t.length,i=Number.MAX_VALUE,o=0,a=xc.Pixel,s=0;s<n;s++){var l=t[s],c=l.boundingVolume,u=l.rangeDataList;u=e.baseUri+u;var f=l.rangeList,h=l.rangeMode,d=l.geoMap;if(0!==f){var p=new Bc(r,e,c,u,f,h);e.children.push(p),r._cache.add(p)}for(var y in d)d.hasOwnProperty(y)&&e.renderEntities.push(d[y]);i=Math.min(i,f),o=Math.max(o,f),a=h}e.isRootTile&&(e.lodRangeData=a===xc.Pixel?i/2:2*o,e.lodRangeMode=a)}(t,Ec.parse(e,n,t)),t.selectedFrame=0,t.contentState=Xs.READY,t.contentReadyPromise.resolve(n)}function Dc(e,t,r){return Math.max(A.Math.normalize(e,t,r)-A.Math.EPSILON7,0)}function Sc(e,t,r){var n=e*Math.pow(10,t);return parseInt(n)*Math.pow(10,r)}Bc.prototype.updateVisibility=function(e,t){var r=this.parent,n=A.defined(r)?r.visibilityPlaneMask:A.CullingVolume.MASK_INDETERMINATE;this.distanceToCamera=this.distanceToTile(e),this.centerZDepth=this.distanceToTileCenter(e),this.pixel=this.getPixel(e),this.geometryError=this.getGeometryError(e),this.visibilityPlaneMask=this.visibility(e,n),this.visible=this.visibilityPlaneMask!==A.CullingVolume.MASK_OUTSIDE&&this.distanceToCamera>=t.visibleDistanceMin&&this.distanceToCamera<=t.visibleDistanceMax,this.priorityDeferred=function(e,t){var r=t.camera,n=e.boundingVolume.boundingSphere,i=n.radius,o=A.Cartesian3.multiplyByScalar(r.directionWC,e.centerZDepth,wc),a=A.Cartesian3.add(r.positionWC,o,wc),s=A.Cartesian3.subtract(a,n.center,wc);if(A.Cartesian3.magnitude(s)>i){var l=A.Cartesian3.normalize(s,wc),c=A.Cartesian3.multiplyByScalar(l,i,wc),u=A.Cartesian3.add(n.center,c,wc),f=A.Cartesian3.subtract(u,r.positionWC,wc),h=A.Cartesian3.normalize(f,wc);e.foveatedFactor=1-Math.abs(A.Cartesian3.dot(r.directionWC,h))}else e.foveatedFactor=0}(this,e)},Bc.prototype.requestContent=function(){var e,t=this,r=this.layer,n=this.contentResource.clone(),i=new A.Request({throttle:!0,throttleByServer:!0,type:A.RequestType.TILES3D,priorityFunction:(e=this,function(){return e.priority}),serverKey:this.serverKey});this.request=i,n.request=i;var o=n.fetchArrayBuffer();if(!A.defined(o))return!1;this.contentState=Xs.LOADING,this.contentReadyPromise=Promise;var a=function(e){return function(t){e.contentState=Xs.FAILED,e.contentReadyPromise.reject(t)}}(this);return o.then((function(e){t.isDestroyed()?a():Ic(r,t,e)})).catch((function(e){i.state!==A.RequestState.CANCELLED?a(e):t.contentState=Xs.UNLOADED})),!0},Bc.prototype.updatePriority=function(e,t){var r=e._minimumPriority,n=e._maximumPriority,i=4,o=Sc(Dc(this.foveatedFactor,r.foveatedFactor,n.foveatedFactor),4,i);i=8;var a=Sc(1-Dc(this.pixel,r.pixel,n.pixel),4,i);i=0;var s=Sc(Dc(this.distanceToCamera,r.distance,n.distance),4,i);this.priority=o+a+s},Bc.prototype.update=function(e,t){for(var r=0,n=this.renderEntities.length;r<n;r++)this.renderEntities[r].update(e,t)},Bc.prototype.free=function(){this.contentState=Xs.UNLOADED,this.request=void 0,this.cacheNode=void 0,this.priorityHolder=void 0,this.contentReadyPromise=void 0,this.priorityHolder=void 0;for(var e=0,t=this.renderEntities.length;e<t;e++)this.renderEntities[e].destroy();this.renderEntities.length=0,this.children.length=0},Bc.prototype.isDestroyed=function(){return!1},Bc.prototype.destroy=function(){return this.free(),A.destroyObject(this)};var Oc=Bc;function Rc(){this._stack=[]}function Lc(e,t){return 0===t.distanceToCamera&&0===e.distanceToCamera?t.centerZDepth-e.centerZDepth:t.distanceToCamera-e.distanceToCamera}function kc(e,t,r,n){var i,o=t.children,a=o.length;for(i=0;i<a;++i)Uc(n,e,o[i]);o.sort(Lc);var s=!0,l=!1,c=-1,u=Number.MAX_VALUE;for(i=0;i<a;++i){var f=o[i];f.foveatedFactor<u&&(c=i,u=f.foveatedFactor),f.visible?(r.push(f),l=!0):(Gc(e,f,n),zc(e,f,n),Nc(e,f,n));var h=f.renderable;s=s&&h}if(l||(s=!1),-1!==c){var d=o[c];d.wasMinPriorityChild=!0;var p=(t.wasMinPriorityChild||t.isRootTile)&&u<=t.priorityHolder.foveatedFactor?t.priorityHolder:t;for(p.foveatedFactor=Math.min(d.foveatedFactor,p.foveatedFactor),p.distanceToCamera=Math.min(d.distanceToCamera,p.distanceToCamera),i=0;i<a;++i){o[i].priorityHolder=p}}return s}function Fc(e,t,r){t.selectedFrame!==r.frameNumber&&t.renderable&&(e._selectedTiles.push(t),t.selectedFrame=r.frameNumber)}function Gc(e,t,r){t.requestedFrame!==r.frameNumber&&t.contentState===Xs.UNLOADED&&(e._requestTiles.push(t),t.requestedFrame=r.frameNumber)}function Nc(e,t,r){t.processFrame===r.frameNumber||t.contentState!==Xs.READY||t.renderable||(t.processFrame=r.frameNumber,e._processTiles.push(t))}function zc(e,t,r){t.touchedFrame!==r.frameNumber&&(e._cache.touch(t),t.touchedFrame=r.frameNumber)}function Uc(e,t,r){!function(e,t,r){!function(e,t,r){t.updatedVisibilityFrame!==r.frameNumber&&(t.updatedVisibilityFrame=r.frameNumber,t.updateVisibility(r,e))}(t,r,e)}(e,t,r),r.wasMinPriorityChild=!1,r.priorityHolder=r,function(e,t){e._maximumPriority.distance=Math.max(t.distanceToCamera,e._maximumPriority.distance),e._minimumPriority.distance=Math.min(t.distanceToCamera,e._minimumPriority.distance),e._maximumPriority.depth=Math.max(t.depth,e._maximumPriority.depth),e._minimumPriority.depth=Math.min(t.depth,e._minimumPriority.depth),e._maximumPriority.foveatedFactor=Math.max(t.foveatedFactor,e._maximumPriority.foveatedFactor),e._minimumPriority.foveatedFactor=Math.min(t.foveatedFactor,e._minimumPriority.foveatedFactor),e._maximumPriority.pixel=Math.max(t.pixel,e._maximumPriority.pixel),e._minimumPriority.pixel=Math.min(t.pixel,e._minimumPriority.pixel)}(t,r),r.shouldSelect=!1,r.selected=!1}function Vc(e,t){return 0!==t.children.length&&(t.lodRangeMode===xc.Pixel?t.pixel/e.lodRangeScale>t.lodRangeData:t.lodRangeMode===xc.GeometryError?t.geometryError>16:t.distanceToCamera*e.lodRangeScale<t.lodRangeData)}Rc.prototype.schedule=function(e,t){var r=this._stack;!function(e,t,r){t.length=0;for(var n=0,i=e._rootTiles.length;n<i;n++){var o=e._rootTiles[n];Uc(r,e,o),o.visible&&t.push(o)}}(e,r,t),function(e,t,r){for(;t.length;){var n=t.pop(),i=n.parent,o=!A.defined(i)||i.refines,a=!1;Vc(e,n)&&(a=kc(e,n,t,r)&&o);var s=!a&&o;Gc(e,n,r),Nc(e,n,r),s&&Fc(e,n,r),zc(e,n,r),n.refines=a}}(e,r,t),function(e,t){for(var r=e._requestTiles,n=r.length,i=0;i<n;++i)r[i].updatePriority(e,t)}(e,t)};var Wc=Rc;function jc(){this._list=new A.DoublyLinkedList,this._sentinel=this._list.add(),this._trimTiles=!1}jc.prototype.reset=function(){this._list.splice(this._list.tail,this._sentinel)},jc.prototype.touch=function(e){var t=e.cacheNode;A.defined(t)&&this._list.splice(this._sentinel,t)},jc.prototype.add=function(e){A.defined(e.cacheNode)||(e.cacheNode=this._list.add(e))},jc.prototype.unloadTile=function(e,t,r){var n=t.cacheNode;A.defined(n)&&(this._list.remove(n),t.cacheNode=void 0,r(e,t))},jc.prototype.unloadTiles=function(e,t){var r=this._trimTiles;this._trimTiles=!1;for(var n=this._list,i=1024*e.maximumMemoryUsage*1024,o=this._sentinel,a=n.head;a&&a!==o&&(e.totalMemoryUsageInBytes>i||r);){var s=a.item;a=a.next,this.unloadTile(e,s,t)}},jc.prototype.trim=function(){this._trimTiles=!0};var Hc=jc,Zc=Object.freeze({RESET:0,SetColor:1,SELECTED:2,HIDE:4,OFFSET:8,CLIP:16,BLOOM:32,ALL:255});function Yc(){this._fillForeColor=new A.Color,this._lineColor=new A.Color,this._lineWidth=1,this._bottomAltitude=0,this._pointSize=1,this._pointColor=new A.Color}Object.defineProperties(Yc.prototype,{fillForeColor:{get:function(){return this._fillForeColor},set:function(e){A.Check.typeOf.object("fillForeColor value",e),A.Color.clone(e,this._fillForeColor)}},bottomAltitude:{get:function(){return this._bottomAltitude},set:function(e){A.Check.typeOf.number("bottomAltitude value",e),this._bottomAltitude!==e&&(this._bottomAltitude=e,this._dirty=!0)}},altitudeMode:{get:function(){return this._altitudeMode},set:function(e){A.Check.typeOf.number("altitudeMode value",e),this._altitudeMode=e}},lineColor:{get:function(){return this._lineColor},set:function(e){A.Check.typeOf.object("line color",e),A.Color.clone(e,this._lineColor)}},lineWidth:{get:function(){return this._lineWidth},set:function(e){A.Check.typeOf.number("line width",e),this._lineWidth=e}},pointSize:{get:function(){return this._pointSize},set:function(e){A.Check.typeOf.number("point size",e),this._pointSize=e}},pointColor:{get:function(){return this._pointColor},set:function(e){A.Check.typeOf.object("point color",e),A.Color.clone(e,this._pointColor)}}});var Jc=Yc;function Kc(e){e=A.defaultValue(e,A.defaultValue.EMPTY_OBJECT),A.Check.defined("options.url",e.url),A.Check.defined("options.context",e.context),this.id=A.createGuid(),this.name=e.name,this.context=e.context,this._url=void 0,this._basePath=void 0,this._baseResource=void 0,this.modelMatrix=new A.Matrix4,this.invModelMatrix=new A.Matrix4,this._visibleDistanceMax=A.defaultValue(e.maxVisibleDistance,Number.MAX_VALUE),this._visibleDistanceMin=A.defaultValue(e.minVisibleDistance,0),this._lodRangeScale=A.defaultValue(e.lodRangeScale,1),this._selectedColor=new A.Color(.7,.7,1,1),this.fileType=void 0,this._position=void 0,this._rectangle=void 0,this._rootTiles=[],this._schuduler=new Wc,this._selections=[],this._objsOperationList={},this._requestTiles=[],this._processTiles=[],this._selectedTiles=[],this._cache=new Hc,this._maximumMemoryUsage=-1,this._totalMemoryUsageInBytes=0,this._vertexCompressionType=void 0,this._style3D=new Jc,this._maximumPriority={foveatedFactor:-Number.MAX_VALUE,depth:-Number.MAX_VALUE,distance:-Number.MAX_VALUE,pixel:-Number.MAX_VALUE},this._minimumPriority={foveatedFactor:Number.MAX_VALUE,depth:Number.MAX_VALUE,distance:Number.MAX_VALUE,pixel:Number.MAX_VALUE};var t=this;this._readyPromise=Promise.resolve(e.url).then((function(e){var r,n=A.Resource.createIfNeeded(e);return r=n.getBaseUri(!0),t._url=n.url,t._basePath=r,t._baseResource=n,n.fetchJson()})).then((function(e){var r=e.extensions;t.fileType=r["s3m:FileType"],t._vertexCompressionType=r["s3m:VertexCompressionType"];var n=e.position.x,i=e.position.y,o=e.position.z;if(t._position=A.Cartesian3.fromDegrees(n,i,o),t.modelMatrix=A.Transforms.eastNorthUpToFixedFrame(t._position),t.invModelMatrix=A.Matrix4.inverse(t.modelMatrix,t.invModelMatrix),t._rectangle=A.Rectangle.fromDegrees(e.geoBounds.left,e.geoBounds.bottom,e.geoBounds.right,e.geoBounds.top),e.heightRange&&(t._minHeight=e.heightRange.min,t._maxHeight=e.heightRange.max),e.wDescript){var a=e.wDescript.range;t._minWValue=a.min,t._maxWValue=a.max}for(var s=e.tiles||e.rootTiles,l=0,c=s.length;l<c;l++){var u=s[l],f=u.url,h={box:u.boundingbox},d=new Oc(t,void 0,h,f);d.isRootTile=!0,t._cache.add(d),t._rootTiles.push(d)}return t})).catch((function(e){return Promise.reject(e)}))}function Xc(e,t){e.updateObjsOperation(t.ids,t)}function Qc(e,t){return e.priority-t.priority}function qc(e,t){t.free()}function $c(e){e._cache.unloadTiles(e,qc)}Object.defineProperties(Kc.prototype,{ready:{get:function(){return this._rootTiles.length>0}},readyPromise:{get:function(){return this._readyPromise}},rectangle:{get:function(){return this._rectangle}},visibleDistanceMax:{get:function(){return this._visibleDistanceMax},set:function(e){A.Check.typeOf.number("max visible distance",e),this._visibleDistanceMax=e}},visibleDistanceMin:{get:function(){return this._visibleDistanceMin},set:function(e){A.Check.typeOf.number("min visible distance",e),this._visibleDistanceMin=e}},lodRangeScale:{get:function(){return this._lodRangeScale},set:function(e){A.Check.typeOf.number("set layer lod range scale",e),this._lodRangeScale=e}},totalMemoryUsageInBytes:{get:function(){return this._totalMemoryUsageInBytes},set:function(e){this._totalMemoryUsageInBytes=e}},maximumMemoryUsage:{get:function(){return this._maximumMemoryUsage},set:function(e){this._maximumMemoryUsage=e}},style3D:{get:function(){return this._style3D},set:function(e){this._style3D=e}}}),Kc.prototype._tranverseRenderEntity=function(e,t){for(var r=[],n=0,i=this._rootTiles.length;n<i;n++){var o=this._rootTiles[n];r.push(o)}for(;r.length;){for(var a=r.pop(),s=0,l=a.renderEntities.length;s<l;s++){var c=a.renderEntities[s];c.ready&&t(c,e)}for(var u=0,f=a.children.length;u<f;u++)r.push(a.children[u])}},Kc.prototype._updateObjsOperation=function(e){this._tranverseRenderEntity({ids:e},Xc)},Kc.prototype._setObjsOperationType=function(e,t){A.Check.defined("set Objs Operation ids",e),A.Check.defined("set Objs Operation operationType",t),Array.isArray(e)||(e=[e]);for(var r,n=new A.AssociativeArray,i=0,o=e.length;i<o;i++)if(r=e[i],A.defined(r)){var a=A.defaultValue(this._objsOperationList[r],0);a!==t&&(a|=t,this._objsOperationList[r]=a,n.set(r,a))}n.length>0&&this._updateObjsOperation(n._hash)},Kc.prototype._removeObjsOperationType=function(e,t){A.Check.defined("set Objs Operation ids",e),Array.isArray(e)||(e=[e]);for(var r,n=Zc.ALL^t,i=new A.AssociativeArray,o=0,a=e.length;o<a;o++){r=e[o];var s=this._objsOperationList[r];A.defined(s)&&((s&=n)===Zc.RESET?delete this._objsOperationList[r]:this._objsOperationList[r]=s,i.set(r,s))}i.length>0&&this._updateObjsOperation(i._hash)},Kc.prototype.releaseSelection=function(){this._selections.length<1||(this._removeObjsOperationType(this._selections,Zc.SELECTED),this._selections.length=0)},Kc.prototype.setSelection=function(e){A.Check.defined("setSelection ids",e),Array.isArray(e)||(e=[e]),this.releaseSelection(),this._selections=this._selections.concat(e),this._setObjsOperationType(e,Zc.SELECTED)},Kc.prototype.prePassesUpdate=function(e){this.ready&&e.newFrame&&(this._cache.reset(),this._requestTiles.length=0,this._processTiles.length=0,this._selectedTiles.length=0)},Kc.prototype.postPassesUpdate=function(e){this.ready&&$c(this)},Kc.prototype.update=function(e){this.ready&&(this._schuduler.schedule(this,e),function(e){var t=e._requestTiles,r=t.length;t.sort(Qc);for(var n=0;n<r;++n){t[n].requestContent()}}(this),function(e,t){for(var r=e._processTiles,n=r.length,i=0;i<n;++i){r[i].update(t,e)}}(this,e),function(e,t){for(var r=e._selectedTiles,n=r.length,i=0;i<n;i++)r[i].update(t,e)}(this,e))},Kc.prototype.isDestroyed=function(){return!1},Kc.prototype.destroy=function(){return this._cache.reset(),$c(this),this._rootTiles.length=0,this._requestTiles.length=0,this._processTiles.length=0,this._selectedTiles.length=0,A.destroyObject(this)};var eu=Kc;function tu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ru(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tu(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var iu=function(e){d()(r,e);var t=nu(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(this,r),(e=t.call(this,n))._url=n.url,e.type=Hs.getLayerType("s3m"),e}return f()(r,[{key:"readyPromise",get:function(){return this._delegate.readyPromise}},{key:"_onAdd",value:function(e){this._viewer=e,delete this.options.context,delete this.options.url,this._delegate=new eu(ru({context:this._viewer.scene.context,url:this._url},this.options)),this._viewer.scene.primitives.add(this._delegate),this._addedHook&&this._addedHook(),this._state=E.ADDED}},{key:"_onRemove",value:function(){this._delegate&&(this._viewer.scene.primitives.remove(this._delegate),this._removedHook&&this._removedHook(),this._state=E.REMOVED)}},{key:"flyTo",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.delegate)return new Promise((function(r){e.readyPromise.then((function(){e._viewer.camera.flyToBoundingSphere(Cesium.BoundingSphere.fromRectangle3D(e.delegate.rectangle),ru(ru({},t),{},{complete:function(){r()}}))}))}))}}]),r}(Hs);Hs.registerType("s3m");var ou=iu,au=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1},su="attribute vec4 position;\nvarying vec2 texcoord;\nvoid main(){\n    texcoord = position.xy*0.5+0.5;\n    gl_Position = position;\n}",lu="#ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp int;\n    precision highp float;\n#else\n    precision mediump int;\n    precision mediump float;\n#endif\nuniform sampler2D source;\nvarying vec2 texcoord;";!function(){var e,t,r,n;if(null!=window.WebGLRenderingContext)n=["WEBKIT","MOZ","MS","O"],r=/^WEBKIT_(.*)|MOZ_(.*)|MS_(.*)|O_(.*)/,e=WebGLRenderingContext.prototype.getExtension,WebGLRenderingContext.prototype.getExtension=function(t){var i,o,a,s,l;if(null!==(o=t.match(r))&&(t=o[1]),null===(i=e.call(this,t))){for(s=0,l=n.length;s<l;s++)if(a=n[s],null!==(i=e.call(this,a+"_"+t)))return i;return null}return i},t=WebGLRenderingContext.prototype.getSupportedExtensions,WebGLRenderingContext.prototype.getSupportedExtensions=function(){var e,n,i,o,a=t.call(this),s=[];for(i=0,o=a.length;i<o;i++)null!==(n=(e=a[i]).match(r))&&(e=n[1]),au.call(s,e)<0&&s.push(e);return s}}(),function(){var e,t,r,n,i,o,a,s,l,c,u,f,h,d;if((i=function(){var e,t,r;return(e=document.createElement("canvas")).width=2,e.height=2,(r=(t=e.getContext("2d")).getImageData(0,0,2,2)).data.set(new Uint8ClampedArray([0,0,0,0,255,255,255,255,0,0,0,0,255,255,255,255])),t.putImageData(r,0,0),e})(),t=function(e,t){var r,n,o,a,s,l,c,u,f,h,d,p,y,m;if(l=e.createProgram(),y=e.createShader(e.VERTEX_SHADER),e.attachShader(l,y),e.shaderSource(y,"attribute vec2 position;\nvoid main(){\n    gl_Position = vec4(position, 0.0, 1.0);\n}"),e.compileShader(y),!e.getShaderParameter(y,e.COMPILE_STATUS))throw e.getShaderInfoLog(y);if(o=e.createShader(e.FRAGMENT_SHADER),e.attachShader(l,o),e.shaderSource(o,"uniform sampler2D source;\nvoid main(){\n    gl_FragColor = texture2D(source, vec2(1.0, 1.0));\n}"),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS))throw e.getShaderInfoLog(o);if(e.linkProgram(l),!e.getProgramParameter(l,e.LINK_STATUS))throw e.getProgramInfoLog(l);return e.useProgram(l),n=function(){return e.deleteShader(o),e.deleteShader(y),e.deleteProgram(l),e.deleteBuffer(r),e.deleteTexture(f),e.deleteTexture(p),e.deleteFramebuffer(a),e.bindBuffer(e.ARRAY_BUFFER,null),e.useProgram(null),e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null)},p=e.createTexture(),e.bindTexture(e.TEXTURE_2D,p),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,2,2,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),a=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,p,0),h=i(),f=e.createTexture(),e.bindTexture(e.TEXTURE_2D,f),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,t,h),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),m=new Float32Array([1,1,-1,1,-1,-1,1,1,-1,-1,1,-1]),r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,m,e.STATIC_DRAW),s=e.getAttribLocation(l,"position"),d=e.getUniformLocation(l,"source"),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),e.uniform1i(d,0),e.drawArrays(e.TRIANGLES,0,6),c=new Uint8Array(16),e.readPixels(0,0,2,2,e.RGBA,e.UNSIGNED_BYTE,c),u=Math.abs(c[0]-127)<10,n(),u},n=function(e,t){var r;return r=e.createTexture(),e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,2,2,0,e.RGBA,t,null),0===e.getError()?(e.deleteTexture(r),!0):(e.deleteTexture(r),!1)},e=function(e,t){var r,n,i;return i=e.createTexture(),e.bindTexture(e.TEXTURE_2D,i),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,2,2,0,e.RGBA,t,null),n=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),r=e.checkFramebufferStatus(e.FRAMEBUFFER),e.deleteTexture(i),e.deleteFramebuffer(n),e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),r===e.FRAMEBUFFER_COMPLETE},l=[],c={},u=[],r=function(){var r,i,o,a,s;r=document.createElement("canvas"),i=null;try{null===(i=r.getContext("experimental-webgl"))&&(i=r.getContext("webgl"))}catch(e){}if(null!=i&&(null===i.getExtension("OES_texture_float")?n(i,i.FLOAT)?(s=!0,l.push("OES_texture_float"),c.OES_texture_float={shim:!0}):(s=!1,u.push("OES_texture_float")):n(i,i.FLOAT)?(s=!0,l.push("OES_texture_float")):(s=!1,u.push("OES_texture_float")),s&&(null===i.getExtension("WEBGL_color_buffer_float")?e(i,i.FLOAT)?(l.push("WEBGL_color_buffer_float"),c.WEBGL_color_buffer_float={shim:!0,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863}):u.push("WEBGL_color_buffer_float"):e(i,i.FLOAT)?l.push("WEBGL_color_buffer_float"):u.push("WEBGL_color_buffer_float"),null===i.getExtension("OES_texture_float_linear")?t(i,i.FLOAT)?(l.push("OES_texture_float_linear"),c.OES_texture_float_linear={shim:!0}):u.push("OES_texture_float_linear"):t(i,i.FLOAT)?l.push("OES_texture_float_linear"):u.push("OES_texture_float_linear")),null===(o=i.getExtension("OES_texture_half_float"))?n(i,36193)?(a=!0,l.push("OES_texture_half_float"),o=c.OES_texture_half_float={HALF_FLOAT_OES:36193,shim:!0}):(a=!1,u.push("OES_texture_half_float")):n(i,o.HALF_FLOAT_OES)?(a=!0,l.push("OES_texture_half_float")):(a=!1,u.push("OES_texture_half_float")),a))return null===i.getExtension("EXT_color_buffer_half_float")?e(i,o.HALF_FLOAT_OES)?(l.push("EXT_color_buffer_half_float"),c.EXT_color_buffer_half_float={shim:!0,RGBA16F_EXT:34842,RGB16F_EXT:34843,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863}):u.push("EXT_color_buffer_half_float"):e(i,o.HALF_FLOAT_OES)?l.push("EXT_color_buffer_half_float"):u.push("EXT_color_buffer_half_float"),null===i.getExtension("OES_texture_half_float_linear")?t(i,o.HALF_FLOAT_OES)?(l.push("OES_texture_half_float_linear"),c.OES_texture_half_float_linear={shim:!0}):u.push("OES_texture_half_float_linear"):t(i,o.HALF_FLOAT_OES)?l.push("OES_texture_half_float_linear"):u.push("OES_texture_half_float_linear")},null!=window.WebGLRenderingContext){for(r(),f={},h=0,d=u.length;h<d;h++)s=u[h],f[s]=!0;o=WebGLRenderingContext.prototype.getExtension,WebGLRenderingContext.prototype.getExtension=function(e){var t;return void 0===(t=c[e])?f[e]?null:o.call(this,e):t},a=WebGLRenderingContext.prototype.getSupportedExtensions,WebGLRenderingContext.prototype.getSupportedExtensions=function(){var e,t,r,n,i,o,s;for(t=[],n=0,o=(r=a.call(this)).length;n<o;n++)e=r[n],void 0===f[e]&&t.push(e);for(i=0,s=l.length;i<s;i++)e=l[i],au.call(t,e)<0&&t.push(e);return t},WebGLRenderingContext.prototype.getFloatExtension=function(e){var t,r,n,i,o,a,l,c,u,f,h,d,p,y,m,v,g,A,_,C,E,x,B,T,b,P;for(null==e.prefer&&(e.prefer=["half"]),null==e.require&&(e.require=[]),null==e.throws&&(e.throws=!0),y=this.getExtension("OES_texture_float"),a=this.getExtension("OES_texture_half_float"),d=this.getExtension("WEBGL_color_buffer_float"),i=this.getExtension("EXT_color_buffer_half_float"),p=this.getExtension("OES_texture_float_linear"),o=this.getExtension("OES_texture_half_float_linear"),h={texture:null!==y,filterable:null!==p,renderable:null!==d,score:0,precision:"single",half:!1,single:!0,type:this.FLOAT},n={texture:null!==a,filterable:null!==o,renderable:null!==i,score:0,precision:"half",half:!0,single:!1,type:null!=(T=null!=a?a.HALF_FLOAT_OES:void 0)?T:null},r=[],h.texture&&r.push(h),n.texture&&r.push(n),f=[],v=0,_=r.length;v<_;v++){for(t=r[v],m=!0,g=0,C=(b=e.require).length;g<C;g++)!1===t[s=b[g]]&&(m=!1);m&&f.push(t)}for(A=0,E=f.length;A<E;A++)for(t=f[A],l=B=0,x=(P=e.prefer).length;B<x;l=++B)u=P[l],c=Math.pow(2,e.prefer.length-l-1),t[u]&&(t.score+=c);if(f.sort((function(e,t){return e.score===t.score?0:e.score<t.score?1:e.score>t.score?-1:void 0})),0===f.length){if(e.throws)throw"No floating point texture support that is "+e.require.join(", ");return null}return{filterable:(f=f[0]).filterable,renderable:f.renderable,type:f.type,precision:f.precision}}}}();var cu=function(){function e(e,t){var r,n;this.gl=e,n=t.vertex,r=t.fragment,this.program=this.gl.createProgram(),this.vs=this.gl.createShader(this.gl.VERTEX_SHADER),this.fs=this.gl.createShader(this.gl.FRAGMENT_SHADER),this.gl.attachShader(this.program,this.vs),this.gl.attachShader(this.program,this.fs),this.compileShader(this.vs,n),this.compileShader(this.fs,r),this.link(),this.value_cache={},this.uniform_cache={},this.attribCache={}}return e.prototype.attribLocation=function(e){var t=this.attribCache[e];return void 0===t&&(t=this.attribCache[e]=this.gl.getAttribLocation(this.program,e)),t},e.prototype.compileShader=function(e,t){if(this.gl.shaderSource(e,t),this.gl.compileShader(e),!this.gl.getShaderParameter(e,this.gl.COMPILE_STATUS))throw"Shader Compile Error: "+this.gl.getShaderInfoLog(e)},e.prototype.link=function(){if(this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))throw"Shader Link Error: "+this.gl.getProgramInfoLog(this.program)},e.prototype.use=function(){return this.gl.useProgram(this.program),this},e.prototype.uniformLoc=function(e){var t=this.uniform_cache[e];return void 0===t&&(t=this.uniform_cache[e]=this.gl.getUniformLocation(this.program,e)),t},e.prototype.int=function(e,t){var r;return this.value_cache[e]!==t&&(this.value_cache[e]=t,(r=this.uniformLoc(e))&&this.gl.uniform1i(r,t)),this},e.prototype.vec2=function(e,t,r){var n;return(n=this.uniformLoc(e))&&this.gl.uniform2f(n,t,r),this},e.prototype.float=function(e,t){var r;return this.value_cache[e]!==t&&(this.value_cache[e]=t,(r=this.uniformLoc(e))&&this.gl.uniform1f(r,t)),this},e}(),uu=function(){function e(e){this.gl=e,this.buffer=this.gl.createFramebuffer()}return e.prototype.destroy=function(){return this.gl.deleteFRamebuffer(this.buffer)},e.prototype.bind=function(){return this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.buffer),this},e.prototype.unbind=function(){return this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this},e.prototype.check=function(){switch(this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER)){case this.gl.FRAMEBUFFER_UNSUPPORTED:throw"Framebuffer is unsupported";case this.gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:throw"Framebuffer incomplete attachment";case this.gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:throw"Framebuffer incomplete dimensions";case this.gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:throw"Framebuffer incomplete missing attachment"}return this},e.prototype.color=function(e){return this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,e.target,e.handle,0),this.check(),this},e.prototype.depth=function(e){return this.gl.framebufferRenderbuffer(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.RENDERBUFFER,e.id),this.check(),this},e.prototype.destroy=function(){return this.gl.deleteFramebuffer(this.buffer)},e}(),fu=function(){function e(e,t){var r,n;switch(this.gl=e,null==t&&(t={}),this.channels=this.gl[(null!=(r=t.channels)?r:"rgba").toUpperCase()],"number"==typeof t.type?this.type=t.type:this.type=this.gl[(null!=(n=t.type)?n:"unsigned_byte").toUpperCase()],this.channels){case this.gl.RGBA:this.chancount=4;break;case this.gl.RGB:this.chancount=3;break;case this.gl.LUMINANCE_ALPHA:this.chancount=2;break;default:this.chancount=1}this.target=this.gl.TEXTURE_2D,this.handle=this.gl.createTexture()}return e.prototype.destroy=function(){return this.gl.deleteTexture(this.handle)},e.prototype.bind=function(e){if(null==e&&(e=0),e>15)throw"Texture unit too large: "+e;return this.gl.activeTexture(this.gl.TEXTURE0+e),this.gl.bindTexture(this.target,this.handle),this},e.prototype.setSize=function(e,t){return this.width=e,this.height=t,this.gl.texImage2D(this.target,0,this.channels,this.width,this.height,0,this.channels,this.type,null),this},e.prototype.upload=function(e){return this.width=e.width,this.height=e.height,this.gl.texImage2D(this.target,0,this.channels,this.channels,this.type,e),this},e.prototype.linear=function(){return this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this},e.prototype.nearest=function(){return this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this},e.prototype.clampToEdge=function(){return this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this},e.prototype.repeat=function(){return this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this},e}(),hu=function(){function e(e,t,r){var n;this.gl=e,this.width=t,this.height=r,n=this.gl.getFloatExtension({require:["renderable"]}),this.texture=new fu(this.gl,{type:n.type}).bind(0).setSize(this.width,this.height).nearest().clampToEdge(),this.fbo=new uu(this.gl).bind().color(this.texture).unbind()}return e.prototype.use=function(){return this.fbo.bind()},e.prototype.bind=function(e){return this.texture.bind(e)},e.prototype.end=function(){return this.fbo.unbind()},e.prototype.resize=function(e,t){return this.width=e,this.height=t,this.texture.bind(0).setSize(this.width,this.height)},e}(),du=function(){function e(e,t,r,n){var i,o,a;for(this.heatmap=e,this.gl=t,this.width=r,this.height=n,this.shader=new cu(this.gl,{vertex:"attribute vec4 position, intensity;\nvarying vec2 off, dim;\nvarying float vIntensity;\nuniform vec2 viewport;\n\nvoid main(){\n    dim = abs(position.zw);\n    off = position.zw;\n    vec2 pos = position.xy + position.zw;\n    vIntensity = intensity.x;\n    gl_Position = vec4((pos/viewport)*2.0-1.0, 0.0, 1.0);\n}",fragment:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp int;\n    precision highp float;\n#else\n    precision mediump int;\n    precision mediump float;\n#endif\nvarying vec2 off, dim;\nvarying float vIntensity;\nvoid main(){\n    float falloff = (1.0 - smoothstep(0.0, 1.0, length(off/dim)));\n    float intensity = falloff*vIntensity;\n    gl_FragColor = vec4(intensity);\n}"}),this.clampShader=new cu(this.gl,{vertex:su,fragment:lu+"uniform float low, high;\nvoid main(){\n    gl_FragColor = vec4(clamp(texture2D(source, texcoord).rgb, low, high), 1.0);\n}"}),this.multiplyShader=new cu(this.gl,{vertex:su,fragment:lu+"uniform float value;\nvoid main(){\n    gl_FragColor = vec4(texture2D(source, texcoord).rgb*value, 1.0);\n}"}),this.blurShader=new cu(this.gl,{vertex:su,fragment:lu+"uniform vec2 viewport;\nvoid main(){\n    vec4 result = vec4(0.0);\n    for(int x=-1; x<=1; x++){\n        for(int y=-1; y<=1; y++){\n            vec2 off = vec2(x,y)/viewport;\n            //float factor = 1.0 - smoothstep(0.0, 1.5, length(off));\n            float factor = 1.0;\n            result += vec4(texture2D(source, texcoord+off).rgb*factor, factor);\n        }\n    }\n    gl_FragColor = vec4(result.rgb/result.w, 1.0);\n}"}),this.nodeBack=new hu(this.gl,this.width,this.height),this.nodeFront=new hu(this.gl,this.width,this.height),this.vertexBuffer=this.gl.createBuffer(),this.vertexSize=8,this.maxPointCount=10240,this.vertexBufferData=new Float32Array(this.maxPointCount*this.vertexSize*6),this.vertexBufferViews=[],i=o=0,a=this.maxPointCount;a>=0?o<a:o>a;i=a>=0?++o:--o)this.vertexBufferViews.push(new Float32Array(this.vertexBufferData.buffer,0,i*this.vertexSize*6));this.bufferIndex=0,this.pointCount=0}return e.prototype.resize=function(e,t){return this.width=e,this.height=t,this.nodeBack.resize(this.width,this.height),this.nodeFront.resize(this.width,this.height)},e.prototype.update=function(){var e,t;if(this.pointCount>0)return this.gl.enable(this.gl.BLEND),this.nodeFront.use(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertexBufferViews[this.pointCount],this.gl.STREAM_DRAW),t=this.shader.attribLocation("position"),e=this.shader.attribLocation("intensity"),this.gl.enableVertexAttribArray(1),this.gl.vertexAttribPointer(t,4,this.gl.FLOAT,!1,32,0),this.gl.vertexAttribPointer(e,4,this.gl.FLOAT,!1,32,16),this.shader.use().vec2("viewport",this.width,this.height),this.gl.drawArrays(this.gl.TRIANGLES,0,6*this.pointCount),this.gl.disableVertexAttribArray(1),this.pointCount=0,this.bufferIndex=0,this.nodeFront.end(),this.gl.disable(this.gl.BLEND)},e.prototype.clear=function(){return this.nodeFront.use(),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.nodeFront.end()},e.prototype.clamp=function(e,t){return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.heatmap.quad),this.gl.vertexAttribPointer(0,4,this.gl.FLOAT,!1,0,0),this.nodeFront.bind(0),this.nodeBack.use(),this.clampShader.use().int("source",0).float("low",e).float("high",t),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.nodeBack.end(),this.swap()},e.prototype.multiply=function(e){return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.heatmap.quad),this.gl.vertexAttribPointer(0,4,this.gl.FLOAT,!1,0,0),this.nodeFront.bind(0),this.nodeBack.use(),this.multiplyShader.use().int("source",0).float("value",e),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.nodeBack.end(),this.swap()},e.prototype.blur=function(){return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.heatmap.quad),this.gl.vertexAttribPointer(0,4,this.gl.FLOAT,!1,0,0),this.nodeFront.bind(0),this.nodeBack.use(),this.blurShader.use().int("source",0).vec2("viewport",this.width,this.height),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.nodeBack.end(),this.swap()},e.prototype.swap=function(){var e=this.nodeFront;return this.nodeFront=this.nodeBack,this.nodeBack=e},e.prototype.addVertex=function(e,t,r,n,i){return this.vertexBufferData[this.bufferIndex++]=e,this.vertexBufferData[this.bufferIndex++]=t,this.vertexBufferData[this.bufferIndex++]=r,this.vertexBufferData[this.bufferIndex++]=n,this.vertexBufferData[this.bufferIndex++]=i,this.vertexBufferData[this.bufferIndex++]=i,this.vertexBufferData[this.bufferIndex++]=i,this.vertexBufferData[this.bufferIndex++]=i},e.prototype.addPoint=function(e,t,r,n){var i;return null==r&&(r=50),null==n&&(n=.2),this.pointCount>=this.maxPointCount-1&&this.update(),t=this.height-t,i=r/2,this.addVertex(e,t,-i,-i,n),this.addVertex(e,t,+i,-i,n),this.addVertex(e,t,-i,+i,n),this.addVertex(e,t,-i,+i,n),this.addVertex(e,t,+i,-i,n),this.addVertex(e,t,+i,+i,n),this.pointCount+=1},e}();!function(){function e(e){var t,r,n,i,o,a,s,l,c,u,f,h;f=null!=e?e:{},this.canvas=f.canvas,this.width=f.width,this.height=f.height,s=f.intensityToAlpha,o=f.gradientTexture,r=f.alphaRange,this.canvas||(this.canvas=document.createElement("canvas"));try{if(this.gl=this.canvas.getContext("experimental-webgl",{depth:!1,antialias:!1}),null===this.gl&&(this.gl=this.canvas.getContext("webgl",{depth:!1,antialias:!1}),null===this.gl))throw"WebGL not supported"}catch(e){throw e,"WebGL not supported"}null!=window.WebGLDebugUtils&&(this.gl=WebGLDebugUtils.makeDebugContext(this.gl,(function(e,t,r){throw WebGLDebugUtils.glEnumToString(e)+" was caused by call to: "+t}))),this.gl.enableVertexAttribArray(0),this.gl.blendFunc(this.gl.ONE,this.gl.ONE),o?(u=this.gradientTexture=new fu(this.gl,{channels:"rgba"}).bind(0).setSize(2,2).nearest().clampToEdge(),"string"==typeof o?((a=new Image).onload=function(){return u.bind().upload(a)},a.src=o):o.width>0&&o.height>0?u.upload(o):o.onload=function(){return u.upload(o)},i="uniform sampler2D gradientTexture;\nvec3 getColor(float intensity){\n    return texture2D(gradientTexture, vec2(intensity, 0.0)).rgb;\n}"):(u=null,i="vec3 getColor(float intensity){\n    vec3 blue = vec3(0.0, 0.0, 1.0);\n    vec3 cyan = vec3(0.0, 1.0, 1.0);\n    vec3 green = vec3(0.0, 1.0, 0.0);\n    vec3 yellow = vec3(1.0, 1.0, 0.0);\n    vec3 red = vec3(1.0, 0.0, 0.0);\n\n    vec3 color = (\n        fade(-0.25, 0.25, intensity)*blue +\n        fade(0.0, 0.5, intensity)*cyan +\n        fade(0.25, 0.75, intensity)*green +\n        fade(0.5, 1.0, intensity)*yellow +\n        smoothstep(0.75, 1.0, intensity)*red\n    );\n    return color;\n}"),null==s&&(s=!0),s?(n=(h=null!=r?r:[0,1])[0],t=h[1],l="vec4 alphaFun(vec3 color, float intensity){\n    float alpha = smoothstep("+n.toFixed(8)+", "+t.toFixed(8)+", intensity);\n    return vec4(color*alpha, alpha);\n}"):l="vec4 alphaFun(vec3 color, float intensity){\n    return vec4(color, 1.0);\n}",this.shader=new cu(this.gl,{vertex:su,fragment:lu+"float linstep(float low, float high, float value){\n    return clamp((value-low)/(high-low), 0.0, 1.0);\n}\n\nfloat fade(float low, float high, float value){\n    float mid = (low+high)*0.5;\n    float range = (high-low)*0.5;\n    float x = 1.0 - clamp(abs(mid-value)/range, 0.0, 1.0);\n    return smoothstep(0.0, 1.0, x);\n}\n\n"+i+"\n"+l+"\n\nvoid main(){\n    float intensity = smoothstep(0.0, 1.0, texture2D(source, texcoord).r);\n    vec3 color = getColor(intensity);\n    gl_FragColor = alphaFun(color, intensity);\n}"}),null==this.width&&(this.width=this.canvas.offsetWidth||2),null==this.height&&(this.height=this.canvas.offsetHeight||2),this.canvas.width=this.width,this.canvas.height=this.height,this.gl.viewport(0,0,this.width,this.height),this.quad=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.quad),c=new Float32Array([-1,-1,0,1,1,-1,0,1,-1,1,0,1,-1,1,0,1,1,-1,0,1,1,1,0,1]),this.gl.bufferData(this.gl.ARRAY_BUFFER,c,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.heights=new du(this,this.gl,this.width,this.height)}e.prototype.adjustSize=function(){var e,t;if(t=this.canvas.offsetWidth||2,e=this.canvas.offsetHeight||2,this.width!==t||this.height!==e)return this.gl.viewport(0,0,t,e),this.canvas.width=t,this.canvas.height=e,this.width=t,this.height=e,this.heights.resize(this.width,this.height)},e.prototype.display=function(){return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.quad),this.gl.vertexAttribPointer(0,4,this.gl.FLOAT,!1,0,0),this.heights.nodeFront.bind(0),this.gradientTexture&&this.gradientTexture.bind(1),this.shader.use().int("source",0).int("gradientTexture",1),this.gl.drawArrays(this.gl.TRIANGLES,0,6)},e.prototype.update=function(){return this.heights.update()},e.prototype.clear=function(){return this.heights.clear()},e.prototype.clamp=function(e,t){return null==e&&(e=0),null==t&&(t=1),this.heights.clamp(e,t)},e.prototype.multiply=function(e){return null==e&&(e=.95),this.heights.multiply(e)},e.prototype.blur=function(){return this.heights.blur()},e.prototype.addPoint=function(e,t,r,n){return this.heights.addPoint(e,t,r,n)},e.prototype.addPoints=function(e){var t,r,n,i;for(i=[],r=0,n=e.length;r<n;r++)t=e[r],i.push(this.addPoint(t.x,t.y,t.size,t.intensity));return i}}();Ys.registerType("heat");var pu={ARCGIS:"arcgis",BAIDU:"baidu",BING:"bing",SINGLE_TILE:"single_tile",WMS:"wms",WMTS:"wmts",XYZ:"xyz",COORD:"coord",GRID:"grid",MAPBOX:"mapbox",MAPBOX_STYLE:"mapbox_style",TMS:"tms",TDT:"tdt"};function yu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var mu=function(e){d()(r,e);var t=yu(r);function r(e){var n;c()(this,r),n=t.call(this,e);var i=new A.WebMercatorProjection;return n._projection.project=function(e,t){return t=oe.WGS84ToGCJ02(A.Math.toDegrees(e.longitude),A.Math.toDegrees(e.latitude)),t=i.project(new A.Cartographic(A.Math.toRadians(t[0]),A.Math.toRadians(t[1]))),new A.Cartesian2(t.x,t.y)},n._projection.unproject=function(e,t){var r=i.unproject(e);return t=oe.GCJ02ToWGS84(A.Math.toDegrees(r.longitude),A.Math.toDegrees(r.latitude)),new A.Cartographic(A.Math.toRadians(t[0]),A.Math.toRadians(t[1]))},n}return f()(r)}(A.WebMercatorTilingScheme);function vu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;Reflect.construct(n,arguments,i)}else n.apply(this,arguments);return y()(this,r)}}var gu={img:"//webst{s}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}",vec:"//webrd{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}",img_z:"//webst{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}"};A.UrlTemplateImageryProvider;pu.AMAP="amap";var Au=[12890594.86,8362377.87,5591021,3481989.83,1678043.12,0],_u=[75,60,45,30,15,0],Cu=[[1.410526172116255e-8,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,17337981.2],[-7.435856389565537e-9,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,10260144.86],[-3.030883460898826e-8,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,6856817.37],[-1.981981304930552e-8,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,4482777.06],[3.09191371068437e-9,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,2555164.4],[2.890871144776878e-9,8983055095805407e-21,-3.068298e-8,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],Eu=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,647795574.6671607,-4082003173.641316,10774905663.51142,-15171875531.51559,12053065338.62167,-5124939663.577472,913311935.9512032,67.5],[.00337398766765,111320.7020202162,4481351.045890365,-23393751.19931662,79682215.47186455,-115964993.2797253,97236711.15602145,-43661946.33752821,8477230.501135234,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837.749470245,992013.7397791013,-1221952.21711287,1340652.697009075,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758.690035394,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],xu=function(){function e(){c()(this,e),this.isWgs84=!1}return f()(e,[{key:"getDistanceByMC",value:function(e,t){if(!e||!t)return 0;if(!(e=this.convertMC2LL(e)))return 0;var r=this.toRadians(e.lng),n=this.toRadians(e.lat);if(!(t=this.convertMC2LL(t)))return 0;var i=this.toRadians(t.lng),o=this.toRadians(t.lat);return this.getDistance(r,i,n,o)}},{key:"getDistanceByLL",value:function(e,t){if(!e||!t)return 0;e.lng=this.getLoop(e.lng,-180,180),e.lat=this.getRange(e.lat,-74,74),t.lng=this.getLoop(t.lng,-180,180),t.lat=this.getRange(t.lat,-74,74);var r=this.toRadians(e.lng),n=this.toRadians(e.lat),i=this.toRadians(t.lng),o=this.toRadians(t.lat);return this.getDistance(r,i,n,o)}},{key:"convertMC2LL",value:function(e){if(!e)return{lng:0,lat:0};var t={};if(this.isWgs84){t.lng=e.lng/20037508.34*180;var r=e.lat/20037508.34*180;return t.lat=180/Math.PI*(2*Math.atan(Math.exp(r*Math.PI/180))-Math.PI/2),{lng:t.lng.toFixed(6),lat:t.lat.toFixed(6)}}Math.abs(e.lng);for(var n=Math.abs(e.lat),i=void 0,o=0;o<Au.length;o++)if(n>=Au[o]){i=Cu[o];break}return{lng:(t=this.convertor(e,i)).lng.toFixed(6),lat:t.lat.toFixed(6)}}},{key:"convertLL2MC",value:function(e){if(!e)return{lng:0,lat:0};if(e.lng>180||e.lng<-180||e.lat>90||e.lat<-90)return e;if(this.isWgs84){var t={};t.lng=e.lng*Math.PI/180*6378137;var r=e.lat*Math.PI/180;return t.lat=3189068.5*Math.log((1+Math.sin(r))/(1-Math.sin(r))),{lng:parseFloat(t.lng.toFixed(2)),lat:parseFloat(t.lat.toFixed(2))}}e.lng=this.getLoop(e.lng,-180,180),e.lat=this.getRange(e.lat,-74,74);e.lng;for(var n=e.lat,i=void 0,o=0;o<_u.length;o++)if(n>=_u[o]){i=Eu[o];break}if(!i)for(var a=0;a<_u.length;a++)if(n<=-_u[a]){i=Eu[a];break}var s=this.convertor(e,i);return{lng:parseFloat(s.lng.toFixed(2)),lat:parseFloat(s.lat.toFixed(2))}}},{key:"convertor",value:function(e,t){if(!e||!t)return{lng:0,lat:0};var r=t[0]+t[1]*Math.abs(e.lng),n=Math.abs(e.lat)/t[9],i=t[2]+t[3]*n+t[4]*n*n+t[5]*n*n*n+t[6]*n*n*n*n+t[7]*n*n*n*n*n+t[8]*n*n*n*n*n*n;return{lng:r*=e.lng<0?-1:1,lat:i*=e.lat<0?-1:1}}},{key:"getDistance",value:function(e,t,r,n){return 6370996.81*Math.acos(Math.sin(r)*Math.sin(n)+Math.cos(r)*Math.cos(n)*Math.cos(t-e))}},{key:"toRadians",value:function(e){return Math.PI*e/180}},{key:"toDegrees",value:function(e){return 180*e/Math.PI}},{key:"getRange",value:function(e,t,r){return null!=t&&(e=Math.max(e,t)),null!=r&&(e=Math.min(e,r)),e}},{key:"getLoop",value:function(e,t,r){for(;e>r;)e-=r-t;for(;e<t;)e+=r-t;return e}},{key:"lngLatToMercator",value:function(e){return this.convertLL2MC(e)}},{key:"lngLatToPoint",value:function(e){var t=this.convertLL2MC(e);return{x:t.lng,y:t.lat}}},{key:"mercatorToLngLat",value:function(e){return this.convertMC2LL(e)}},{key:"pointToLngLat",value:function(e){var t={lng:e.x,lat:e.y};return this.convertMC2LL(t)}},{key:"pointToPixel",value:function(e,t,r,n){if(!e)return{x:0,y:0};e=this.lngLatToMercator(e);var i=this.getZoomUnits(t);return{x:Math.round((e.lng-r.lng)/i+n.width/2),y:Math.round((r.lat-e.lat)/i+n.height/2)}}},{key:"pixelToPoint",value:function(e,t,r,n){if(!e)return{lng:0,lat:0};var i=this.getZoomUnits(t),o={lng:r.lng+i*(e.x-n.width/2),lat:r.lat-i*(e.y-n.height/2)};return this.mercatorToLngLat(o)}},{key:"getZoomUnits",value:function(e){return Math.pow(2,18-e)}}]),e}();function Bu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;Reflect.construct(n,arguments,i)}else n.apply(this,arguments);return y()(this,r)}}A.WebMercatorTilingScheme;pu.BAIDU="baidu";function Tu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;Reflect.construct(n,arguments,i)}else n.apply(this,arguments);return y()(this,r)}}var bu={img:"//mt{s}.google.cn/vt/lyrs=s&hl=zh-CN&x={x}&y={y}&z={z}&s=Gali",elec:"//mt{s}.google.cn/vt/lyrs=m@207000000&hl=zh-CN&gl=CN&src=app&x={x}&y={y}&z={z}&s=Galile",ter:"//mt{s}.google.cn/vt/lyrs=t@131,r@227000000&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}&s=Galile"};A.UrlTemplateImageryProvider;pu.GOOGLE="google";function Pu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;Reflect.construct(n,arguments,i)}else n.apply(this,arguments);return y()(this,r)}}var Mu={IMG_W:"img_w",IMG_C:"img_c",CIA_W:"cia_w",CIA_C:"cia_c",VEC_W:"vec_w",VEC_C:"vec_c",TER_W:"ter_w",TER_C:"ter_c",CVA_W:"cva_w",CVA_C:"cva_c",CTA_W:"cta_w",CTA_C:"cta_c",EIA_W:"eia_w",EIA_C:"eia_c",EVA_W:"eva_w",EVA_C:"eva_c"},wu={},Iu={},Du={},Su={},Ou={},Ru={};A.WebMapTileServiceImageryProvider;function Lu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;Reflect.construct(n,arguments,i)}else n.apply(this,arguments);return y()(this,r)}}pu.TDT="tdt";var ku={img:"//p{s}.map.gtimg.com/sateTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg?version=400",vec:"//rt{s}.map.gtimg.com/tile?z={z}&x={x}&y={reverseY}&styleid={style}&scene=0"};A.UrlTemplateImageryProvider;pu.TENCENT="tencent";Object.keys(pu).forEach((function(e){Hs.registerType(pu[e])}));var Fu={NONE:"none",XYZ:"xyz",ARCGIS:"arcgis",GOOGLE:"google",VR:"vr"};Object.keys(Fu).forEach((function(e){Hs.registerType(Fu["terrain_"+e])}));var Gu={S3MLayer:ou};t.default=Gu}])}));